import{a as ou,b as cu,g as lu,r as x,u as ac,c as js,L as U,B as du,R as uu,d as oe,N as hu,e as ic}from"./vendor-B7EKwP_e.js";import{B as Ot,X as bt,C as cn,I as pt,A as $e,Z as Zn,H as mu,a as Ce,L as Qn,T as ve,b as Ue,D as te,V as le,U as Te,S as lr,c as pu,M as fu,d as Me,F as xu,e as gu,f as yu,g as bu,h as ea,P as oc,i as Je,j as ju,k as ta,l as vs,m as Ae,n as dr,o as ln,p as dn,q as un,r as sa,s as ts,t as Ns,E as We,W as Ft,G as ur,u as je,v as cs,w as Lt,x as $s,y as Ee,z as G,J as _t,K as Ie,N as cc,O as lc,Q as ls,R as Ve,Y as ei,_ as ft,$ as ds,a0 as ws,a1 as Zs,a2 as hr,a3 as dc,a4 as vu,a5 as uc,a6 as Nu,a7 as hn,a8 as mr,a9 as wu,aa as Su,ab as Cu,ac as ti,ad as ku,ae as ra,af as na,ag as mn,ah as hc,ai as Tu,aj as mc,ak as Au,al as Eu,am as Du,an as ss,ao as Pu,ap as Iu,aq as Ru,ar as Mu,as as Ou,at as Fu,au as Lu,av as _u,aw as zu,ax as si,ay as Vu,az as Bu,aA as Ms,aB as pn,aC as fn,aD as Us}from"./ui-CabYlZHe.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Pr={exports:{}},Yt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ri;function $u(){if(ri)return Yt;ri=1;var t=ou(),s=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(c,d,l){var u,h={},m=null,g=null;l!==void 0&&(m=""+l),d.key!==void 0&&(m=""+d.key),d.ref!==void 0&&(g=d.ref);for(u in d)n.call(d,u)&&!i.hasOwnProperty(u)&&(h[u]=d[u]);if(c&&c.defaultProps)for(u in d=c.defaultProps,d)h[u]===void 0&&(h[u]=d[u]);return{$$typeof:s,type:c,key:m,ref:g,props:h,_owner:a.current}}return Yt.Fragment=r,Yt.jsx=o,Yt.jsxs=o,Yt}var ni;function Uu(){return ni||(ni=1,Pr.exports=$u()),Pr.exports}var e=Uu(),Os={},ai;function Wu(){if(ai)return Os;ai=1;var t=cu();return Os.createRoot=t.createRoot,Os.hydrateRoot=t.hydrateRoot,Os}var Hu=Wu();const qu=lu(Hu);let Ku={data:""},Gu=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||Ku,Ju=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Yu=/\/\*[^]*?\*\/|  +/g,ii=/\n+/g,Qe=(t,s)=>{let r="",n="",a="";for(let i in t){let o=t[i];i[0]=="@"?i[1]=="i"?r=i+" "+o+";":n+=i[1]=="f"?Qe(o,i):i+"{"+Qe(o,i[1]=="k"?"":s)+"}":typeof o=="object"?n+=Qe(o,s?s.replace(/([^,])+/g,c=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,d=>/&/.test(d)?d.replace(/&/g,c):c?c+" "+d:d)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=Qe.p?Qe.p(i,o):i+":"+o+";")}return r+(s&&a?s+"{"+a+"}":a)+n},_e={},pc=t=>{if(typeof t=="object"){let s="";for(let r in t)s+=r+pc(t[r]);return s}return t},Xu=(t,s,r,n,a)=>{let i=pc(t),o=_e[i]||(_e[i]=(d=>{let l=0,u=11;for(;l<d.length;)u=101*u+d.charCodeAt(l++)>>>0;return"go"+u})(i));if(!_e[o]){let d=i!==t?t:(l=>{let u,h,m=[{}];for(;u=Ju.exec(l.replace(Yu,""));)u[4]?m.shift():u[3]?(h=u[3].replace(ii," ").trim(),m.unshift(m[0][h]=m[0][h]||{})):m[0][u[1]]=u[2].replace(ii," ").trim();return m[0]})(t);_e[o]=Qe(a?{["@keyframes "+o]:d}:d,r?"":"."+o)}let c=r&&_e.g?_e.g:null;return r&&(_e.g=_e[o]),((d,l,u,h)=>{h?l.data=l.data.replace(h,d):l.data.indexOf(d)===-1&&(l.data=u?d+l.data:l.data+d)})(_e[o],s,n,c),o},Zu=(t,s,r)=>t.reduce((n,a,i)=>{let o=s[i];if(o&&o.call){let c=o(r),d=c&&c.props&&c.props.className||/^go/.test(c)&&c;o=d?"."+d:c&&typeof c=="object"?c.props?"":Qe(c,""):c===!1?"":c}return n+a+(o??"")},"");function pr(t){let s=this||{},r=t.call?t(s.p):t;return Xu(r.unshift?r.raw?Zu(r,[].slice.call(arguments,1),s.p):r.reduce((n,a)=>Object.assign(n,a&&a.call?a(s.p):a),{}):r,Gu(s.target),s.g,s.o,s.k)}let fc,xn,gn;pr.bind({g:1});let He=pr.bind({k:1});function Qu(t,s,r,n){Qe.p=s,fc=t,xn=r,gn=n}function at(t,s){let r=this||{};return function(){let n=arguments;function a(i,o){let c=Object.assign({},i),d=c.className||a.className;r.p=Object.assign({theme:xn&&xn()},c),r.o=/ *go\d+/.test(d),c.className=pr.apply(r,n)+(d?" "+d:"");let l=t;return t[0]&&(l=c.as||t,delete c.as),gn&&l[0]&&gn(c),fc(l,c)}return a}}var eh=t=>typeof t=="function",Qs=(t,s)=>eh(t)?t(s):t,th=(()=>{let t=0;return()=>(++t).toString()})(),xc=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let s=matchMedia("(prefers-reduced-motion: reduce)");t=!s||s.matches}return t}})(),sh=20,aa="default",gc=(t,s)=>{let{toastLimit:r}=t.settings;switch(s.type){case 0:return{...t,toasts:[s.toast,...t.toasts].slice(0,r)};case 1:return{...t,toasts:t.toasts.map(o=>o.id===s.toast.id?{...o,...s.toast}:o)};case 2:let{toast:n}=s;return gc(t,{type:t.toasts.find(o=>o.id===n.id)?1:0,toast:n});case 3:let{toastId:a}=s;return{...t,toasts:t.toasts.map(o=>o.id===a||a===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(o=>o.id!==s.toastId)};case 5:return{...t,pausedAt:s.time};case 6:let i=s.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},Ws=[],yc={toasts:[],pausedAt:void 0,settings:{toastLimit:sh}},Re={},bc=(t,s=aa)=>{Re[s]=gc(Re[s]||yc,t),Ws.forEach(([r,n])=>{r===s&&n(Re[s])})},jc=t=>Object.keys(Re).forEach(s=>bc(t,s)),rh=t=>Object.keys(Re).find(s=>Re[s].toasts.some(r=>r.id===t)),fr=(t=aa)=>s=>{bc(s,t)},nh={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},ah=(t={},s=aa)=>{let[r,n]=x.useState(Re[s]||yc),a=x.useRef(Re[s]);x.useEffect(()=>(a.current!==Re[s]&&n(Re[s]),Ws.push([s,n]),()=>{let o=Ws.findIndex(([c])=>c===s);o>-1&&Ws.splice(o,1)}),[s]);let i=r.toasts.map(o=>{var c,d,l;return{...t,...t[o.type],...o,removeDelay:o.removeDelay||((c=t[o.type])==null?void 0:c.removeDelay)||t?.removeDelay,duration:o.duration||((d=t[o.type])==null?void 0:d.duration)||t?.duration||nh[o.type],style:{...t.style,...(l=t[o.type])==null?void 0:l.style,...o.style}}});return{...r,toasts:i}},ih=(t,s="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:s,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...r,id:r?.id||th()}),Ss=t=>(s,r)=>{let n=ih(s,t,r);return fr(n.toasterId||rh(n.id))({type:2,toast:n}),n.id},ie=(t,s)=>Ss("blank")(t,s);ie.error=Ss("error");ie.success=Ss("success");ie.loading=Ss("loading");ie.custom=Ss("custom");ie.dismiss=(t,s)=>{let r={type:3,toastId:t};s?fr(s)(r):jc(r)};ie.dismissAll=t=>ie.dismiss(void 0,t);ie.remove=(t,s)=>{let r={type:4,toastId:t};s?fr(s)(r):jc(r)};ie.removeAll=t=>ie.remove(void 0,t);ie.promise=(t,s,r)=>{let n=ie.loading(s.loading,{...r,...r?.loading});return typeof t=="function"&&(t=t()),t.then(a=>{let i=s.success?Qs(s.success,a):void 0;return i?ie.success(i,{id:n,...r,...r?.success}):ie.dismiss(n),a}).catch(a=>{let i=s.error?Qs(s.error,a):void 0;i?ie.error(i,{id:n,...r,...r?.error}):ie.dismiss(n)}),t};var oh=1e3,ch=(t,s="default")=>{let{toasts:r,pausedAt:n}=ah(t,s),a=x.useRef(new Map).current,i=x.useCallback((h,m=oh)=>{if(a.has(h))return;let g=setTimeout(()=>{a.delete(h),o({type:4,toastId:h})},m);a.set(h,g)},[]);x.useEffect(()=>{if(n)return;let h=Date.now(),m=r.map(g=>{if(g.duration===1/0)return;let f=(g.duration||0)+g.pauseDuration-(h-g.createdAt);if(f<0){g.visible&&ie.dismiss(g.id);return}return setTimeout(()=>ie.dismiss(g.id,s),f)});return()=>{m.forEach(g=>g&&clearTimeout(g))}},[r,n,s]);let o=x.useCallback(fr(s),[s]),c=x.useCallback(()=>{o({type:5,time:Date.now()})},[o]),d=x.useCallback((h,m)=>{o({type:1,toast:{id:h,height:m}})},[o]),l=x.useCallback(()=>{n&&o({type:6,time:Date.now()})},[n,o]),u=x.useCallback((h,m)=>{let{reverseOrder:g=!1,gutter:f=8,defaultPosition:y}=m||{},b=r.filter(S=>(S.position||y)===(h.position||y)&&S.height),C=b.findIndex(S=>S.id===h.id),T=b.filter((S,N)=>N<C&&S.visible).length;return b.filter(S=>S.visible).slice(...g?[T+1]:[0,T]).reduce((S,N)=>S+(N.height||0)+f,0)},[r]);return x.useEffect(()=>{r.forEach(h=>{if(h.dismissed)i(h.id,h.removeDelay);else{let m=a.get(h.id);m&&(clearTimeout(m),a.delete(h.id))}})},[r,i]),{toasts:r,handlers:{updateHeight:d,startPause:c,endPause:l,calculateOffset:u}}},lh=He`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,dh=He`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,uh=He`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,hh=at("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${lh} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${dh} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${uh} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,mh=He`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,ph=at("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${mh} 1s linear infinite;
`,fh=He`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,xh=He`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,gh=at("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${fh} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${xh} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,yh=at("div")`
  position: absolute;
`,bh=at("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,jh=He`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,vh=at("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${jh} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Nh=({toast:t})=>{let{icon:s,type:r,iconTheme:n}=t;return s!==void 0?typeof s=="string"?x.createElement(vh,null,s):s:r==="blank"?null:x.createElement(bh,null,x.createElement(ph,{...n}),r!=="loading"&&x.createElement(yh,null,r==="error"?x.createElement(hh,{...n}):x.createElement(gh,{...n})))},wh=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Sh=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,Ch="0%{opacity:0;} 100%{opacity:1;}",kh="0%{opacity:1;} 100%{opacity:0;}",Th=at("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Ah=at("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Eh=(t,s)=>{let r=t.includes("top")?1:-1,[n,a]=xc()?[Ch,kh]:[wh(r),Sh(r)];return{animation:s?`${He(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${He(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Dh=x.memo(({toast:t,position:s,style:r,children:n})=>{let a=t.height?Eh(t.position||s||"top-center",t.visible):{opacity:0},i=x.createElement(Nh,{toast:t}),o=x.createElement(Ah,{...t.ariaProps},Qs(t.message,t));return x.createElement(Th,{className:t.className,style:{...a,...r,...t.style}},typeof n=="function"?n({icon:i,message:o}):x.createElement(x.Fragment,null,i,o))});Qu(x.createElement);var Ph=({id:t,className:s,style:r,onHeightUpdate:n,children:a})=>{let i=x.useCallback(o=>{if(o){let c=()=>{let d=o.getBoundingClientRect().height;n(t,d)};c(),new MutationObserver(c).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,n]);return x.createElement("div",{ref:i,className:s,style:r},a)},Ih=(t,s)=>{let r=t.includes("top"),n=r?{top:0}:{bottom:0},a=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:xc()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${s*(r?1:-1)}px)`,...n,...a}},Rh=pr`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Fs=16,Mh=({reverseOrder:t,position:s="top-center",toastOptions:r,gutter:n,children:a,toasterId:i,containerStyle:o,containerClassName:c})=>{let{toasts:d,handlers:l}=ch(r,i);return x.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:Fs,left:Fs,right:Fs,bottom:Fs,pointerEvents:"none",...o},className:c,onMouseEnter:l.startPause,onMouseLeave:l.endPause},d.map(u=>{let h=u.position||s,m=l.calculateOffset(u,{reverseOrder:t,gutter:n,defaultPosition:s}),g=Ih(h,m);return x.createElement(Ph,{id:u.id,key:u.id,onHeightUpdate:l.updateHeight,className:u.visible?Rh:"",style:g},u.type==="custom"?Qs(u.message,u):a?a(u):x.createElement(Dh,{toast:u,position:h}))}))};const vc=x.createContext(),Oh=({children:t})=>{const[s,r]=x.useState(null),[n,a]=x.useState(!0),[i,o]=x.useState(!1);x.useEffect(()=>{(()=>{try{const f=localStorage.getItem("user"),y=localStorage.getItem("authToken");if(f&&y){const b=JSON.parse(f);r(b),o(!0)}else{const b={id:"user_123",name:"John Farmer",email:"john.farmer@example.com",phone:"+1-555-0123",location:"California, USA",farmSize:"50 acres",crops:["Wheat","Corn","Tomatoes"],joinDate:"2023-01-15",avatar:null,subscription:"Premium"};r(b),o(!0),localStorage.setItem("user",JSON.stringify(b)),localStorage.setItem("authToken","demo_token_"+Date.now())}}catch(f){console.error("Error initializing auth:",f),r({id:"user_123",name:"John Farmer",email:"john.farmer@example.com",phone:"+1-555-0123",location:"California, USA",farmSize:"50 acres",crops:["Wheat","Corn","Tomatoes"],joinDate:"2023-01-15",avatar:null,subscription:"Premium"}),o(!0)}finally{a(!1)}})()},[]);const c=async g=>{try{a(!0);const f={id:"user_"+Date.now(),name:g.name||"Farmer User",email:g.email,phone:g.phone||"+1-555-0123",location:g.location||"Unknown",farmSize:g.farmSize||"Not specified",crops:g.crops||["Mixed crops"],joinDate:new Date().toISOString().split("T")[0],avatar:null,subscription:"Premium"},y="auth_token_"+Date.now();return localStorage.setItem("user",JSON.stringify(f)),localStorage.setItem("authToken",y),r(f),o(!0),{success:!0,user:f,token:y}}catch(f){return console.error("Login error:",f),{success:!1,error:f.message}}finally{a(!1)}},d=async()=>{try{return a(!0),localStorage.removeItem("user"),localStorage.removeItem("authToken"),r(null),o(!1),{success:!0}}catch(g){return console.error("Logout error:",g),{success:!1,error:g.message}}finally{a(!1)}},l=async g=>{try{const f={...s,...g};return localStorage.setItem("user",JSON.stringify(f)),r(f),{success:!0,user:f}}catch(f){return console.error("Update user error:",f),{success:!1,error:f.message}}},u=()=>localStorage.getItem("authToken"),m={user:s,isAuthenticated:i,loading:n,login:c,logout:d,updateUser:l,getAuthToken:u,isTokenValid:()=>!!u()};return e.jsx(vc.Provider,{value:m,children:t})},Ct=()=>{const t=x.useContext(vc);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},Fh=()=>{const[t,s]=x.useState(!1),[r,n]=x.useState([]),[a,i]=x.useState(0);x.useEffect(()=>{o();const m=setInterval(o,3e4);return()=>clearInterval(m)},[]);const o=async()=>{try{const m=[{id:"1",type:"weather",title:"Weather Alert",message:"Heavy rainfall expected in your area tomorrow. Secure your crops and ensure proper drainage.",timestamp:new Date(Date.now()-36e5).toISOString(),isRead:!1,priority:"high"},{id:"2",type:"market",title:"Market Update",message:"Wheat prices increased by 5% in your local market. Good time to consider selling.",timestamp:new Date(Date.now()-108e5).toISOString(),isRead:!1,priority:"medium"},{id:"3",type:"irrigation",title:"Irrigation Reminder",message:"Your tomato field needs watering based on current soil moisture levels.",timestamp:new Date(Date.now()-216e5).toISOString(),isRead:!0,priority:"medium"},{id:"4",type:"pest",title:"Pest Alert",message:"Aphid outbreak reported in nearby farms. Monitor your crops closely.",timestamp:new Date(Date.now()-432e5).toISOString(),isRead:!1,priority:"high"},{id:"5",type:"consultation",title:"Consultation Reminder",message:"Your consultation with Dr. Priya is scheduled for tomorrow at 2:00 PM.",timestamp:new Date(Date.now()-864e5).toISOString(),isRead:!0,priority:"low"}];n(m),i(m.filter(g=>!g.isRead).length)}catch(m){console.error("Failed to fetch notifications:",m)}},c=async m=>{try{n(g=>g.map(f=>f.id===m?{...f,isRead:!0}:f)),i(g=>Math.max(0,g-1))}catch(g){console.error("Failed to mark notification as read:",g)}},d=async()=>{try{n(m=>m.map(g=>({...g,isRead:!0}))),i(0)}catch(m){console.error("Failed to mark all notifications as read:",m)}},l=m=>{n(f=>f.filter(y=>y.id!==m));const g=r.find(f=>f.id===m);g&&!g.isRead&&i(f=>Math.max(0,f-1))},u=m=>{switch(m){case"weather":return e.jsx($e,{className:"text-orange-500",size:16});case"market":return e.jsx(Zn,{className:"text-green-500",size:16});case"pest":return e.jsx($e,{className:"text-red-500",size:16});case"irrigation":return e.jsx(pt,{className:"text-blue-500",size:16});case"consultation":return e.jsx(pt,{className:"text-purple-500",size:16});default:return e.jsx(pt,{className:"text-gray-500",size:16})}},h=m=>{const g=new Date,f=new Date(m),y=Math.floor((g-f)/(1e3*60*60));if(y<1){const b=Math.floor((g-f)/6e4);return b<1?"Just now":`${b}m ago`}else return y<24?`${y}h ago`:`${Math.floor(y/24)}d ago`};return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>s(!t),className:"relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-green-500",children:[e.jsx(Ot,{size:20}),a>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium",children:a>9?"9+":a})]}),t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>s(!1)}),e.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50 max-h-96 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Notifications"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[a>0&&e.jsx("button",{onClick:d,className:"text-xs text-blue-600 hover:text-blue-800 font-medium",children:"Mark all read"}),e.jsx("button",{onClick:()=>s(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(bt,{size:20})})]})]}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:r.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ot,{className:"mx-auto text-gray-400 mb-2",size:32}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No notifications yet"})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:r.map(m=>e.jsxs("div",{className:`p-4 hover:bg-gray-50 transition-colors relative ${m.isRead?"":"bg-blue-50 border-l-4 border-l-blue-400"}`,children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:u(m.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:m.title}),e.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[!m.isRead&&e.jsx("button",{onClick:()=>c(m.id),className:"text-blue-600 hover:text-blue-800",title:"Mark as read",children:e.jsx(cn,{size:14})}),e.jsx("button",{onClick:()=>l(m.id),className:"text-gray-400 hover:text-red-600",title:"Delete notification",children:e.jsx(bt,{size:14})})]})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:m.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:h(m.timestamp)})]})]}),m.priority==="high"&&!m.isRead&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"})})]},m.id))})}),r.length>0&&e.jsx("div",{className:"p-3 border-t border-gray-200",children:e.jsx("button",{onClick:()=>{s(!1)},className:"w-full text-center text-sm text-blue-600 hover:text-blue-800 font-medium",children:"View all notifications"})})]})]})]})},Lh=()=>{const[t,s]=x.useState(!1),[r,n]=x.useState(!1),[a,i]=x.useState(null),o=ac(),c=js(),d=[{name:"Dashboard",href:"/dashboard",icon:mu},{name:"Weather",href:"/weather",icon:Ce},{name:"Advisory",href:"/advisory",icon:Qn},{name:"Market",href:"/market",icon:ve},{name:"Pest Detection",href:"/pest-detection",icon:Ue},{name:"Irrigation",href:"/irrigation",icon:te},{name:"Consultation",href:"/consultation",icon:le},{name:"Notifications",href:"/notifications",icon:Ot}];x.useEffect(()=>{const h=localStorage.getItem("user");h&&i(JSON.parse(h))},[]);const l=h=>o.pathname===h,u=()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),i(null),c("/login")};return e.jsxs("nav",{className:"bg-white shadow-lg border-b border-gray-200 sticky top-0 z-50",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex justify-between h-16",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs(U,{to:"/",className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-green-500 to-green-600 rounded-lg flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"SC"})}),e.jsxs("div",{className:"hidden sm:block",children:[e.jsx("span",{className:"text-xl font-bold text-gray-900",children:"Smart Crop"}),e.jsx("span",{className:"text-xl font-bold text-green-600 ml-1",children:"Advisory"})]})]})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-1",children:d.map(h=>{const m=h.icon;return e.jsx(U,{to:h.href,className:`px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${l(h.href)?"bg-green-100 text-green-700 shadow-sm":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(m,{size:16}),e.jsx("span",{children:h.name})]})},h.name)})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Fh,{}),a?e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>n(!r),className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-medium text-sm",children:a.name?.charAt(0).toUpperCase()||"U"})}),e.jsx("span",{className:"hidden sm:block text-sm font-medium text-gray-700",children:a.name||"User"})]}),r&&e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:[e.jsxs("div",{className:"px-4 py-2 border-b border-gray-200",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:a.name}),e.jsx("p",{className:"text-xs text-gray-500",children:a.email})]}),e.jsxs(U,{to:"/profile",className:"flex items-center space-x-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>n(!1),children:[e.jsx(Te,{size:16}),e.jsx("span",{children:"Profile"})]}),e.jsxs(U,{to:"/settings",className:"flex items-center space-x-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>n(!1),children:[e.jsx(lr,{size:16}),e.jsx("span",{children:"Settings"})]}),e.jsxs("button",{onClick:u,className:"flex items-center space-x-2 w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:[e.jsx(pu,{size:16}),e.jsx("span",{children:"Logout"})]})]})]}):e.jsxs("div",{className:"hidden sm:flex items-center space-x-2",children:[e.jsx(U,{to:"/login",className:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-lg text-sm font-medium",children:"Login"}),e.jsx(U,{to:"/register",className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"Register"})]}),e.jsx("div",{className:"lg:hidden flex items-center",children:e.jsx("button",{onClick:()=>s(!t),className:"p-2 rounded-lg text-gray-600 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-green-500",children:t?e.jsx(bt,{size:24}):e.jsx(fu,{size:24})})})]})]}),t&&e.jsx("div",{className:"lg:hidden py-4 border-t border-gray-200",children:e.jsxs("div",{className:"space-y-1",children:[d.map(h=>{const m=h.icon;return e.jsxs(U,{to:h.href,onClick:()=>s(!1),className:`flex items-center space-x-3 px-4 py-3 rounded-lg text-base font-medium transition-colors ${l(h.href)?"bg-green-100 text-green-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(m,{size:20}),e.jsx("span",{children:h.name})]},h.name)}),!a&&e.jsxs("div",{className:"pt-4 border-t border-gray-200 space-y-1",children:[e.jsxs(U,{to:"/login",onClick:()=>s(!1),className:"flex items-center space-x-3 px-4 py-3 rounded-lg text-base font-medium text-gray-600 hover:bg-gray-100 hover:text-gray-900",children:[e.jsx(Te,{size:20}),e.jsx("span",{children:"Login"})]}),e.jsx(U,{to:"/register",onClick:()=>s(!1),className:"flex items-center space-x-3 px-4 py-3 rounded-lg text-base font-medium bg-green-600 text-white hover:bg-green-700",children:e.jsx("span",{children:"Register"})})]})]})})]}),r&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>n(!1)})]})},_h=()=>{const t=new Date().getFullYear();return e.jsx("footer",{className:"bg-gray-900 text-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-green-500 to-green-600 rounded-lg flex items-center justify-center",children:e.jsx(Me,{className:"text-white",size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"Smart Crop Advisory"}),e.jsx("p",{className:"text-green-400 text-sm",children:"Empowering Farmers with AI"})]})]}),e.jsx("p",{className:"text-gray-300 text-sm mb-6 max-w-md",children:"Our AI-powered platform provides comprehensive farming solutions including weather insights, pest detection, market intelligence, and expert consultation to help farmers make informed decisions and increase productivity."}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://facebook.com/smartcropadvisory",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-blue-600 transition-colors",children:e.jsx(xu,{size:18})}),e.jsx("a",{href:"https://twitter.com/smartcropadvisory",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-blue-400 transition-colors",children:e.jsx(gu,{size:18})}),e.jsx("a",{href:"https://instagram.com/smartcropadvisory",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-pink-600 transition-colors",children:e.jsx(yu,{size:18})}),e.jsx("a",{href:"https://linkedin.com/company/smartcropadvisory",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-blue-700 transition-colors",children:e.jsx(bu,{size:18})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Quick Links"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-300",children:[e.jsx("li",{children:e.jsx(U,{to:"/",className:"hover:text-green-400 transition-colors",children:"Dashboard"})}),e.jsx("li",{children:e.jsx(U,{to:"/weather",className:"hover:text-green-400 transition-colors",children:"Weather Forecast"})}),e.jsx("li",{children:e.jsx(U,{to:"/advisory",className:"hover:text-green-400 transition-colors",children:"Crop Advisory"})}),e.jsx("li",{children:e.jsx(U,{to:"/market",className:"hover:text-green-400 transition-colors",children:"Market Prices"})}),e.jsx("li",{children:e.jsx(U,{to:"/pest-detection",className:"hover:text-green-400 transition-colors",children:"Pest Detection"})}),e.jsx("li",{children:e.jsx(U,{to:"/consultation",className:"hover:text-green-400 transition-colors",children:"Expert Consultation"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Support"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-300",children:[e.jsx("li",{children:e.jsx(U,{to:"/help",className:"hover:text-green-400 transition-colors",children:"Help Center"})}),e.jsx("li",{children:e.jsx(U,{to:"/tutorials",className:"hover:text-green-400 transition-colors",children:"Video Tutorials"})}),e.jsx("li",{children:e.jsx(U,{to:"/faq",className:"hover:text-green-400 transition-colors",children:"FAQ"})}),e.jsx("li",{children:e.jsx(U,{to:"/contact",className:"hover:text-green-400 transition-colors",children:"Contact Support"})}),e.jsx("li",{children:e.jsx(U,{to:"/feedback",className:"hover:text-green-400 transition-colors",children:"Send Feedback"})}),e.jsx("li",{children:e.jsx(U,{to:"/community",className:"hover:text-green-400 transition-colors",children:"Community Forum"})})]})]})]}),e.jsx("div",{className:"border-t border-gray-800 pt-8 mt-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ea,{className:"text-green-400 mt-1 flex-shrink-0",size:18}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Email Support"}),e.jsx("p",{className:"text-sm text-gray-300",children:"support@smartcropadvisory.com"}),e.jsx("p",{className:"text-sm text-gray-300",children:"info@smartcropadvisory.com"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(oc,{className:"text-green-400 mt-1 flex-shrink-0",size:18}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Phone Support"}),e.jsx("p",{className:"text-sm text-gray-300",children:"+91 1800-XXX-XXXX (Toll Free)"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Available 24/7"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Je,{className:"text-green-400 mt-1 flex-shrink-0",size:18}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Headquarters"}),e.jsxs("p",{className:"text-sm text-gray-300",children:["Smart Crop Advisory Systems",e.jsx("br",{}),"Agriculture Technology Hub",e.jsx("br",{}),"Bangalore, India - 560001"]})]})]})]})}),e.jsx("div",{className:"border-t border-gray-800 pt-6 mt-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center space-y-2 sm:space-y-0 sm:space-x-6",children:[e.jsxs("p",{className:"text-sm text-gray-400",children:["© ",t," Smart Crop Advisory System. All rights reserved."]}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-400",children:[e.jsx("span",{children:"Made with"}),e.jsx(ju,{className:"text-red-500",size:14}),e.jsx("span",{children:"for farmers"})]})]}),e.jsxs("div",{className:"flex flex-wrap justify-center items-center space-x-6 text-sm text-gray-400",children:[e.jsx(U,{to:"/privacy",className:"hover:text-green-400 transition-colors",children:"Privacy Policy"}),e.jsx(U,{to:"/terms",className:"hover:text-green-400 transition-colors",children:"Terms of Service"}),e.jsx(U,{to:"/cookies",className:"hover:text-green-400 transition-colors",children:"Cookie Policy"}),e.jsx(U,{to:"/accessibility",className:"hover:text-green-400 transition-colors",children:"Accessibility"})]})]})}),e.jsx("div",{className:"border-t border-gray-800 pt-6 mt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"text-lg font-semibold mb-3",children:"Download Our Mobile App"}),e.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"Get instant access to weather alerts, pest detection, and expert advice on your mobile device"}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx("a",{href:"#",className:"inline-flex items-center space-x-2 bg-black text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors",children:e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-xs",children:"Download on the"}),e.jsx("p",{className:"text-sm font-semibold",children:"App Store"})]})}),e.jsx("a",{href:"#",className:"inline-flex items-center space-x-2 bg-black text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors",children:e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-xs",children:"Get it on"}),e.jsx("p",{className:"text-sm font-semibold",children:"Google Play"})]})})]})]})})]})})},ia=x.createContext({});function oa(t){const s=x.useRef(null);return s.current===null&&(s.current=t()),s.current}const ca=typeof window<"u",Nc=ca?x.useLayoutEffect:x.useEffect,xr=x.createContext(null);function la(t,s){t.indexOf(s)===-1&&t.push(s)}function da(t,s){const r=t.indexOf(s);r>-1&&t.splice(r,1)}const qe=(t,s,r)=>r>s?s:r<t?t:r;let ua=()=>{};const Ke={},wc=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Sc(t){return typeof t=="object"&&t!==null}const Cc=t=>/^0[^.\s]+$/u.test(t);function ha(t){let s;return()=>(s===void 0&&(s=t()),s)}const Se=t=>t,zh=(t,s)=>r=>s(t(r)),Cs=(...t)=>t.reduce(zh),us=(t,s,r)=>{const n=s-t;return n===0?1:(r-t)/n};class ma{constructor(){this.subscriptions=[]}add(s){return la(this.subscriptions,s),()=>da(this.subscriptions,s)}notify(s,r,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](s,r,n);else for(let i=0;i<a;i++){const o=this.subscriptions[i];o&&o(s,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Oe=t=>t*1e3,Fe=t=>t/1e3;function kc(t,s){return s?t*(1e3/s):0}const Tc=(t,s,r)=>(((1-3*r+3*s)*t+(3*r-6*s))*t+3*s)*t,Vh=1e-7,Bh=12;function $h(t,s,r,n,a){let i,o,c=0;do o=s+(r-s)/2,i=Tc(o,n,a)-t,i>0?r=o:s=o;while(Math.abs(i)>Vh&&++c<Bh);return o}function ks(t,s,r,n){if(t===s&&r===n)return Se;const a=i=>$h(i,0,1,t,r);return i=>i===0||i===1?i:Tc(a(i),s,n)}const Ac=t=>s=>s<=.5?t(2*s)/2:(2-t(2*(1-s)))/2,Ec=t=>s=>1-t(1-s),Dc=ks(.33,1.53,.69,.99),pa=Ec(Dc),Pc=Ac(pa),Ic=t=>(t*=2)<1?.5*pa(t):.5*(2-Math.pow(2,-10*(t-1))),fa=t=>1-Math.sin(Math.acos(t)),Rc=Ec(fa),Mc=Ac(fa),Uh=ks(.42,0,1,1),Wh=ks(0,0,.58,1),Oc=ks(.42,0,.58,1),Hh=t=>Array.isArray(t)&&typeof t[0]!="number",Fc=t=>Array.isArray(t)&&typeof t[0]=="number",qh={linear:Se,easeIn:Uh,easeInOut:Oc,easeOut:Wh,circIn:fa,circInOut:Mc,circOut:Rc,backIn:pa,backInOut:Pc,backOut:Dc,anticipate:Ic},Kh=t=>typeof t=="string",oi=t=>{if(Fc(t)){ua(t.length===4);const[s,r,n,a]=t;return ks(s,r,n,a)}else if(Kh(t))return qh[t];return t},Ls=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Gh(t,s){let r=new Set,n=new Set,a=!1,i=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function d(u){o.has(u)&&(l.schedule(u),t()),u(c)}const l={schedule:(u,h=!1,m=!1)=>{const f=m&&a?r:n;return h&&o.add(u),f.has(u)||f.add(u),u},cancel:u=>{n.delete(u),o.delete(u)},process:u=>{if(c=u,a){i=!0;return}a=!0,[r,n]=[n,r],r.forEach(d),r.clear(),a=!1,i&&(i=!1,l.process(u))}};return l}const Jh=40;function Lc(t,s){let r=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,o=Ls.reduce((S,N)=>(S[N]=Gh(i),S),{}),{setup:c,read:d,resolveKeyframes:l,preUpdate:u,update:h,preRender:m,render:g,postRender:f}=o,y=()=>{const S=Ke.useManualTiming?a.timestamp:performance.now();r=!1,Ke.useManualTiming||(a.delta=n?1e3/60:Math.max(Math.min(S-a.timestamp,Jh),1)),a.timestamp=S,a.isProcessing=!0,c.process(a),d.process(a),l.process(a),u.process(a),h.process(a),m.process(a),g.process(a),f.process(a),a.isProcessing=!1,r&&s&&(n=!1,t(y))},b=()=>{r=!0,n=!0,a.isProcessing||t(y)};return{schedule:Ls.reduce((S,N)=>{const j=o[N];return S[N]=(v,p=!1,w=!1)=>(r||b(),j.schedule(v,p,w)),S},{}),cancel:S=>{for(let N=0;N<Ls.length;N++)o[Ls[N]].cancel(S)},state:a,steps:o}}const{schedule:J,cancel:st,state:ce,steps:Ir}=Lc(typeof requestAnimationFrame<"u"?requestAnimationFrame:Se,!0);let Hs;function Yh(){Hs=void 0}const ge={now:()=>(Hs===void 0&&ge.set(ce.isProcessing||Ke.useManualTiming?ce.timestamp:performance.now()),Hs),set:t=>{Hs=t,queueMicrotask(Yh)}},_c=t=>s=>typeof s=="string"&&s.startsWith(t),xa=_c("--"),Xh=_c("var(--"),ga=t=>Xh(t)?Zh.test(t.split("/*")[0].trim()):!1,Zh=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,$t={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},hs={...$t,transform:t=>qe(0,1,t)},_s={...$t,default:1},rs=t=>Math.round(t*1e5)/1e5,ya=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Qh(t){return t==null}const em=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ba=(t,s)=>r=>!!(typeof r=="string"&&em.test(r)&&r.startsWith(t)||s&&!Qh(r)&&Object.prototype.hasOwnProperty.call(r,s)),zc=(t,s,r)=>n=>{if(typeof n!="string")return n;const[a,i,o,c]=n.match(ya);return{[t]:parseFloat(a),[s]:parseFloat(i),[r]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},tm=t=>qe(0,255,t),Rr={...$t,transform:t=>Math.round(tm(t))},dt={test:ba("rgb","red"),parse:zc("red","green","blue"),transform:({red:t,green:s,blue:r,alpha:n=1})=>"rgba("+Rr.transform(t)+", "+Rr.transform(s)+", "+Rr.transform(r)+", "+rs(hs.transform(n))+")"};function sm(t){let s="",r="",n="",a="";return t.length>5?(s=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),a=t.substring(7,9)):(s=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),a=t.substring(4,5),s+=s,r+=r,n+=n,a+=a),{red:parseInt(s,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const yn={test:ba("#"),parse:sm,transform:dt.transform},Ts=t=>({test:s=>typeof s=="string"&&s.endsWith(t)&&s.split(" ").length===1,parse:parseFloat,transform:s=>`${s}${t}`}),Ze=Ts("deg"),Le=Ts("%"),_=Ts("px"),rm=Ts("vh"),nm=Ts("vw"),ci={...Le,parse:t=>Le.parse(t)/100,transform:t=>Le.transform(t*100)},Et={test:ba("hsl","hue"),parse:zc("hue","saturation","lightness"),transform:({hue:t,saturation:s,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+Le.transform(rs(s))+", "+Le.transform(rs(r))+", "+rs(hs.transform(n))+")"},ae={test:t=>dt.test(t)||yn.test(t)||Et.test(t),parse:t=>dt.test(t)?dt.parse(t):Et.test(t)?Et.parse(t):yn.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?dt.transform(t):Et.transform(t),getAnimatableNone:t=>{const s=ae.parse(t);return s.alpha=0,ae.transform(s)}},am=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function im(t){return isNaN(t)&&typeof t=="string"&&(t.match(ya)?.length||0)+(t.match(am)?.length||0)>0}const Vc="number",Bc="color",om="var",cm="var(",li="${}",lm=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ms(t){const s=t.toString(),r=[],n={color:[],number:[],var:[]},a=[];let i=0;const c=s.replace(lm,d=>(ae.test(d)?(n.color.push(i),a.push(Bc),r.push(ae.parse(d))):d.startsWith(cm)?(n.var.push(i),a.push(om),r.push(d)):(n.number.push(i),a.push(Vc),r.push(parseFloat(d))),++i,li)).split(li);return{values:r,split:c,indexes:n,types:a}}function $c(t){return ms(t).values}function Uc(t){const{split:s,types:r}=ms(t),n=s.length;return a=>{let i="";for(let o=0;o<n;o++)if(i+=s[o],a[o]!==void 0){const c=r[o];c===Vc?i+=rs(a[o]):c===Bc?i+=ae.transform(a[o]):i+=a[o]}return i}}const dm=t=>typeof t=="number"?0:ae.test(t)?ae.getAnimatableNone(t):t;function um(t){const s=$c(t);return Uc(t)(s.map(dm))}const rt={test:im,parse:$c,createTransformer:Uc,getAnimatableNone:um};function Mr(t,s,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(s-t)*6*r:r<1/2?s:r<2/3?t+(s-t)*(2/3-r)*6:t}function hm({hue:t,saturation:s,lightness:r,alpha:n}){t/=360,s/=100,r/=100;let a=0,i=0,o=0;if(!s)a=i=o=r;else{const c=r<.5?r*(1+s):r+s-r*s,d=2*r-c;a=Mr(d,c,t+1/3),i=Mr(d,c,t),o=Mr(d,c,t-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}function er(t,s){return r=>r>0?s:t}const Z=(t,s,r)=>t+(s-t)*r,Or=(t,s,r)=>{const n=t*t,a=r*(s*s-n)+n;return a<0?0:Math.sqrt(a)},mm=[yn,dt,Et],pm=t=>mm.find(s=>s.test(t));function di(t){const s=pm(t);if(!s)return!1;let r=s.parse(t);return s===Et&&(r=hm(r)),r}const ui=(t,s)=>{const r=di(t),n=di(s);if(!r||!n)return er(t,s);const a={...r};return i=>(a.red=Or(r.red,n.red,i),a.green=Or(r.green,n.green,i),a.blue=Or(r.blue,n.blue,i),a.alpha=Z(r.alpha,n.alpha,i),dt.transform(a))},bn=new Set(["none","hidden"]);function fm(t,s){return bn.has(t)?r=>r<=0?t:s:r=>r>=1?s:t}function xm(t,s){return r=>Z(t,s,r)}function ja(t){return typeof t=="number"?xm:typeof t=="string"?ga(t)?er:ae.test(t)?ui:bm:Array.isArray(t)?Wc:typeof t=="object"?ae.test(t)?ui:gm:er}function Wc(t,s){const r=[...t],n=r.length,a=t.map((i,o)=>ja(i)(i,s[o]));return i=>{for(let o=0;o<n;o++)r[o]=a[o](i);return r}}function gm(t,s){const r={...t,...s},n={};for(const a in r)t[a]!==void 0&&s[a]!==void 0&&(n[a]=ja(t[a])(t[a],s[a]));return a=>{for(const i in n)r[i]=n[i](a);return r}}function ym(t,s){const r=[],n={color:0,var:0,number:0};for(let a=0;a<s.values.length;a++){const i=s.types[a],o=t.indexes[i][n[i]],c=t.values[o]??0;r[a]=c,n[i]++}return r}const bm=(t,s)=>{const r=rt.createTransformer(s),n=ms(t),a=ms(s);return n.indexes.var.length===a.indexes.var.length&&n.indexes.color.length===a.indexes.color.length&&n.indexes.number.length>=a.indexes.number.length?bn.has(t)&&!a.values.length||bn.has(s)&&!n.values.length?fm(t,s):Cs(Wc(ym(n,a),a.values),r):er(t,s)};function Hc(t,s,r){return typeof t=="number"&&typeof s=="number"&&typeof r=="number"?Z(t,s,r):ja(t)(t,s)}const jm=t=>{const s=({timestamp:r})=>t(r);return{start:(r=!0)=>J.update(s,r),stop:()=>st(s),now:()=>ce.isProcessing?ce.timestamp:ge.now()}},qc=(t,s,r=10)=>{let n="";const a=Math.max(Math.round(s/r),2);for(let i=0;i<a;i++)n+=Math.round(t(i/(a-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},tr=2e4;function va(t){let s=0;const r=50;let n=t.next(s);for(;!n.done&&s<tr;)s+=r,n=t.next(s);return s>=tr?1/0:s}function vm(t,s=100,r){const n=r({...t,keyframes:[0,s]}),a=Math.min(va(n),tr);return{type:"keyframes",ease:i=>n.next(a*i).value/s,duration:Fe(a)}}const Nm=5;function Kc(t,s,r){const n=Math.max(s-Nm,0);return kc(r-t(n),s-n)}const ee={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Fr=.001;function wm({duration:t=ee.duration,bounce:s=ee.bounce,velocity:r=ee.velocity,mass:n=ee.mass}){let a,i,o=1-s;o=qe(ee.minDamping,ee.maxDamping,o),t=qe(ee.minDuration,ee.maxDuration,Fe(t)),o<1?(a=l=>{const u=l*o,h=u*t,m=u-r,g=jn(l,o),f=Math.exp(-h);return Fr-m/g*f},i=l=>{const h=l*o*t,m=h*r+r,g=Math.pow(o,2)*Math.pow(l,2)*t,f=Math.exp(-h),y=jn(Math.pow(l,2),o);return(-a(l)+Fr>0?-1:1)*((m-g)*f)/y}):(a=l=>{const u=Math.exp(-l*t),h=(l-r)*t+1;return-Fr+u*h},i=l=>{const u=Math.exp(-l*t),h=(r-l)*(t*t);return u*h});const c=5/t,d=Cm(a,i,c);if(t=Oe(t),isNaN(d))return{stiffness:ee.stiffness,damping:ee.damping,duration:t};{const l=Math.pow(d,2)*n;return{stiffness:l,damping:o*2*Math.sqrt(n*l),duration:t}}}const Sm=12;function Cm(t,s,r){let n=r;for(let a=1;a<Sm;a++)n=n-t(n)/s(n);return n}function jn(t,s){return t*Math.sqrt(1-s*s)}const km=["duration","bounce"],Tm=["stiffness","damping","mass"];function hi(t,s){return s.some(r=>t[r]!==void 0)}function Am(t){let s={velocity:ee.velocity,stiffness:ee.stiffness,damping:ee.damping,mass:ee.mass,isResolvedFromDuration:!1,...t};if(!hi(t,Tm)&&hi(t,km))if(t.visualDuration){const r=t.visualDuration,n=2*Math.PI/(r*1.2),a=n*n,i=2*qe(.05,1,1-(t.bounce||0))*Math.sqrt(a);s={...s,mass:ee.mass,stiffness:a,damping:i}}else{const r=wm(t);s={...s,...r,mass:ee.mass},s.isResolvedFromDuration=!0}return s}function sr(t=ee.visualDuration,s=ee.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:s}:t;let{restSpeed:n,restDelta:a}=r;const i=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],c={done:!1,value:i},{stiffness:d,damping:l,mass:u,duration:h,velocity:m,isResolvedFromDuration:g}=Am({...r,velocity:-Fe(r.velocity||0)}),f=m||0,y=l/(2*Math.sqrt(d*u)),b=o-i,C=Fe(Math.sqrt(d/u)),T=Math.abs(b)<5;n||(n=T?ee.restSpeed.granular:ee.restSpeed.default),a||(a=T?ee.restDelta.granular:ee.restDelta.default);let S;if(y<1){const j=jn(C,y);S=v=>{const p=Math.exp(-y*C*v);return o-p*((f+y*C*b)/j*Math.sin(j*v)+b*Math.cos(j*v))}}else if(y===1)S=j=>o-Math.exp(-C*j)*(b+(f+C*b)*j);else{const j=C*Math.sqrt(y*y-1);S=v=>{const p=Math.exp(-y*C*v),w=Math.min(j*v,300);return o-p*((f+y*C*b)*Math.sinh(w)+j*b*Math.cosh(w))/j}}const N={calculatedDuration:g&&h||null,next:j=>{const v=S(j);if(g)c.done=j>=h;else{let p=j===0?f:0;y<1&&(p=j===0?Oe(f):Kc(S,j,v));const w=Math.abs(p)<=n,P=Math.abs(o-v)<=a;c.done=w&&P}return c.value=c.done?o:v,c},toString:()=>{const j=Math.min(va(N),tr),v=qc(p=>N.next(j*p).value,j,30);return j+"ms "+v},toTransition:()=>{}};return N}sr.applyToOptions=t=>{const s=vm(t,100,sr);return t.ease=s.ease,t.duration=Oe(s.duration),t.type="keyframes",t};function vn({keyframes:t,velocity:s=0,power:r=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:c,max:d,restDelta:l=.5,restSpeed:u}){const h=t[0],m={done:!1,value:h},g=w=>c!==void 0&&w<c||d!==void 0&&w>d,f=w=>c===void 0?d:d===void 0||Math.abs(c-w)<Math.abs(d-w)?c:d;let y=r*s;const b=h+y,C=o===void 0?b:o(b);C!==b&&(y=C-h);const T=w=>-y*Math.exp(-w/n),S=w=>C+T(w),N=w=>{const P=T(w),A=S(w);m.done=Math.abs(P)<=l,m.value=m.done?C:A};let j,v;const p=w=>{g(m.value)&&(j=w,v=sr({keyframes:[m.value,f(m.value)],velocity:Kc(S,w,m.value),damping:a,stiffness:i,restDelta:l,restSpeed:u}))};return p(0),{calculatedDuration:null,next:w=>{let P=!1;return!v&&j===void 0&&(P=!0,N(w),p(w)),j!==void 0&&w>=j?v.next(w-j):(!P&&N(w),m)}}}function Em(t,s,r){const n=[],a=r||Ke.mix||Hc,i=t.length-1;for(let o=0;o<i;o++){let c=a(t[o],t[o+1]);if(s){const d=Array.isArray(s)?s[o]||Se:s;c=Cs(d,c)}n.push(c)}return n}function Dm(t,s,{clamp:r=!0,ease:n,mixer:a}={}){const i=t.length;if(ua(i===s.length),i===1)return()=>s[0];if(i===2&&s[0]===s[1])return()=>s[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),s=[...s].reverse());const c=Em(s,n,a),d=c.length,l=u=>{if(o&&u<t[0])return s[0];let h=0;if(d>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const m=us(t[h],t[h+1],u);return c[h](m)};return r?u=>l(qe(t[0],t[i-1],u)):l}function Pm(t,s){const r=t[t.length-1];for(let n=1;n<=s;n++){const a=us(0,s,n);t.push(Z(r,1,a))}}function Im(t){const s=[0];return Pm(s,t.length-1),s}function Rm(t,s){return t.map(r=>r*s)}function Mm(t,s){return t.map(()=>s||Oc).splice(0,t.length-1)}function ns({duration:t=300,keyframes:s,times:r,ease:n="easeInOut"}){const a=Hh(n)?n.map(oi):oi(n),i={done:!1,value:s[0]},o=Rm(r&&r.length===s.length?r:Im(s),t),c=Dm(o,s,{ease:Array.isArray(a)?a:Mm(s,a)});return{calculatedDuration:t,next:d=>(i.value=c(d),i.done=d>=t,i)}}const Om=t=>t!==null;function Na(t,{repeat:s,repeatType:r="loop"},n,a=1){const i=t.filter(Om),c=a<0||s&&r!=="loop"&&s%2===1?0:i.length-1;return!c||n===void 0?i[c]:n}const Fm={decay:vn,inertia:vn,tween:ns,keyframes:ns,spring:sr};function Gc(t){typeof t.type=="string"&&(t.type=Fm[t.type])}class wa{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(s=>{this.resolve=s})}notifyFinished(){this.resolve()}then(s,r){return this.finished.then(s,r)}}const Lm=t=>t/100;class Sa extends wa{constructor(s){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:r}=this.options;r&&r.updatedAt!==ge.now()&&this.tick(ge.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=s,this.initAnimation(),this.play(),s.autoplay===!1&&this.pause()}initAnimation(){const{options:s}=this;Gc(s);const{type:r=ns,repeat:n=0,repeatDelay:a=0,repeatType:i,velocity:o=0}=s;let{keyframes:c}=s;const d=r||ns;d!==ns&&typeof c[0]!="number"&&(this.mixKeyframes=Cs(Lm,Hc(c[0],c[1])),c=[0,100]);const l=d({...s,keyframes:c});i==="mirror"&&(this.mirroredGenerator=d({...s,keyframes:[...c].reverse(),velocity:-o})),l.calculatedDuration===null&&(l.calculatedDuration=va(l));const{calculatedDuration:u}=l;this.calculatedDuration=u,this.resolvedDuration=u+a,this.totalDuration=this.resolvedDuration*(n+1)-a,this.generator=l}updateTime(s){const r=Math.round(s-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(s,r=!1){const{generator:n,totalDuration:a,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:d}=this;if(this.startTime===null)return n.next(0);const{delay:l=0,keyframes:u,repeat:h,repeatType:m,repeatDelay:g,type:f,onUpdate:y,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,s):this.speed<0&&(this.startTime=Math.min(s-a/this.speed,this.startTime)),r?this.currentTime=s:this.updateTime(s);const C=this.currentTime-l*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?C<0:C>a;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let S=this.currentTime,N=n;if(h){const w=Math.min(this.currentTime,a)/c;let P=Math.floor(w),A=w%1;!A&&w>=1&&(A=1),A===1&&P--,P=Math.min(P,h+1),!!(P%2)&&(m==="reverse"?(A=1-A,g&&(A-=g/c)):m==="mirror"&&(N=o)),S=qe(0,1,A)*c}const j=T?{done:!1,value:u[0]}:N.next(S);i&&(j.value=i(j.value));let{done:v}=j;!T&&d!==null&&(v=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const p=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&v);return p&&f!==vn&&(j.value=Na(u,this.options,b,this.speed)),y&&y(j.value),p&&this.finish(),j}then(s,r){return this.finished.then(s,r)}get duration(){return Fe(this.calculatedDuration)}get time(){return Fe(this.currentTime)}set time(s){s=Oe(s),this.currentTime=s,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=s:this.driver&&(this.startTime=this.driver.now()-s/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(s){this.updateTime(ge.now());const r=this.playbackSpeed!==s;this.playbackSpeed=s,r&&(this.time=Fe(this.currentTime))}play(){if(this.isStopped)return;const{driver:s=jm,startTime:r}=this.options;this.driver||(this.driver=s(a=>this.tick(a))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ge.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(s){return this.startTime=0,this.tick(s,!0)}attachTimeline(s){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),s.observe(this)}}function _m(t){for(let s=1;s<t.length;s++)t[s]??(t[s]=t[s-1])}const ut=t=>t*180/Math.PI,Nn=t=>{const s=ut(Math.atan2(t[1],t[0]));return wn(s)},zm={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Nn,rotateZ:Nn,skewX:t=>ut(Math.atan(t[1])),skewY:t=>ut(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},wn=t=>(t=t%360,t<0&&(t+=360),t),mi=Nn,pi=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),fi=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Vm={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:pi,scaleY:fi,scale:t=>(pi(t)+fi(t))/2,rotateX:t=>wn(ut(Math.atan2(t[6],t[5]))),rotateY:t=>wn(ut(Math.atan2(-t[2],t[0]))),rotateZ:mi,rotate:mi,skewX:t=>ut(Math.atan(t[4])),skewY:t=>ut(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Sn(t){return t.includes("scale")?1:0}function Cn(t,s){if(!t||t==="none")return Sn(s);const r=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,a;if(r)n=Vm,a=r;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=zm,a=c}if(!a)return Sn(s);const i=n[s],o=a[1].split(",").map($m);return typeof i=="function"?i(o):o[i]}const Bm=(t,s)=>{const{transform:r="none"}=getComputedStyle(t);return Cn(r,s)};function $m(t){return parseFloat(t.trim())}const Ut=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Wt=new Set(Ut),xi=t=>t===$t||t===_,Um=new Set(["x","y","z"]),Wm=Ut.filter(t=>!Um.has(t));function Hm(t){const s=[];return Wm.forEach(r=>{const n=t.getValue(r);n!==void 0&&(s.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),s}const xt={width:({x:t},{paddingLeft:s="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(s)-parseFloat(r),height:({y:t},{paddingTop:s="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(s)-parseFloat(r),top:(t,{top:s})=>parseFloat(s),left:(t,{left:s})=>parseFloat(s),bottom:({y:t},{top:s})=>parseFloat(s)+(t.max-t.min),right:({x:t},{left:s})=>parseFloat(s)+(t.max-t.min),x:(t,{transform:s})=>Cn(s,"x"),y:(t,{transform:s})=>Cn(s,"y")};xt.translateX=xt.x;xt.translateY=xt.y;const gt=new Set;let kn=!1,Tn=!1,An=!1;function Jc(){if(Tn){const t=Array.from(gt).filter(n=>n.needsMeasurement),s=new Set(t.map(n=>n.element)),r=new Map;s.forEach(n=>{const a=Hm(n);a.length&&(r.set(n,a),n.render())}),t.forEach(n=>n.measureInitialState()),s.forEach(n=>{n.render();const a=r.get(n);a&&a.forEach(([i,o])=>{n.getValue(i)?.set(o)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Tn=!1,kn=!1,gt.forEach(t=>t.complete(An)),gt.clear()}function Yc(){gt.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Tn=!0)})}function qm(){An=!0,Yc(),Jc(),An=!1}class Ca{constructor(s,r,n,a,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...s],this.onComplete=r,this.name=n,this.motionValue=a,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(gt.add(this),kn||(kn=!0,J.read(Yc),J.resolveKeyframes(Jc))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:s,name:r,element:n,motionValue:a}=this;if(s[0]===null){const i=a?.get(),o=s[s.length-1];if(i!==void 0)s[0]=i;else if(n&&r){const c=n.readValue(r,o);c!=null&&(s[0]=c)}s[0]===void 0&&(s[0]=o),a&&i===void 0&&a.set(s[0])}_m(s)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(s=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,s),gt.delete(this)}cancel(){this.state==="scheduled"&&(gt.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Km=t=>t.startsWith("--");function Gm(t,s,r){Km(s)?t.style.setProperty(s,r):t.style[s]=r}const Jm=ha(()=>window.ScrollTimeline!==void 0),Ym={};function Xm(t,s){const r=ha(t);return()=>Ym[s]??r()}const Xc=Xm(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),es=([t,s,r,n])=>`cubic-bezier(${t}, ${s}, ${r}, ${n})`,gi={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:es([0,.65,.55,1]),circOut:es([.55,0,1,.45]),backIn:es([.31,.01,.66,-.59]),backOut:es([.33,1.53,.69,.99])};function Zc(t,s){if(t)return typeof t=="function"?Xc()?qc(t,s):"ease-out":Fc(t)?es(t):Array.isArray(t)?t.map(r=>Zc(r,s)||gi.easeOut):gi[t]}function Zm(t,s,r,{delay:n=0,duration:a=300,repeat:i=0,repeatType:o="loop",ease:c="easeOut",times:d}={},l=void 0){const u={[s]:r};d&&(u.offset=d);const h=Zc(c,a);Array.isArray(h)&&(u.easing=h);const m={delay:n,duration:a,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return l&&(m.pseudoElement=l),t.animate(u,m)}function Qc(t){return typeof t=="function"&&"applyToOptions"in t}function Qm({type:t,...s}){return Qc(t)&&Xc()?t.applyToOptions(s):(s.duration??(s.duration=300),s.ease??(s.ease="easeOut"),s)}class ep extends wa{constructor(s){if(super(),this.finishedTime=null,this.isStopped=!1,!s)return;const{element:r,name:n,keyframes:a,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:c,onComplete:d}=s;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=s,ua(typeof s.type!="string");const l=Qm(s);this.animation=Zm(r,n,a,l,i),l.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const u=Na(a,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(u):Gm(r,n,u),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:s}=this;s==="idle"||s==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const s=this.animation.effect?.getComputedTiming?.().duration||0;return Fe(Number(s))}get time(){return Fe(Number(this.animation.currentTime)||0)}set time(s){this.finishedTime=null,this.animation.currentTime=Oe(s)}get speed(){return this.animation.playbackRate}set speed(s){s<0&&(this.finishedTime=null),this.animation.playbackRate=s}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(s){this.animation.startTime=s}attachTimeline({timeline:s,observe:r}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,s&&Jm()?(this.animation.timeline=s,Se):r(this)}}const el={anticipate:Ic,backInOut:Pc,circInOut:Mc};function tp(t){return t in el}function sp(t){typeof t.ease=="string"&&tp(t.ease)&&(t.ease=el[t.ease])}const yi=10;class rp extends ep{constructor(s){sp(s),Gc(s),super(s),s.startTime&&(this.startTime=s.startTime),this.options=s}updateMotionValue(s){const{motionValue:r,onUpdate:n,onComplete:a,element:i,...o}=this.options;if(!r)return;if(s!==void 0){r.set(s);return}const c=new Sa({...o,autoplay:!1}),d=Oe(this.finishedTime??this.time);r.setWithVelocity(c.sample(d-yi).value,c.sample(d).value,yi),c.stop()}}const bi=(t,s)=>s==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(rt.test(t)||t==="0")&&!t.startsWith("url("));function np(t){const s=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==s)return!0}function ap(t,s,r,n){const a=t[0];if(a===null)return!1;if(s==="display"||s==="visibility")return!0;const i=t[t.length-1],o=bi(a,s),c=bi(i,s);return!o||!c?!1:np(t)||(r==="spring"||Qc(r))&&n}function En(t){t.duration=0,t.type}const ip=new Set(["opacity","clipPath","filter","transform"]),op=ha(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function cp(t){const{motionValue:s,name:r,repeatDelay:n,repeatType:a,damping:i,type:o}=t;if(!(s?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:l}=s.owner.getProps();return op()&&r&&ip.has(r)&&(r!=="transform"||!l)&&!d&&!n&&a!=="mirror"&&i!==0&&o!=="inertia"}const lp=40;class dp extends wa{constructor({autoplay:s=!0,delay:r=0,type:n="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:o="loop",keyframes:c,name:d,motionValue:l,element:u,...h}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=ge.now();const m={autoplay:s,delay:r,type:n,repeat:a,repeatDelay:i,repeatType:o,name:d,motionValue:l,element:u,...h},g=u?.KeyframeResolver||Ca;this.keyframeResolver=new g(c,(f,y,b)=>this.onKeyframesResolved(f,y,m,!b),d,l,u),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(s,r,n,a){this.keyframeResolver=void 0;const{name:i,type:o,velocity:c,delay:d,isHandoff:l,onUpdate:u}=n;this.resolvedAt=ge.now(),ap(s,i,o,c)||((Ke.instantAnimations||!d)&&u?.(Na(s,n,r)),s[0]=s[s.length-1],En(n),n.repeat=0);const m={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>lp?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:s},g=!l&&cp(m)?new rp({...m,element:m.motionValue.owner.current}):new Sa(m);g.finished.then(()=>this.notifyFinished()).catch(Se),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(s,r){return this.finished.finally(s).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),qm()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(s){this.animation.time=s}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(s){this.animation.speed=s}get startTime(){return this.animation.startTime}attachTimeline(s){return this._animation?this.stopTimeline=this.animation.attachTimeline(s):this.pendingTimeline=s,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const up=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function hp(t){const s=up.exec(t);if(!s)return[,];const[,r,n,a]=s;return[`--${r??n}`,a]}function tl(t,s,r=1){const[n,a]=hp(t);if(!n)return;const i=window.getComputedStyle(s).getPropertyValue(n);if(i){const o=i.trim();return wc(o)?parseFloat(o):o}return ga(a)?tl(a,s,r+1):a}function ka(t,s){return t?.[s]??t?.default??t}const sl=new Set(["width","height","top","left","right","bottom",...Ut]),mp={test:t=>t==="auto",parse:t=>t},rl=t=>s=>s.test(t),nl=[$t,_,Le,Ze,nm,rm,mp],ji=t=>nl.find(rl(t));function pp(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Cc(t):!0}const fp=new Set(["brightness","contrast","saturate","opacity"]);function xp(t){const[s,r]=t.slice(0,-1).split("(");if(s==="drop-shadow")return t;const[n]=r.match(ya)||[];if(!n)return t;const a=r.replace(n,"");let i=fp.has(s)?1:0;return n!==r&&(i*=100),s+"("+i+a+")"}const gp=/\b([a-z-]*)\(.*?\)/gu,Dn={...rt,getAnimatableNone:t=>{const s=t.match(gp);return s?s.map(xp).join(" "):t}},vi={...$t,transform:Math.round},yp={rotate:Ze,rotateX:Ze,rotateY:Ze,rotateZ:Ze,scale:_s,scaleX:_s,scaleY:_s,scaleZ:_s,skew:Ze,skewX:Ze,skewY:Ze,distance:_,translateX:_,translateY:_,translateZ:_,x:_,y:_,z:_,perspective:_,transformPerspective:_,opacity:hs,originX:ci,originY:ci,originZ:_},Ta={borderWidth:_,borderTopWidth:_,borderRightWidth:_,borderBottomWidth:_,borderLeftWidth:_,borderRadius:_,radius:_,borderTopLeftRadius:_,borderTopRightRadius:_,borderBottomRightRadius:_,borderBottomLeftRadius:_,width:_,maxWidth:_,height:_,maxHeight:_,top:_,right:_,bottom:_,left:_,padding:_,paddingTop:_,paddingRight:_,paddingBottom:_,paddingLeft:_,margin:_,marginTop:_,marginRight:_,marginBottom:_,marginLeft:_,backgroundPositionX:_,backgroundPositionY:_,...yp,zIndex:vi,fillOpacity:hs,strokeOpacity:hs,numOctaves:vi},bp={...Ta,color:ae,backgroundColor:ae,outlineColor:ae,fill:ae,stroke:ae,borderColor:ae,borderTopColor:ae,borderRightColor:ae,borderBottomColor:ae,borderLeftColor:ae,filter:Dn,WebkitFilter:Dn},al=t=>bp[t];function il(t,s){let r=al(t);return r!==Dn&&(r=rt),r.getAnimatableNone?r.getAnimatableNone(s):void 0}const jp=new Set(["auto","none","0"]);function vp(t,s,r){let n=0,a;for(;n<t.length&&!a;){const i=t[n];typeof i=="string"&&!jp.has(i)&&ms(i).values.length&&(a=t[n]),n++}if(a&&r)for(const i of s)t[i]=il(r,a)}class Np extends Ca{constructor(s,r,n,a,i){super(s,r,n,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:s,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let d=0;d<s.length;d++){let l=s[d];if(typeof l=="string"&&(l=l.trim(),ga(l))){const u=tl(l,r.current);u!==void 0&&(s[d]=u),d===s.length-1&&(this.finalKeyframe=l)}}if(this.resolveNoneKeyframes(),!sl.has(n)||s.length!==2)return;const[a,i]=s,o=ji(a),c=ji(i);if(o!==c)if(xi(o)&&xi(c))for(let d=0;d<s.length;d++){const l=s[d];typeof l=="string"&&(s[d]=parseFloat(l))}else xt[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:s,name:r}=this,n=[];for(let a=0;a<s.length;a++)(s[a]===null||pp(s[a]))&&n.push(a);n.length&&vp(s,n,r)}measureInitialState(){const{element:s,unresolvedKeyframes:r,name:n}=this;if(!s||!s.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=xt[n](s.measureViewportBox(),window.getComputedStyle(s.current)),r[0]=this.measuredOrigin;const a=r[r.length-1];a!==void 0&&s.getValue(n,a).jump(a,!1)}measureEndState(){const{element:s,name:r,unresolvedKeyframes:n}=this;if(!s||!s.current)return;const a=s.getValue(r);a&&a.jump(this.measuredOrigin,!1);const i=n.length-1,o=n[i];n[i]=xt[r](s.measureViewportBox(),window.getComputedStyle(s.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,d])=>{s.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function wp(t,s,r){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let n=document;const a=r?.[t]??n.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}const ol=(t,s)=>s&&typeof t=="number"?s.transform(t):t;function cl(t){return Sc(t)&&"offsetHeight"in t}const Ni=30,Sp=t=>!isNaN(parseFloat(t));class Cp{constructor(s,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const a=ge.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty()},this.hasAnimated=!1,this.setCurrent(s),this.owner=r.owner}setCurrent(s){this.current=s,this.updatedAt=ge.now(),this.canTrackVelocity===null&&s!==void 0&&(this.canTrackVelocity=Sp(this.current))}setPrevFrameValue(s=this.current){this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt}onChange(s){return this.on("change",s)}on(s,r){this.events[s]||(this.events[s]=new ma);const n=this.events[s].add(r);return s==="change"?()=>{n(),J.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const s in this.events)this.events[s].clear()}attach(s,r){this.passiveEffect=s,this.stopPassiveEffect=r}set(s){this.passiveEffect?this.passiveEffect(s,this.updateAndNotify):this.updateAndNotify(s)}setWithVelocity(s,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt-n}jump(s,r=!0){this.updateAndNotify(s),this.prev=s,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(s){this.dependents||(this.dependents=new Set),this.dependents.add(s)}removeDependent(s){this.dependents&&this.dependents.delete(s)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const s=ge.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||s-this.updatedAt>Ni)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,Ni);return kc(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(s){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=s(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function zt(t,s){return new Cp(t,s)}const{schedule:Aa}=Lc(queueMicrotask,!1),ke={x:!1,y:!1};function ll(){return ke.x||ke.y}function kp(t){return t==="x"||t==="y"?ke[t]?null:(ke[t]=!0,()=>{ke[t]=!1}):ke.x||ke.y?null:(ke.x=ke.y=!0,()=>{ke.x=ke.y=!1})}function dl(t,s){const r=wp(t),n=new AbortController,a={passive:!0,...s,signal:n.signal};return[r,a,()=>n.abort()]}function wi(t){return!(t.pointerType==="touch"||ll())}function Tp(t,s,r={}){const[n,a,i]=dl(t,r),o=c=>{if(!wi(c))return;const{target:d}=c,l=s(d,c);if(typeof l!="function"||!d)return;const u=h=>{wi(h)&&(l(h),d.removeEventListener("pointerleave",u))};d.addEventListener("pointerleave",u,a)};return n.forEach(c=>{c.addEventListener("pointerenter",o,a)}),i}const ul=(t,s)=>s?t===s?!0:ul(t,s.parentElement):!1,Ea=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Ap=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Ep(t){return Ap.has(t.tagName)||t.tabIndex!==-1}const qs=new WeakSet;function Si(t){return s=>{s.key==="Enter"&&t(s)}}function Lr(t,s){t.dispatchEvent(new PointerEvent("pointer"+s,{isPrimary:!0,bubbles:!0}))}const Dp=(t,s)=>{const r=t.currentTarget;if(!r)return;const n=Si(()=>{if(qs.has(r))return;Lr(r,"down");const a=Si(()=>{Lr(r,"up")}),i=()=>Lr(r,"cancel");r.addEventListener("keyup",a,s),r.addEventListener("blur",i,s)});r.addEventListener("keydown",n,s),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),s)};function Ci(t){return Ea(t)&&!ll()}function Pp(t,s,r={}){const[n,a,i]=dl(t,r),o=c=>{const d=c.currentTarget;if(!Ci(c))return;qs.add(d);const l=s(d,c),u=(g,f)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",m),qs.has(d)&&qs.delete(d),Ci(g)&&typeof l=="function"&&l(g,{success:f})},h=g=>{u(g,d===window||d===document||r.useGlobalTarget||ul(d,g.target))},m=g=>{u(g,!1)};window.addEventListener("pointerup",h,a),window.addEventListener("pointercancel",m,a)};return n.forEach(c=>{(r.useGlobalTarget?window:c).addEventListener("pointerdown",o,a),cl(c)&&(c.addEventListener("focus",l=>Dp(l,a)),!Ep(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),i}function hl(t){return Sc(t)&&"ownerSVGElement"in t}function Ip(t){return hl(t)&&t.tagName==="svg"}const me=t=>!!(t&&t.getVelocity),Rp=[...nl,ae,rt],Mp=t=>Rp.find(rl(t)),Da=x.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function ki(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function Op(...t){return s=>{let r=!1;const n=t.map(a=>{const i=ki(a,s);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():ki(t[a],null)}}}}function Fp(...t){return x.useCallback(Op(...t),t)}class Lp extends x.Component{getSnapshotBeforeUpdate(s){const r=this.props.childRef.current;if(r&&s.isPresent&&!this.props.isPresent){const n=r.offsetParent,a=cl(n)&&n.offsetWidth||0,i=this.props.sizeRef.current;i.height=r.offsetHeight||0,i.width=r.offsetWidth||0,i.top=r.offsetTop,i.left=r.offsetLeft,i.right=a-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function _p({children:t,isPresent:s,anchorX:r,root:n}){const a=x.useId(),i=x.useRef(null),o=x.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=x.useContext(Da),d=Fp(i,t?.ref);return x.useInsertionEffect(()=>{const{width:l,height:u,top:h,left:m,right:g}=o.current;if(s||!i.current||!l||!u)return;const f=r==="left"?`left: ${m}`:`right: ${g}`;i.current.dataset.motionPopId=a;const y=document.createElement("style");c&&(y.nonce=c);const b=n??document.head;return b.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${u}px !important;
            ${f}px !important;
            top: ${h}px !important;
          }
        `),()=>{b.contains(y)&&b.removeChild(y)}},[s]),e.jsx(Lp,{isPresent:s,childRef:i,sizeRef:o,children:x.cloneElement(t,{ref:d})})}const zp=({children:t,initial:s,isPresent:r,onExitComplete:n,custom:a,presenceAffectsLayout:i,mode:o,anchorX:c,root:d})=>{const l=oa(Vp),u=x.useId();let h=!0,m=x.useMemo(()=>(h=!1,{id:u,initial:s,isPresent:r,custom:a,onExitComplete:g=>{l.set(g,!0);for(const f of l.values())if(!f)return;n&&n()},register:g=>(l.set(g,!1),()=>l.delete(g))}),[r,l,n]);return i&&h&&(m={...m}),x.useMemo(()=>{l.forEach((g,f)=>l.set(f,!1))},[r]),x.useEffect(()=>{!r&&!l.size&&n&&n()},[r]),o==="popLayout"&&(t=e.jsx(_p,{isPresent:r,anchorX:c,root:d,children:t})),e.jsx(xr.Provider,{value:m,children:t})};function Vp(){return new Map}function ml(t=!0){const s=x.useContext(xr);if(s===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:a}=s,i=x.useId();x.useEffect(()=>{if(t)return a(i)},[t]);const o=x.useCallback(()=>t&&n&&n(i),[i,n,t]);return!r&&n?[!1,o]:[!0]}const zs=t=>t.key||"";function Ti(t){const s=[];return x.Children.forEach(t,r=>{x.isValidElement(r)&&s.push(r)}),s}const ps=({children:t,custom:s,initial:r=!0,onExitComplete:n,presenceAffectsLayout:a=!0,mode:i="sync",propagate:o=!1,anchorX:c="left",root:d})=>{const[l,u]=ml(o),h=x.useMemo(()=>Ti(t),[t]),m=o&&!l?[]:h.map(zs),g=x.useRef(!0),f=x.useRef(h),y=oa(()=>new Map),[b,C]=x.useState(h),[T,S]=x.useState(h);Nc(()=>{g.current=!1,f.current=h;for(let v=0;v<T.length;v++){const p=zs(T[v]);m.includes(p)?y.delete(p):y.get(p)!==!0&&y.set(p,!1)}},[T,m.length,m.join("-")]);const N=[];if(h!==b){let v=[...h];for(let p=0;p<T.length;p++){const w=T[p],P=zs(w);m.includes(P)||(v.splice(p,0,w),N.push(w))}return i==="wait"&&N.length&&(v=N),S(Ti(v)),C(h),null}const{forceRender:j}=x.useContext(ia);return e.jsx(e.Fragment,{children:T.map(v=>{const p=zs(v),w=o&&!l?!1:h===T||m.includes(p),P=()=>{if(y.has(p))y.set(p,!0);else return;let A=!0;y.forEach(M=>{M||(A=!1)}),A&&(j?.(),S(f.current),o&&u?.(),n&&n())};return e.jsx(zp,{isPresent:w,initial:!g.current||r?void 0:!1,custom:s,presenceAffectsLayout:a,mode:i,root:d,onExitComplete:w?void 0:P,anchorX:c,children:v},p)})})},pl=x.createContext({strict:!1}),Ai={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Vt={};for(const t in Ai)Vt[t]={isEnabled:s=>Ai[t].some(r=>!!s[r])};function Bp(t){for(const s in t)Vt[s]={...Vt[s],...t[s]}}const $p=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function rr(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||$p.has(t)}let fl=t=>!rr(t);function Up(t){typeof t=="function"&&(fl=s=>s.startsWith("on")?!rr(s):t(s))}try{Up(require("@emotion/is-prop-valid").default)}catch{}function Wp(t,s,r){const n={};for(const a in t)a==="values"&&typeof t.values=="object"||(fl(a)||r===!0&&rr(a)||!s&&!rr(a)||t.draggable&&a.startsWith("onDrag"))&&(n[a]=t[a]);return n}const gr=x.createContext({});function yr(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function fs(t){return typeof t=="string"||Array.isArray(t)}const Pa=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ia=["initial",...Pa];function br(t){return yr(t.animate)||Ia.some(s=>fs(t[s]))}function xl(t){return!!(br(t)||t.variants)}function Hp(t,s){if(br(t)){const{initial:r,animate:n}=t;return{initial:r===!1||fs(r)?r:void 0,animate:fs(n)?n:void 0}}return t.inherit!==!1?s:{}}function qp(t){const{initial:s,animate:r}=Hp(t,x.useContext(gr));return x.useMemo(()=>({initial:s,animate:r}),[Ei(s),Ei(r)])}function Ei(t){return Array.isArray(t)?t.join(" "):t}const xs={};function Kp(t){for(const s in t)xs[s]=t[s],xa(s)&&(xs[s].isCSSVariable=!0)}function gl(t,{layout:s,layoutId:r}){return Wt.has(t)||t.startsWith("origin")||(s||r!==void 0)&&(!!xs[t]||t==="opacity")}const Gp={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Jp=Ut.length;function Yp(t,s,r){let n="",a=!0;for(let i=0;i<Jp;i++){const o=Ut[i],c=t[o];if(c===void 0)continue;let d=!0;if(typeof c=="number"?d=c===(o.startsWith("scale")?1:0):d=parseFloat(c)===0,!d||r){const l=ol(c,Ta[o]);if(!d){a=!1;const u=Gp[o]||o;n+=`${u}(${l}) `}r&&(s[o]=l)}}return n=n.trim(),r?n=r(s,a?"":n):a&&(n="none"),n}function Ra(t,s,r){const{style:n,vars:a,transformOrigin:i}=t;let o=!1,c=!1;for(const d in s){const l=s[d];if(Wt.has(d)){o=!0;continue}else if(xa(d)){a[d]=l;continue}else{const u=ol(l,Ta[d]);d.startsWith("origin")?(c=!0,i[d]=u):n[d]=u}}if(s.transform||(o||r?n.transform=Yp(s,t.transform,r):n.transform&&(n.transform="none")),c){const{originX:d="50%",originY:l="50%",originZ:u=0}=i;n.transformOrigin=`${d} ${l} ${u}`}}const Ma=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function yl(t,s,r){for(const n in s)!me(s[n])&&!gl(n,r)&&(t[n]=s[n])}function Xp({transformTemplate:t},s){return x.useMemo(()=>{const r=Ma();return Ra(r,s,t),Object.assign({},r.vars,r.style)},[s])}function Zp(t,s){const r=t.style||{},n={};return yl(n,r,t),Object.assign(n,Xp(t,s)),n}function Qp(t,s){const r={},n=Zp(t,s);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=n,r}const ef={offset:"stroke-dashoffset",array:"stroke-dasharray"},tf={offset:"strokeDashoffset",array:"strokeDasharray"};function sf(t,s,r=1,n=0,a=!0){t.pathLength=1;const i=a?ef:tf;t[i.offset]=_.transform(-n);const o=_.transform(s),c=_.transform(r);t[i.array]=`${o} ${c}`}function bl(t,{attrX:s,attrY:r,attrScale:n,pathLength:a,pathSpacing:i=1,pathOffset:o=0,...c},d,l,u){if(Ra(t,c,l),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:m}=t;h.transform&&(m.transform=h.transform,delete h.transform),(m.transform||h.transformOrigin)&&(m.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),m.transform&&(m.transformBox=u?.transformBox??"fill-box",delete h.transformBox),s!==void 0&&(h.x=s),r!==void 0&&(h.y=r),n!==void 0&&(h.scale=n),a!==void 0&&sf(h,a,i,o,!1)}const jl=()=>({...Ma(),attrs:{}}),vl=t=>typeof t=="string"&&t.toLowerCase()==="svg";function rf(t,s,r,n){const a=x.useMemo(()=>{const i=jl();return bl(i,s,vl(n),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[s]);if(t.style){const i={};yl(i,t.style,t),a.style={...i,...a.style}}return a}const nf=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Oa(t){return typeof t!="string"||t.includes("-")?!1:!!(nf.indexOf(t)>-1||/[A-Z]/u.test(t))}function af(t,s,r,{latestValues:n},a,i=!1){const c=(Oa(t)?rf:Qp)(s,n,a,t),d=Wp(s,typeof t=="string",i),l=t!==x.Fragment?{...d,...c,ref:r}:{},{children:u}=s,h=x.useMemo(()=>me(u)?u.get():u,[u]);return x.createElement(t,{...l,children:h})}function Di(t){const s=[{},{}];return t?.values.forEach((r,n)=>{s[0][n]=r.get(),s[1][n]=r.getVelocity()}),s}function Fa(t,s,r,n){if(typeof s=="function"){const[a,i]=Di(n);s=s(r!==void 0?r:t.custom,a,i)}if(typeof s=="string"&&(s=t.variants&&t.variants[s]),typeof s=="function"){const[a,i]=Di(n);s=s(r!==void 0?r:t.custom,a,i)}return s}function Ks(t){return me(t)?t.get():t}function of({scrapeMotionValuesFromProps:t,createRenderState:s},r,n,a){return{latestValues:cf(r,n,a,t),renderState:s()}}function cf(t,s,r,n){const a={},i=n(t,{});for(const m in i)a[m]=Ks(i[m]);let{initial:o,animate:c}=t;const d=br(t),l=xl(t);s&&l&&!d&&t.inherit!==!1&&(o===void 0&&(o=s.initial),c===void 0&&(c=s.animate));let u=r?r.initial===!1:!1;u=u||o===!1;const h=u?c:o;if(h&&typeof h!="boolean"&&!yr(h)){const m=Array.isArray(h)?h:[h];for(let g=0;g<m.length;g++){const f=Fa(t,m[g]);if(f){const{transitionEnd:y,transition:b,...C}=f;for(const T in C){let S=C[T];if(Array.isArray(S)){const N=u?S.length-1:0;S=S[N]}S!==null&&(a[T]=S)}for(const T in y)a[T]=y[T]}}}return a}const Nl=t=>(s,r)=>{const n=x.useContext(gr),a=x.useContext(xr),i=()=>of(t,s,n,a);return r?i():oa(i)};function La(t,s,r){const{style:n}=t,a={};for(const i in n)(me(n[i])||s.style&&me(s.style[i])||gl(i,t)||r?.getValue(i)?.liveStyle!==void 0)&&(a[i]=n[i]);return a}const lf=Nl({scrapeMotionValuesFromProps:La,createRenderState:Ma});function wl(t,s,r){const n=La(t,s,r);for(const a in t)if(me(t[a])||me(s[a])){const i=Ut.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;n[i]=t[a]}return n}const df=Nl({scrapeMotionValuesFromProps:wl,createRenderState:jl}),uf=Symbol.for("motionComponentSymbol");function Dt(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function hf(t,s,r){return x.useCallback(n=>{n&&t.onMount&&t.onMount(n),s&&(n?s.mount(n):s.unmount()),r&&(typeof r=="function"?r(n):Dt(r)&&(r.current=n))},[s])}const _a=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),mf="framerAppearId",Sl="data-"+_a(mf),Cl=x.createContext({});function pf(t,s,r,n,a){const{visualElement:i}=x.useContext(gr),o=x.useContext(pl),c=x.useContext(xr),d=x.useContext(Da).reducedMotion,l=x.useRef(null);n=n||o.renderer,!l.current&&n&&(l.current=n(t,{visualState:s,parent:i,props:r,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const u=l.current,h=x.useContext(Cl);u&&!u.projection&&a&&(u.type==="html"||u.type==="svg")&&ff(l.current,r,a,h);const m=x.useRef(!1);x.useInsertionEffect(()=>{u&&m.current&&u.update(r,c)});const g=r[Sl],f=x.useRef(!!g&&!window.MotionHandoffIsComplete?.(g)&&window.MotionHasOptimisedAnimation?.(g));return Nc(()=>{u&&(m.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),f.current&&u.animationState&&u.animationState.animateChanges())}),x.useEffect(()=>{u&&(!f.current&&u.animationState&&u.animationState.animateChanges(),f.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(g)}),f.current=!1),u.enteringChildren=void 0)}),u}function ff(t,s,r,n){const{layoutId:a,layout:i,drag:o,dragConstraints:c,layoutScroll:d,layoutRoot:l,layoutCrossfade:u}=s;t.projection=new r(t.latestValues,s["data-framer-portal-id"]?void 0:kl(t.parent)),t.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!o||c&&Dt(c),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,crossfade:u,layoutScroll:d,layoutRoot:l})}function kl(t){if(t)return t.options.allowProjection!==!1?t.projection:kl(t.parent)}function _r(t,{forwardMotionProps:s=!1}={},r,n){r&&Bp(r);const a=Oa(t)?df:lf;function i(c,d){let l;const u={...x.useContext(Da),...c,layoutId:xf(c)},{isStatic:h}=u,m=qp(c),g=a(c,h);if(!h&&ca){gf();const f=yf(u);l=f.MeasureLayout,m.visualElement=pf(t,g,u,n,f.ProjectionNode)}return e.jsxs(gr.Provider,{value:m,children:[l&&m.visualElement?e.jsx(l,{visualElement:m.visualElement,...u}):null,af(t,c,hf(g,m.visualElement,d),g,h,s)]})}i.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=x.forwardRef(i);return o[uf]=t,o}function xf({layoutId:t}){const s=x.useContext(ia).id;return s&&t!==void 0?s+"-"+t:t}function gf(t,s){x.useContext(pl).strict}function yf(t){const{drag:s,layout:r}=Vt;if(!s&&!r)return{};const n={...s,...r};return{MeasureLayout:s?.isEnabled(t)||r?.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function bf(t,s){if(typeof Proxy>"u")return _r;const r=new Map,n=(i,o)=>_r(i,o,t,s),a=(i,o)=>n(i,o);return new Proxy(a,{get:(i,o)=>o==="create"?n:(r.has(o)||r.set(o,_r(o,void 0,t,s)),r.get(o))})}function Tl({top:t,left:s,right:r,bottom:n}){return{x:{min:s,max:r},y:{min:t,max:n}}}function jf({x:t,y:s}){return{top:s.min,right:t.max,bottom:s.max,left:t.min}}function vf(t,s){if(!s)return t;const r=s({x:t.left,y:t.top}),n=s({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function zr(t){return t===void 0||t===1}function Pn({scale:t,scaleX:s,scaleY:r}){return!zr(t)||!zr(s)||!zr(r)}function ct(t){return Pn(t)||Al(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Al(t){return Pi(t.x)||Pi(t.y)}function Pi(t){return t&&t!=="0%"}function nr(t,s,r){const n=t-r,a=s*n;return r+a}function Ii(t,s,r,n,a){return a!==void 0&&(t=nr(t,a,n)),nr(t,r,n)+s}function In(t,s=0,r=1,n,a){t.min=Ii(t.min,s,r,n,a),t.max=Ii(t.max,s,r,n,a)}function El(t,{x:s,y:r}){In(t.x,s.translate,s.scale,s.originPoint),In(t.y,r.translate,r.scale,r.originPoint)}const Ri=.999999999999,Mi=1.0000000000001;function Nf(t,s,r,n=!1){const a=r.length;if(!a)return;s.x=s.y=1;let i,o;for(let c=0;c<a;c++){i=r[c],o=i.projectionDelta;const{visualElement:d}=i.options;d&&d.props.style&&d.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&It(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(s.x*=o.x.scale,s.y*=o.y.scale,El(t,o)),n&&ct(i.latestValues)&&It(t,i.latestValues))}s.x<Mi&&s.x>Ri&&(s.x=1),s.y<Mi&&s.y>Ri&&(s.y=1)}function Pt(t,s){t.min=t.min+s,t.max=t.max+s}function Oi(t,s,r,n,a=.5){const i=Z(t.min,t.max,a);In(t,s,r,i,n)}function It(t,s){Oi(t.x,s.x,s.scaleX,s.scale,s.originX),Oi(t.y,s.y,s.scaleY,s.scale,s.originY)}function Dl(t,s){return Tl(vf(t.getBoundingClientRect(),s))}function wf(t,s,r){const n=Dl(t,r),{scroll:a}=s;return a&&(Pt(n.x,a.offset.x),Pt(n.y,a.offset.y)),n}const Fi=()=>({translate:0,scale:1,origin:0,originPoint:0}),Rt=()=>({x:Fi(),y:Fi()}),Li=()=>({min:0,max:0}),ne=()=>({x:Li(),y:Li()}),Rn={current:null},Pl={current:!1};function Sf(){if(Pl.current=!0,!!ca)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),s=()=>Rn.current=t.matches;t.addEventListener("change",s),s()}else Rn.current=!1}const Cf=new WeakMap;function kf(t,s,r){for(const n in s){const a=s[n],i=r[n];if(me(a))t.addValue(n,a);else if(me(i))t.addValue(n,zt(a,{owner:t}));else if(i!==a)if(t.hasValue(n)){const o=t.getValue(n);o.liveStyle===!0?o.jump(a):o.hasAnimated||o.set(a)}else{const o=t.getStaticValue(n);t.addValue(n,zt(o!==void 0?o:a,{owner:t}))}}for(const n in r)s[n]===void 0&&t.removeValue(n);return s}const _i=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Tf{scrapeMotionValuesFromProps(s,r,n){return{}}constructor({parent:s,props:r,presenceContext:n,reducedMotionConfig:a,blockInitialAnimation:i,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ca,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=ge.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,J.render(this.render,!1,!0))};const{latestValues:d,renderState:l}=o;this.latestValues=d,this.baseTarget={...d},this.initialValues=r.initial?{...d}:{},this.renderState=l,this.parent=s,this.props=r,this.presenceContext=n,this.depth=s?s.depth+1:0,this.reducedMotionConfig=a,this.options=c,this.blockInitialAnimation=!!i,this.isControllingVariants=br(r),this.isVariantNode=xl(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(s&&s.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(r,{},this);for(const m in h){const g=h[m];d[m]!==void 0&&me(g)&&g.set(d[m])}}mount(s){this.current=s,Cf.set(s,this),this.projection&&!this.projection.instance&&this.projection.mount(s),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),Pl.current||Sf(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Rn.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),st(this.notifyUpdate),st(this.render),this.valueSubscriptions.forEach(s=>s()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const s in this.events)this.events[s].clear();for(const s in this.features){const r=this.features[s];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(s){this.children.add(s),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(s)}removeChild(s){this.children.delete(s),this.enteringChildren&&this.enteringChildren.delete(s)}bindToMotionValue(s,r){this.valueSubscriptions.has(s)&&this.valueSubscriptions.get(s)();const n=Wt.has(s);n&&this.onBindTransform&&this.onBindTransform();const a=r.on("change",o=>{this.latestValues[s]=o,this.props.onUpdate&&J.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,s,r)),this.valueSubscriptions.set(s,()=>{a(),i&&i(),r.owner&&r.stop()})}sortNodePosition(s){return!this.current||!this.sortInstanceNodePosition||this.type!==s.type?0:this.sortInstanceNodePosition(this.current,s.current)}updateFeatures(){let s="animation";for(s in Vt){const r=Vt[s];if(!r)continue;const{isEnabled:n,Feature:a}=r;if(!this.features[s]&&a&&n(this.props)&&(this.features[s]=new a(this)),this.features[s]){const i=this.features[s];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ne()}getStaticValue(s){return this.latestValues[s]}setStaticValue(s,r){this.latestValues[s]=r}update(s,r){(s.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=s,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<_i.length;n++){const a=_i[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,o=s[i];o&&(this.propEventSubscriptions[a]=this.on(a,o))}this.prevMotionValues=kf(this,this.scrapeMotionValuesFromProps(s,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(s){return this.props.variants?this.props.variants[s]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(s){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(s),()=>r.variantChildren.delete(s)}addValue(s,r){const n=this.values.get(s);r!==n&&(n&&this.removeValue(s),this.bindToMotionValue(s,r),this.values.set(s,r),this.latestValues[s]=r.get())}removeValue(s){this.values.delete(s);const r=this.valueSubscriptions.get(s);r&&(r(),this.valueSubscriptions.delete(s)),delete this.latestValues[s],this.removeValueFromRenderState(s,this.renderState)}hasValue(s){return this.values.has(s)}getValue(s,r){if(this.props.values&&this.props.values[s])return this.props.values[s];let n=this.values.get(s);return n===void 0&&r!==void 0&&(n=zt(r===null?void 0:r,{owner:this}),this.addValue(s,n)),n}readValue(s,r){let n=this.latestValues[s]!==void 0||!this.current?this.latestValues[s]:this.getBaseTargetFromProps(this.props,s)??this.readValueFromInstance(this.current,s,this.options);return n!=null&&(typeof n=="string"&&(wc(n)||Cc(n))?n=parseFloat(n):!Mp(n)&&rt.test(r)&&(n=il(s,r)),this.setBaseTarget(s,me(n)?n.get():n)),me(n)?n.get():n}setBaseTarget(s,r){this.baseTarget[s]=r}getBaseTarget(s){const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const i=Fa(this.props,r,this.presenceContext?.custom);i&&(n=i[s])}if(r&&n!==void 0)return n;const a=this.getBaseTargetFromProps(this.props,s);return a!==void 0&&!me(a)?a:this.initialValues[s]!==void 0&&n===void 0?void 0:this.baseTarget[s]}on(s,r){return this.events[s]||(this.events[s]=new ma),this.events[s].add(r)}notify(s,...r){this.events[s]&&this.events[s].notify(...r)}scheduleRenderMicrotask(){Aa.render(this.render)}}class Il extends Tf{constructor(){super(...arguments),this.KeyframeResolver=Np}sortInstanceNodePosition(s,r){return s.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(s,r){return s.style?s.style[r]:void 0}removeValueFromRenderState(s,{vars:r,style:n}){delete r[s],delete n[s]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:s}=this.props;me(s)&&(this.childSubscription=s.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function Rl(t,{style:s,vars:r},n,a){const i=t.style;let o;for(o in s)i[o]=s[o];a?.applyProjectionStyles(i,n);for(o in r)i.setProperty(o,r[o])}function Af(t){return window.getComputedStyle(t)}class Ef extends Il{constructor(){super(...arguments),this.type="html",this.renderInstance=Rl}readValueFromInstance(s,r){if(Wt.has(r))return this.projection?.isProjecting?Sn(r):Bm(s,r);{const n=Af(s),a=(xa(r)?n.getPropertyValue(r):n[r])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(s,{transformPagePoint:r}){return Dl(s,r)}build(s,r,n){Ra(s,r,n.transformTemplate)}scrapeMotionValuesFromProps(s,r,n){return La(s,r,n)}}const Ml=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Df(t,s,r,n){Rl(t,s,void 0,n);for(const a in s.attrs)t.setAttribute(Ml.has(a)?a:_a(a),s.attrs[a])}class Pf extends Il{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ne}getBaseTargetFromProps(s,r){return s[r]}readValueFromInstance(s,r){if(Wt.has(r)){const n=al(r);return n&&n.default||0}return r=Ml.has(r)?r:_a(r),s.getAttribute(r)}scrapeMotionValuesFromProps(s,r,n){return wl(s,r,n)}build(s,r,n){bl(s,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(s,r,n,a){Df(s,r,n,a)}mount(s){this.isSVGTag=vl(s.tagName),super.mount(s)}}const If=(t,s)=>Oa(t)?new Pf(s):new Ef(s,{allowProjection:t!==x.Fragment});function Mt(t,s,r){const n=t.getProps();return Fa(n,s,r!==void 0?r:n.custom,t)}const Mn=t=>Array.isArray(t);function Rf(t,s,r){t.hasValue(s)?t.getValue(s).set(r):t.addValue(s,zt(r))}function Mf(t){return Mn(t)?t[t.length-1]||0:t}function Of(t,s){const r=Mt(t,s);let{transitionEnd:n={},transition:a={},...i}=r||{};i={...i,...n};for(const o in i){const c=Mf(i[o]);Rf(t,o,c)}}function Ff(t){return!!(me(t)&&t.add)}function On(t,s){const r=t.getValue("willChange");if(Ff(r))return r.add(s);if(!r&&Ke.WillChange){const n=new Ke.WillChange("auto");t.addValue("willChange",n),n.add(s)}}function Ol(t){return t.props[Sl]}const Lf=t=>t!==null;function _f(t,{repeat:s,repeatType:r="loop"},n){const a=t.filter(Lf),i=s&&r!=="loop"&&s%2===1?0:a.length-1;return a[i]}const zf={type:"spring",stiffness:500,damping:25,restSpeed:10},Vf=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Bf={type:"keyframes",duration:.8},$f={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Uf=(t,{keyframes:s})=>s.length>2?Bf:Wt.has(t)?t.startsWith("scale")?Vf(s[1]):zf:$f;function Wf({when:t,delay:s,delayChildren:r,staggerChildren:n,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:c,from:d,elapsed:l,...u}){return!!Object.keys(u).length}const za=(t,s,r,n={},a,i)=>o=>{const c=ka(n,t)||{},d=c.delay||n.delay||0;let{elapsed:l=0}=n;l=l-Oe(d);const u={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:s.getVelocity(),...c,delay:-l,onUpdate:m=>{s.set(m),c.onUpdate&&c.onUpdate(m)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:t,motionValue:s,element:i?void 0:a};Wf(c)||Object.assign(u,Uf(t,u)),u.duration&&(u.duration=Oe(u.duration)),u.repeatDelay&&(u.repeatDelay=Oe(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(En(u),u.delay===0&&(h=!0)),(Ke.instantAnimations||Ke.skipAnimations)&&(h=!0,En(u),u.delay=0),u.allowFlatten=!c.type&&!c.ease,h&&!i&&s.get()!==void 0){const m=_f(u.keyframes,c);if(m!==void 0){J.update(()=>{u.onUpdate(m),u.onComplete()});return}}return c.isSync?new Sa(u):new dp(u)};function Hf({protectedKeys:t,needsAnimating:s},r){const n=t.hasOwnProperty(r)&&s[r]!==!0;return s[r]=!1,n}function Fl(t,s,{delay:r=0,transitionOverride:n,type:a}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...c}=s;n&&(i=n);const d=[],l=a&&t.animationState&&t.animationState.getState()[a];for(const u in c){const h=t.getValue(u,t.latestValues[u]??null),m=c[u];if(m===void 0||l&&Hf(l,u))continue;const g={delay:r,...ka(i||{},u)},f=h.get();if(f!==void 0&&!h.isAnimating&&!Array.isArray(m)&&m===f&&!g.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const C=Ol(t);if(C){const T=window.MotionHandoffAnimation(C,u,J);T!==null&&(g.startTime=T,y=!0)}}On(t,u),h.start(za(u,h,m,t.shouldReduceMotion&&sl.has(u)?{type:!1}:g,t,y));const b=h.animation;b&&d.push(b)}return o&&Promise.all(d).then(()=>{J.update(()=>{o&&Of(t,o)})}),d}function Ll(t,s,r,n=0,a=1){const i=Array.from(t).sort((l,u)=>l.sortNodePosition(u)).indexOf(s),o=t.size,c=(o-1)*n;return typeof r=="function"?r(i,o):a===1?i*n:c-i*n}function Fn(t,s,r={}){const n=Mt(t,s,r.type==="exit"?t.presenceContext?.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(a=r.transitionOverride);const i=n?()=>Promise.all(Fl(t,n,r)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:l=0,staggerChildren:u,staggerDirection:h}=a;return qf(t,s,d,l,u,h,r)}:()=>Promise.resolve(),{when:c}=a;if(c){const[d,l]=c==="beforeChildren"?[i,o]:[o,i];return d().then(()=>l())}else return Promise.all([i(),o(r.delay)])}function qf(t,s,r=0,n=0,a=0,i=1,o){const c=[];for(const d of t.variantChildren)d.notify("AnimationStart",s),c.push(Fn(d,s,{...o,delay:r+(typeof n=="function"?0:n)+Ll(t.variantChildren,d,n,a,i)}).then(()=>d.notify("AnimationComplete",s)));return Promise.all(c)}function Kf(t,s,r={}){t.notify("AnimationStart",s);let n;if(Array.isArray(s)){const a=s.map(i=>Fn(t,i,r));n=Promise.all(a)}else if(typeof s=="string")n=Fn(t,s,r);else{const a=typeof s=="function"?Mt(t,s,r.custom):s;n=Promise.all(Fl(t,a,r))}return n.then(()=>{t.notify("AnimationComplete",s)})}function _l(t,s){if(!Array.isArray(s))return!1;const r=s.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(s[n]!==t[n])return!1;return!0}const Gf=Ia.length;function zl(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?zl(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const s={};for(let r=0;r<Gf;r++){const n=Ia[r],a=t.props[n];(fs(a)||a===!1)&&(s[n]=a)}return s}const Jf=[...Pa].reverse(),Yf=Pa.length;function Xf(t){return s=>Promise.all(s.map(({animation:r,options:n})=>Kf(t,r,n)))}function Zf(t){let s=Xf(t),r=zi(),n=!0;const a=d=>(l,u)=>{const h=Mt(t,u,d==="exit"?t.presenceContext?.custom:void 0);if(h){const{transition:m,transitionEnd:g,...f}=h;l={...l,...f,...g}}return l};function i(d){s=d(t)}function o(d){const{props:l}=t,u=zl(t.parent)||{},h=[],m=new Set;let g={},f=1/0;for(let b=0;b<Yf;b++){const C=Jf[b],T=r[C],S=l[C]!==void 0?l[C]:u[C],N=fs(S),j=C===d?T.isActive:null;j===!1&&(f=b);let v=S===u[C]&&S!==l[C]&&N;if(v&&n&&t.manuallyAnimateOnMount&&(v=!1),T.protectedKeys={...g},!T.isActive&&j===null||!S&&!T.prevProp||yr(S)||typeof S=="boolean")continue;const p=Qf(T.prevProp,S);let w=p||C===d&&T.isActive&&!v&&N||b>f&&N,P=!1;const A=Array.isArray(S)?S:[S];let M=A.reduce(a(C),{});j===!1&&(M={});const{prevResolvedValues:V={}}=T,q={...V,...M},I=E=>{w=!0,m.has(E)&&(P=!0,m.delete(E)),T.needsAnimating[E]=!0;const F=t.getValue(E);F&&(F.liveStyle=!1)};for(const E in q){const F=M[E],H=V[E];if(g.hasOwnProperty(E))continue;let Q=!1;Mn(F)&&Mn(H)?Q=!_l(F,H):Q=F!==H,Q?F!=null?I(E):m.add(E):F!==void 0&&m.has(E)?I(E):T.protectedKeys[E]=!0}T.prevProp=S,T.prevResolvedValues=M,T.isActive&&(g={...g,...M}),n&&t.blockInitialAnimation&&(w=!1);const O=v&&p;w&&(!O||P)&&h.push(...A.map(E=>{const F={type:C};if(typeof E=="string"&&n&&!O&&t.manuallyAnimateOnMount&&t.parent){const{parent:H}=t,Q=Mt(H,E);if(H.enteringChildren&&Q){const{delayChildren:Y}=Q.transition||{};F.delay=Ll(H.enteringChildren,t,Y)}}return{animation:E,options:F}}))}if(m.size){const b={};if(typeof l.initial!="boolean"){const C=Mt(t,Array.isArray(l.initial)?l.initial[0]:l.initial);C&&C.transition&&(b.transition=C.transition)}m.forEach(C=>{const T=t.getBaseTarget(C),S=t.getValue(C);S&&(S.liveStyle=!0),b[C]=T??null}),h.push({animation:b})}let y=!!h.length;return n&&(l.initial===!1||l.initial===l.animate)&&!t.manuallyAnimateOnMount&&(y=!1),n=!1,y?s(h):Promise.resolve()}function c(d,l){if(r[d].isActive===l)return Promise.resolve();t.variantChildren?.forEach(h=>h.animationState?.setActive(d,l)),r[d].isActive=l;const u=o(d);for(const h in r)r[h].protectedKeys={};return u}return{animateChanges:o,setActive:c,setAnimateFunction:i,getState:()=>r,reset:()=>{r=zi(),n=!0}}}function Qf(t,s){return typeof s=="string"?s!==t:Array.isArray(s)?!_l(s,t):!1}function ot(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function zi(){return{animate:ot(!0),whileInView:ot(),whileHover:ot(),whileTap:ot(),whileDrag:ot(),whileFocus:ot(),exit:ot()}}class it{constructor(s){this.isMounted=!1,this.node=s}update(){}}class ex extends it{constructor(s){super(s),s.animationState||(s.animationState=Zf(s))}updateAnimationControlsSubscription(){const{animate:s}=this.node.getProps();yr(s)&&(this.unmountControls=s.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:s}=this.node.getProps(),{animate:r}=this.node.prevProps||{};s!==r&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let tx=0;class sx extends it{constructor(){super(...arguments),this.id=tx++}update(){if(!this.node.presenceContext)return;const{isPresent:s,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||s===n)return;const a=this.node.animationState.setActive("exit",!s);r&&!s&&a.then(()=>{r(this.id)})}mount(){const{register:s,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),s&&(this.unmount=s(this.id))}unmount(){}}const rx={animation:{Feature:ex},exit:{Feature:sx}};function gs(t,s,r,n={passive:!0}){return t.addEventListener(s,r,n),()=>t.removeEventListener(s,r)}function As(t){return{point:{x:t.pageX,y:t.pageY}}}const nx=t=>s=>Ea(s)&&t(s,As(s));function as(t,s,r,n){return gs(t,s,nx(r),n)}const Vl=1e-4,ax=1-Vl,ix=1+Vl,Bl=.01,ox=0-Bl,cx=0+Bl;function pe(t){return t.max-t.min}function lx(t,s,r){return Math.abs(t-s)<=r}function Vi(t,s,r,n=.5){t.origin=n,t.originPoint=Z(s.min,s.max,t.origin),t.scale=pe(r)/pe(s),t.translate=Z(r.min,r.max,t.origin)-t.originPoint,(t.scale>=ax&&t.scale<=ix||isNaN(t.scale))&&(t.scale=1),(t.translate>=ox&&t.translate<=cx||isNaN(t.translate))&&(t.translate=0)}function is(t,s,r,n){Vi(t.x,s.x,r.x,n?n.originX:void 0),Vi(t.y,s.y,r.y,n?n.originY:void 0)}function Bi(t,s,r){t.min=r.min+s.min,t.max=t.min+pe(s)}function dx(t,s,r){Bi(t.x,s.x,r.x),Bi(t.y,s.y,r.y)}function $i(t,s,r){t.min=s.min-r.min,t.max=t.min+pe(s)}function os(t,s,r){$i(t.x,s.x,r.x),$i(t.y,s.y,r.y)}function we(t){return[t("x"),t("y")]}const $l=({current:t})=>t?t.ownerDocument.defaultView:null,Ui=(t,s)=>Math.abs(t-s);function ux(t,s){const r=Ui(t.x,s.x),n=Ui(t.y,s.y);return Math.sqrt(r**2+n**2)}class Ul{constructor(s,r,{transformPagePoint:n,contextWindow:a=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Br(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,f=ux(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!f)return;const{point:y}=m,{timestamp:b}=ce;this.history.push({...y,timestamp:b});const{onStart:C,onMove:T}=this.handlers;g||(C&&C(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,m)},this.handlePointerMove=(m,g)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Vr(g,this.transformPagePoint),J.update(this.updatePoint,!0)},this.handlePointerUp=(m,g)=>{this.end();const{onEnd:f,onSessionEnd:y,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=Br(m.type==="pointercancel"?this.lastMoveEventInfo:Vr(g,this.transformPagePoint),this.history);this.startEvent&&f&&f(m,C),y&&y(m,C)},!Ea(s))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=a||window;const c=As(s),d=Vr(c,this.transformPagePoint),{point:l}=d,{timestamp:u}=ce;this.history=[{...l,timestamp:u}];const{onSessionStart:h}=r;h&&h(s,Br(d,this.history)),this.removeListeners=Cs(as(this.contextWindow,"pointermove",this.handlePointerMove),as(this.contextWindow,"pointerup",this.handlePointerUp),as(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(s){this.handlers=s}end(){this.removeListeners&&this.removeListeners(),st(this.updatePoint)}}function Vr(t,s){return s?{point:s(t.point)}:t}function Wi(t,s){return{x:t.x-s.x,y:t.y-s.y}}function Br({point:t},s){return{point:t,delta:Wi(t,Wl(s)),offset:Wi(t,hx(s)),velocity:mx(s,.1)}}function hx(t){return t[0]}function Wl(t){return t[t.length-1]}function mx(t,s){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const a=Wl(t);for(;r>=0&&(n=t[r],!(a.timestamp-n.timestamp>Oe(s)));)r--;if(!n)return{x:0,y:0};const i=Fe(a.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(a.x-n.x)/i,y:(a.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function px(t,{min:s,max:r},n){return s!==void 0&&t<s?t=n?Z(s,t,n.min):Math.max(t,s):r!==void 0&&t>r&&(t=n?Z(r,t,n.max):Math.min(t,r)),t}function Hi(t,s,r){return{min:s!==void 0?t.min+s:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function fx(t,{top:s,left:r,bottom:n,right:a}){return{x:Hi(t.x,r,a),y:Hi(t.y,s,n)}}function qi(t,s){let r=s.min-t.min,n=s.max-t.max;return s.max-s.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function xx(t,s){return{x:qi(t.x,s.x),y:qi(t.y,s.y)}}function gx(t,s){let r=.5;const n=pe(t),a=pe(s);return a>n?r=us(s.min,s.max-n,t.min):n>a&&(r=us(t.min,t.max-a,s.min)),qe(0,1,r)}function yx(t,s){const r={};return s.min!==void 0&&(r.min=s.min-t.min),s.max!==void 0&&(r.max=s.max-t.min),r}const Ln=.35;function bx(t=Ln){return t===!1?t=0:t===!0&&(t=Ln),{x:Ki(t,"left","right"),y:Ki(t,"top","bottom")}}function Ki(t,s,r){return{min:Gi(t,s),max:Gi(t,r)}}function Gi(t,s){return typeof t=="number"?t:t[s]||0}const jx=new WeakMap;class vx{constructor(s){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ne(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=s}start(s,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(As(h).point)},o=(h,m)=>{const{drag:g,dragPropagation:f,onDragStart:y}=this.getProps();if(g&&!f&&(this.openDragLock&&this.openDragLock(),this.openDragLock=kp(g),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),we(C=>{let T=this.getAxisMotionValue(C).get()||0;if(Le.test(T)){const{projection:S}=this.visualElement;if(S&&S.layout){const N=S.layout.layoutBox[C];N&&(T=pe(N)*(parseFloat(T)/100))}}this.originPoint[C]=T}),y&&J.postRender(()=>y(h,m)),On(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},c=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m;const{dragPropagation:g,dragDirectionLock:f,onDirectionLock:y,onDrag:b}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:C}=m;if(f&&this.currentDirection===null){this.currentDirection=Nx(C),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",m.point,C),this.updateAxis("y",m.point,C),this.visualElement.render(),b&&b(h,m)},d=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m,this.stop(h,m),this.latestPointerEvent=null,this.latestPanInfo=null},l=()=>we(h=>this.getAnimationState(h)==="paused"&&this.getAxisMotionValue(h).animation?.play()),{dragSnapToOrigin:u}=this.getProps();this.panSession=new Ul(s,{onSessionStart:i,onStart:o,onMove:c,onSessionEnd:d,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:n,contextWindow:$l(this.visualElement)})}stop(s,r){const n=s||this.latestPointerEvent,a=r||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!a||!n)return;const{velocity:o}=a;this.startAnimation(o);const{onDragEnd:c}=this.getProps();c&&J.postRender(()=>c(n,a))}cancel(){this.isDragging=!1;const{projection:s,animationState:r}=this.visualElement;s&&(s.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(s,r,n){const{drag:a}=this.getProps();if(!n||!Vs(s,a,this.currentDirection))return;const i=this.getAxisMotionValue(s);let o=this.originPoint[s]+n[s];this.constraints&&this.constraints[s]&&(o=px(o,this.constraints[s],this.elastic[s])),i.set(o)}resolveConstraints(){const{dragConstraints:s,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,a=this.constraints;s&&Dt(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&n?this.constraints=fx(n.layoutBox,s):this.constraints=!1,this.elastic=bx(r),a!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&we(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=yx(n.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:s,onMeasureDragConstraints:r}=this.getProps();if(!s||!Dt(s))return!1;const n=s.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=wf(n,a.root,this.visualElement.getTransformPagePoint());let o=xx(a.layout.layoutBox,i);if(r){const c=r(jf(o));this.hasMutatedConstraints=!!c,c&&(o=Tl(c))}return o}startAnimation(s){const{drag:r,dragMomentum:n,dragElastic:a,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},l=we(u=>{if(!Vs(u,r,this.currentDirection))return;let h=d&&d[u]||{};o&&(h={min:0,max:0});const m=a?200:1e6,g=a?40:1e7,f={type:"inertia",velocity:n?s[u]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(u,f)});return Promise.all(l).then(c)}startAxisValueAnimation(s,r){const n=this.getAxisMotionValue(s);return On(this.visualElement,s),n.start(za(s,n,0,r,this.visualElement,!1))}stopAnimation(){we(s=>this.getAxisMotionValue(s).stop())}pauseAnimation(){we(s=>this.getAxisMotionValue(s).animation?.pause())}getAnimationState(s){return this.getAxisMotionValue(s).animation?.state}getAxisMotionValue(s){const r=`_drag${s.toUpperCase()}`,n=this.visualElement.getProps(),a=n[r];return a||this.visualElement.getValue(s,(n.initial?n.initial[s]:void 0)||0)}snapToCursor(s){we(r=>{const{drag:n}=this.getProps();if(!Vs(r,n,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(r);if(a&&a.layout){const{min:o,max:c}=a.layout.layoutBox[r];i.set(s[r]-Z(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:s,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Dt(r)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};we(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const d=c.get();a[o]=gx({min:d,max:d},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),we(o=>{if(!Vs(o,s,null))return;const c=this.getAxisMotionValue(o),{min:d,max:l}=this.constraints[o];c.set(Z(d,l,a[o]))})}addListeners(){if(!this.visualElement.current)return;jx.set(this.visualElement,this);const s=this.visualElement.current,r=as(s,"pointerdown",d=>{const{drag:l,dragListener:u=!0}=this.getProps();l&&u&&this.start(d)}),n=()=>{const{dragConstraints:d}=this.getProps();Dt(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),J.read(n);const o=gs(window,"resize",()=>this.scalePositionWithinConstraints()),c=a.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:l})=>{this.isDragging&&l&&(we(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=d[u].translate,h.set(h.get()+d[u].translate))}),this.visualElement.render())}));return()=>{o(),r(),i(),c&&c()}}getProps(){const s=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:o=Ln,dragMomentum:c=!0}=s;return{...s,drag:r,dragDirectionLock:n,dragPropagation:a,dragConstraints:i,dragElastic:o,dragMomentum:c}}}function Vs(t,s,r){return(s===!0||s===t)&&(r===null||r===t)}function Nx(t,s=10){let r=null;return Math.abs(t.y)>s?r="y":Math.abs(t.x)>s&&(r="x"),r}class wx extends it{constructor(s){super(s),this.removeGroupControls=Se,this.removeListeners=Se,this.controls=new vx(s)}mount(){const{dragControls:s}=this.node.getProps();s&&(this.removeGroupControls=s.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Se}unmount(){this.removeGroupControls(),this.removeListeners()}}const Ji=t=>(s,r)=>{t&&J.postRender(()=>t(s,r))};class Sx extends it{constructor(){super(...arguments),this.removePointerDownListener=Se}onPointerDown(s){this.session=new Ul(s,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:$l(this.node)})}createPanHandlers(){const{onPanSessionStart:s,onPanStart:r,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:Ji(s),onStart:Ji(r),onMove:n,onEnd:(i,o)=>{delete this.session,a&&J.postRender(()=>a(i,o))}}}mount(){this.removePointerDownListener=as(this.node.current,"pointerdown",s=>this.onPointerDown(s))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Gs={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Yi(t,s){return s.max===s.min?0:t/(s.max-s.min)*100}const Xt={correct:(t,s)=>{if(!s.target)return t;if(typeof t=="string")if(_.test(t))t=parseFloat(t);else return t;const r=Yi(t,s.target.x),n=Yi(t,s.target.y);return`${r}% ${n}%`}},Cx={correct:(t,{treeScale:s,projectionDelta:r})=>{const n=t,a=rt.parse(t);if(a.length>5)return n;const i=rt.createTransformer(t),o=typeof a[0]!="number"?1:0,c=r.x.scale*s.x,d=r.y.scale*s.y;a[0+o]/=c,a[1+o]/=d;const l=Z(c,d,.5);return typeof a[2+o]=="number"&&(a[2+o]/=l),typeof a[3+o]=="number"&&(a[3+o]/=l),i(a)}};let $r=!1;class kx extends x.Component{componentDidMount(){const{visualElement:s,layoutGroup:r,switchLayoutGroup:n,layoutId:a}=this.props,{projection:i}=s;Kp(Tx),i&&(r.group&&r.group.add(i),n&&n.register&&a&&n.register(i),$r&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Gs.hasEverUpdated=!0}getSnapshotBeforeUpdate(s){const{layoutDependency:r,visualElement:n,drag:a,isPresent:i}=this.props,{projection:o}=n;return o&&(o.isPresent=i,$r=!0,a||s.layoutDependency!==r||r===void 0||s.isPresent!==i?o.willUpdate():this.safeToRemove(),s.isPresent!==i&&(i?o.promote():o.relegate()||J.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:s}=this.props.visualElement;s&&(s.root.didUpdate(),Aa.postRender(()=>{!s.currentAnimation&&s.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:s,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:a}=s;$r=!0,a&&(a.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:s}=this.props;s&&s()}render(){return null}}function Hl(t){const[s,r]=ml(),n=x.useContext(ia);return e.jsx(kx,{...t,layoutGroup:n,switchLayoutGroup:x.useContext(Cl),isPresent:s,safeToRemove:r})}const Tx={borderRadius:{...Xt,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Xt,borderTopRightRadius:Xt,borderBottomLeftRadius:Xt,borderBottomRightRadius:Xt,boxShadow:Cx};function Ax(t,s,r){const n=me(t)?t:zt(t);return n.start(za("",n,s,r)),n.animation}const Ex=(t,s)=>t.depth-s.depth;class Dx{constructor(){this.children=[],this.isDirty=!1}add(s){la(this.children,s),this.isDirty=!0}remove(s){da(this.children,s),this.isDirty=!0}forEach(s){this.isDirty&&this.children.sort(Ex),this.isDirty=!1,this.children.forEach(s)}}function Px(t,s){const r=ge.now(),n=({timestamp:a})=>{const i=a-r;i>=s&&(st(n),t(i-s))};return J.setup(n,!0),()=>st(n)}const ql=["TopLeft","TopRight","BottomLeft","BottomRight"],Ix=ql.length,Xi=t=>typeof t=="string"?parseFloat(t):t,Zi=t=>typeof t=="number"||_.test(t);function Rx(t,s,r,n,a,i){a?(t.opacity=Z(0,r.opacity??1,Mx(n)),t.opacityExit=Z(s.opacity??1,0,Ox(n))):i&&(t.opacity=Z(s.opacity??1,r.opacity??1,n));for(let o=0;o<Ix;o++){const c=`border${ql[o]}Radius`;let d=Qi(s,c),l=Qi(r,c);if(d===void 0&&l===void 0)continue;d||(d=0),l||(l=0),d===0||l===0||Zi(d)===Zi(l)?(t[c]=Math.max(Z(Xi(d),Xi(l),n),0),(Le.test(l)||Le.test(d))&&(t[c]+="%")):t[c]=l}(s.rotate||r.rotate)&&(t.rotate=Z(s.rotate||0,r.rotate||0,n))}function Qi(t,s){return t[s]!==void 0?t[s]:t.borderRadius}const Mx=Kl(0,.5,Rc),Ox=Kl(.5,.95,Se);function Kl(t,s,r){return n=>n<t?0:n>s?1:r(us(t,s,n))}function eo(t,s){t.min=s.min,t.max=s.max}function Ne(t,s){eo(t.x,s.x),eo(t.y,s.y)}function to(t,s){t.translate=s.translate,t.scale=s.scale,t.originPoint=s.originPoint,t.origin=s.origin}function so(t,s,r,n,a){return t-=s,t=nr(t,1/r,n),a!==void 0&&(t=nr(t,1/a,n)),t}function Fx(t,s=0,r=1,n=.5,a,i=t,o=t){if(Le.test(s)&&(s=parseFloat(s),s=Z(o.min,o.max,s/100)-o.min),typeof s!="number")return;let c=Z(i.min,i.max,n);t===i&&(c-=s),t.min=so(t.min,s,r,c,a),t.max=so(t.max,s,r,c,a)}function ro(t,s,[r,n,a],i,o){Fx(t,s[r],s[n],s[a],s.scale,i,o)}const Lx=["x","scaleX","originX"],_x=["y","scaleY","originY"];function no(t,s,r,n){ro(t.x,s,Lx,r?r.x:void 0,n?n.x:void 0),ro(t.y,s,_x,r?r.y:void 0,n?n.y:void 0)}function ao(t){return t.translate===0&&t.scale===1}function Gl(t){return ao(t.x)&&ao(t.y)}function io(t,s){return t.min===s.min&&t.max===s.max}function zx(t,s){return io(t.x,s.x)&&io(t.y,s.y)}function oo(t,s){return Math.round(t.min)===Math.round(s.min)&&Math.round(t.max)===Math.round(s.max)}function Jl(t,s){return oo(t.x,s.x)&&oo(t.y,s.y)}function co(t){return pe(t.x)/pe(t.y)}function lo(t,s){return t.translate===s.translate&&t.scale===s.scale&&t.originPoint===s.originPoint}class Vx{constructor(){this.members=[]}add(s){la(this.members,s),s.scheduleRender()}remove(s){if(da(this.members,s),s===this.prevLead&&(this.prevLead=void 0),s===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(s){const r=this.members.findIndex(a=>s===a);if(r===0)return!1;let n;for(let a=r;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(s,r){const n=this.lead;if(s!==n&&(this.prevLead=n,this.lead=s,s.show(),n)){n.instance&&n.scheduleRender(),s.scheduleRender(),s.resumeFrom=n,r&&(s.resumeFrom.preserveOpacity=!0),n.snapshot&&(s.snapshot=n.snapshot,s.snapshot.latestValues=n.animationValues||n.latestValues),s.root&&s.root.isUpdating&&(s.isLayoutDirty=!0);const{crossfade:a}=s.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(s=>{const{options:r,resumingFrom:n}=s;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(s=>{s.instance&&s.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Bx(t,s,r){let n="";const a=t.x.translate/s.x,i=t.y.translate/s.y,o=r?.z||0;if((a||i||o)&&(n=`translate3d(${a}px, ${i}px, ${o}px) `),(s.x!==1||s.y!==1)&&(n+=`scale(${1/s.x}, ${1/s.y}) `),r){const{transformPerspective:l,rotate:u,rotateX:h,rotateY:m,skewX:g,skewY:f}=r;l&&(n=`perspective(${l}px) ${n}`),u&&(n+=`rotate(${u}deg) `),h&&(n+=`rotateX(${h}deg) `),m&&(n+=`rotateY(${m}deg) `),g&&(n+=`skewX(${g}deg) `),f&&(n+=`skewY(${f}deg) `)}const c=t.x.scale*s.x,d=t.y.scale*s.y;return(c!==1||d!==1)&&(n+=`scale(${c}, ${d})`),n||"none"}const Ur=["","X","Y","Z"],$x=1e3;let Ux=0;function Wr(t,s,r,n){const{latestValues:a}=s;a[t]&&(r[t]=a[t],s.setStaticValue(t,0),n&&(n[t]=0))}function Yl(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:s}=t.options;if(!s)return;const r=Ol(s);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:a,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",J,!(a||i))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&Yl(n)}function Xl({attachResizeListener:t,defaultParent:s,measureScroll:r,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(o={},c=s?.()){this.id=Ux++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(qx),this.nodes.forEach(Yx),this.nodes.forEach(Xx),this.nodes.forEach(Kx)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new Dx)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new ma),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const d=this.eventHandlers.get(o);d&&d.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=hl(o)&&!Ip(o),this.instance=o;const{layoutId:c,layout:d,visualElement:l}=this.options;if(l&&!l.current&&l.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),t){let u,h=0;const m=()=>this.root.updateBlockedByResize=!1;J.read(()=>{h=window.innerWidth}),t(o,()=>{const g=window.innerWidth;g!==h&&(h=g,this.root.updateBlockedByResize=!0,u&&u(),u=Px(m,250),Gs.hasAnimatedSinceResize&&(Gs.hasAnimatedSinceResize=!1,this.nodes.forEach(mo)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&l&&(c||d)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h,hasRelativeLayoutChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const f=this.options.transition||l.getDefaultTransition()||sg,{onLayoutAnimationStart:y,onLayoutAnimationComplete:b}=l.getProps(),C=!this.targetLayout||!Jl(this.targetLayout,g),T=!h&&m;if(this.options.layoutRoot||this.resumeFrom||T||h&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const S={...ka(f,"layout"),onPlay:y,onComplete:b};(l.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S),this.setAnimationOrigin(u,T)}else h||mo(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),st(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Zx),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Yl(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(uo);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(ho);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Jx),this.nodes.forEach(Wx),this.nodes.forEach(Hx)):this.nodes.forEach(ho),this.clearAllSnapshots();const c=ge.now();ce.delta=qe(0,1e3/60,c-ce.timestamp),ce.timestamp=c,ce.isProcessing=!0,Ir.update.process(ce),Ir.preRender.process(ce),Ir.render.process(ce),ce.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Aa.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Gx),this.sharedNodes.forEach(Qx)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,J.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){J.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!pe(this.snapshot.measuredBox.x)&&!pe(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ne(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const d=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:d,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!Gl(this.projectionDelta),d=this.getTransformTemplate(),l=d?d(this.latestValues,""):void 0,u=l!==this.prevTransformTemplateValue;o&&this.instance&&(c||ct(this.latestValues)||u)&&(a(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return o&&(d=this.removeTransform(d)),rg(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return ne();const c=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(ng))){const{scroll:l}=this.root;l&&(Pt(c.x,l.offset.x),Pt(c.y,l.offset.y))}return c}removeElementScroll(o){const c=ne();if(Ne(c,o),this.scroll?.wasRoot)return c;for(let d=0;d<this.path.length;d++){const l=this.path[d],{scroll:u,options:h}=l;l!==this.root&&u&&h.layoutScroll&&(u.wasRoot&&Ne(c,o),Pt(c.x,u.offset.x),Pt(c.y,u.offset.y))}return c}applyTransform(o,c=!1){const d=ne();Ne(d,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];!c&&u.options.layoutScroll&&u.scroll&&u!==u.root&&It(d,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),ct(u.latestValues)&&It(d,u.latestValues)}return ct(this.latestValues)&&It(d,this.latestValues),d}removeTransform(o){const c=ne();Ne(c,o);for(let d=0;d<this.path.length;d++){const l=this.path[d];if(!l.instance||!ct(l.latestValues))continue;Pn(l.latestValues)&&l.updateSnapshot();const u=ne(),h=l.measurePageBox();Ne(u,h),no(c,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,u)}return ct(this.latestValues)&&no(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ce.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:h}=this.options;if(!(!this.layout||!(u||h))){if(this.resolvedRelativeTargetAt=ce.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ne(),this.relativeTargetOrigin=ne(),os(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Ne(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ne(),this.targetWithTransforms=ne()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),dx(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ne(this.target,this.layout.layoutBox),El(this.target,this.targetDelta)):Ne(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ne(),this.relativeTargetOrigin=ne(),os(this.relativeTargetOrigin,this.target,m.target),Ne(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Pn(this.parent.latestValues)||Al(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),c=!!this.resumingFrom||this!==o;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===ce.timestamp&&(d=!1),d)return;const{layout:l,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(l||u))return;Ne(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;Nf(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=ne());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(to(this.prevProjectionDelta.x,this.projectionDelta.x),to(this.prevProjectionDelta.y,this.projectionDelta.y)),is(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==m||!lo(this.projectionDelta.x,this.prevProjectionDelta.x)||!lo(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Rt(),this.projectionDelta=Rt(),this.projectionDeltaWithTransform=Rt()}setAnimationOrigin(o,c=!1){const d=this.snapshot,l=d?d.latestValues:{},u={...this.latestValues},h=Rt();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const m=ne(),g=d?d.source:void 0,f=this.layout?this.layout.source:void 0,y=g!==f,b=this.getStack(),C=!b||b.members.length<=1,T=!!(y&&!C&&this.options.crossfade===!0&&!this.path.some(tg));this.animationProgress=0;let S;this.mixTargetDelta=N=>{const j=N/1e3;po(h.x,o.x,j),po(h.y,o.y,j),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(os(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),eg(this.relativeTarget,this.relativeTargetOrigin,m,j),S&&zx(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=ne()),Ne(S,this.relativeTarget)),y&&(this.animationValues=u,Rx(u,l,this.latestValues,j,T,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(st(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=J.update(()=>{Gs.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=zt(0)),this.currentAnimation=Ax(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta($x),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:d,layout:l,latestValues:u}=o;if(!(!c||!d||!l)){if(this!==o&&this.layout&&l&&Zl(this.options.animationType,this.layout.layoutBox,l.layoutBox)){d=this.target||ne();const h=pe(this.layout.layoutBox.x);d.x.min=o.target.x.min,d.x.max=d.x.min+h;const m=pe(this.layout.layoutBox.y);d.y.min=o.target.y.min,d.y.max=d.y.min+m}Ne(c,d),It(c,u),is(this.projectionDeltaWithTransform,this.layoutCorrected,c,u)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Vx),this.sharedNodes.get(o).add(c);const l=c.options.initialPromotionConfig;c.promote({transition:l?l.transition:void 0,preserveFollowOpacity:l&&l.shouldPreserveFollowOpacity?l.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:d}={}){const l=this.getStack();l&&l.promote(this,d),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:d}=o;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const l={};d.z&&Wr("z",o,l,this.animationValues);for(let u=0;u<Ur.length;u++)Wr(`rotate${Ur[u]}`,o,l,this.animationValues),Wr(`skew${Ur[u]}`,o,l,this.animationValues);o.render();for(const u in l)o.setStaticValue(u,l[u]),this.animationValues&&(this.animationValues[u]=l[u]);o.scheduleRender()}applyProjectionStyles(o,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Ks(c?.pointerEvents)||"",o.transform=d?d(this.latestValues,""):"none";return}const l=this.getLead();if(!this.projectionDelta||!this.layout||!l.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Ks(c?.pointerEvents)||""),this.hasProjected&&!ct(this.latestValues)&&(o.transform=d?d({},""):"none",this.hasProjected=!1);return}o.visibility="";const u=l.animationValues||l.latestValues;this.applyTransformsToTarget();let h=Bx(this.projectionDeltaWithTransform,this.treeScale,u);d&&(h=d(u,h)),o.transform=h;const{x:m,y:g}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,l.animationValues?o.opacity=l===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:o.opacity=l===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const f in xs){if(u[f]===void 0)continue;const{correct:y,applyTo:b,isCSSVariable:C}=xs[f],T=h==="none"?u[f]:y(u[f],l);if(b){const S=b.length;for(let N=0;N<S;N++)o[b[N]]=T}else C?this.options.visualElement.renderState.vars[f]=T:o[f]=T}this.options.layoutId&&(o.pointerEvents=l===this?Ks(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(uo),this.root.sharedNodes.clear()}}}function Wx(t){t.updateLayout()}function Hx(t){const s=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&s&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:n}=t.layout,{animationType:a}=t.options,i=s.source!==t.layout.source;a==="size"?we(u=>{const h=i?s.measuredBox[u]:s.layoutBox[u],m=pe(h);h.min=r[u].min,h.max=h.min+m}):Zl(a,s.layoutBox,r)&&we(u=>{const h=i?s.measuredBox[u]:s.layoutBox[u],m=pe(r[u]);h.max=h.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[u].max=t.relativeTarget[u].min+m)});const o=Rt();is(o,r,s.layoutBox);const c=Rt();i?is(c,t.applyTransform(n,!0),s.measuredBox):is(c,r,s.layoutBox);const d=!Gl(o);let l=!1;if(!t.resumeFrom){const u=t.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:h,layout:m}=u;if(h&&m){const g=ne();os(g,s.layoutBox,h.layoutBox);const f=ne();os(f,r,m.layoutBox),Jl(g,f)||(l=!0),u.options.layoutRoot&&(t.relativeTarget=f,t.relativeTargetOrigin=g,t.relativeParent=u)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:s,delta:c,layoutDelta:o,hasLayoutChanged:d,hasRelativeLayoutChanged:l})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function qx(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Kx(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Gx(t){t.clearSnapshot()}function uo(t){t.clearMeasurements()}function ho(t){t.isLayoutDirty=!1}function Jx(t){const{visualElement:s}=t.options;s&&s.getProps().onBeforeLayoutMeasure&&s.notify("BeforeLayoutMeasure"),t.resetTransform()}function mo(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Yx(t){t.resolveTargetDelta()}function Xx(t){t.calcProjection()}function Zx(t){t.resetSkewAndRotation()}function Qx(t){t.removeLeadSnapshot()}function po(t,s,r){t.translate=Z(s.translate,0,r),t.scale=Z(s.scale,1,r),t.origin=s.origin,t.originPoint=s.originPoint}function fo(t,s,r,n){t.min=Z(s.min,r.min,n),t.max=Z(s.max,r.max,n)}function eg(t,s,r,n){fo(t.x,s.x,r.x,n),fo(t.y,s.y,r.y,n)}function tg(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const sg={duration:.45,ease:[.4,0,.1,1]},xo=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),go=xo("applewebkit/")&&!xo("chrome/")?Math.round:Se;function yo(t){t.min=go(t.min),t.max=go(t.max)}function rg(t){yo(t.x),yo(t.y)}function Zl(t,s,r){return t==="position"||t==="preserve-aspect"&&!lx(co(s),co(r),.2)}function ng(t){return t!==t.root&&t.scroll?.wasRoot}const ag=Xl({attachResizeListener:(t,s)=>gs(t,"resize",s),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Hr={current:void 0},Ql=Xl({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Hr.current){const t=new ag({});t.mount(window),t.setOptions({layoutScroll:!0}),Hr.current=t}return Hr.current},resetTransform:(t,s)=>{t.style.transform=s!==void 0?s:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),ig={pan:{Feature:Sx},drag:{Feature:wx,ProjectionNode:Ql,MeasureLayout:Hl}};function bo(t,s,r){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",r==="Start");const a="onHover"+r,i=n[a];i&&J.postRender(()=>i(s,As(s)))}class og extends it{mount(){const{current:s}=this.node;s&&(this.unmount=Tp(s,(r,n)=>(bo(this.node,n,"Start"),a=>bo(this.node,a,"End"))))}unmount(){}}class cg extends it{constructor(){super(...arguments),this.isActive=!1}onFocus(){let s=!1;try{s=this.node.current.matches(":focus-visible")}catch{s=!0}!s||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Cs(gs(this.node.current,"focus",()=>this.onFocus()),gs(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function jo(t,s,r){const{props:n}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",r==="Start");const a="onTap"+(r==="End"?"":r),i=n[a];i&&J.postRender(()=>i(s,As(s)))}class lg extends it{mount(){const{current:s}=this.node;s&&(this.unmount=Pp(s,(r,n)=>(jo(this.node,n,"Start"),(a,{success:i})=>jo(this.node,a,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const _n=new WeakMap,qr=new WeakMap,dg=t=>{const s=_n.get(t.target);s&&s(t)},ug=t=>{t.forEach(dg)};function hg({root:t,...s}){const r=t||document;qr.has(r)||qr.set(r,{});const n=qr.get(r),a=JSON.stringify(s);return n[a]||(n[a]=new IntersectionObserver(ug,{root:t,...s})),n[a]}function mg(t,s,r){const n=hg(s);return _n.set(t,r),n.observe(t),()=>{_n.delete(t),n.unobserve(t)}}const pg={some:0,all:1};class fg extends it{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:s={}}=this.node.getProps(),{root:r,margin:n,amount:a="some",once:i}=s,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:pg[a]},c=d=>{const{isIntersecting:l}=d;if(this.isInView===l||(this.isInView=l,i&&!l&&this.hasEnteredView))return;l&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",l);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),m=l?u:h;m&&m(d)};return mg(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:s,prevProps:r}=this.node;["amount","margin","root"].some(xg(s,r))&&this.startObserver()}unmount(){}}function xg({viewport:t={}},{viewport:s={}}={}){return r=>t[r]!==s[r]}const gg={inView:{Feature:fg},tap:{Feature:lg},focus:{Feature:cg},hover:{Feature:og}},yg={layout:{ProjectionNode:Ql,MeasureLayout:Hl}},bg={...rx,...gg,...ig,...yg},L=bf(bg,If),jg=()=>{const[t,s]=x.useState(new Date),[r,n]=x.useState("checking"),[a,i]=x.useState(null),[o,c]=x.useState({users:1247,farms:856,predictions:12400,accuracy:94.2});js();const{isAuthenticated:d,user:l}=Ct();x.useEffect(()=>{const f=setInterval(()=>s(new Date),1e3);return()=>clearInterval(f)},[]),x.useEffect(()=>{fetch("/api/status").then(f=>f.json()).then(f=>{n("connected")}).catch(f=>{console.log("Backend check:",f),n("disconnected")})},[]),x.useEffect(()=>{const f=setInterval(()=>{c(y=>({users:y.users+Math.floor(Math.random()*3),farms:y.farms+Math.floor(Math.random()*2),predictions:y.predictions+Math.floor(Math.random()*5),accuracy:Math.min(99.9,y.accuracy+Math.random()*.1)}))},5e3);return()=>clearInterval(f)},[]);const u=[{id:"weather",icon:Ce,title:"Smart Weather Analytics",subtitle:"AI-Powered Forecasting",description:"Real-time weather monitoring with machine learning predictions",highlights:["7-day forecasts","Storm alerts","Microclimate analysis"],route:"/weather",demo:"weather",color:"from-blue-400 to-cyan-600",bgColor:"bg-blue-50",textColor:"text-blue-600"},{id:"advisory",icon:Me,title:"Personalized AI Assistant",subtitle:"Smart Crop Advisory",description:"AI-powered recommendations tailored to your farming needs",highlights:["Crop optimization","Planting schedules","Yield predictions"],route:"/chat",demo:"ai",color:"from-green-400 to-emerald-600",bgColor:"bg-green-50",textColor:"text-green-600"},{id:"detection",icon:Ue,title:"Advanced Pest Detection",subtitle:"Computer Vision AI",description:"Cutting-edge image analysis for pest and disease identification",highlights:["95% accuracy","Instant diagnosis","Treatment suggestions"],route:"/pest-detection",demo:"pest",color:"from-red-400 to-rose-600",bgColor:"bg-red-50",textColor:"text-red-600"},{id:"market",icon:Ns,title:"Live Market Intelligence",subtitle:"Real-Time Pricing",description:"Get instant market data and selling recommendations",highlights:["Live prices","Market trends","Profit forecasts"],route:"/market",demo:"market",color:"from-purple-400 to-violet-600",bgColor:"bg-purple-50",textColor:"text-purple-600"},{id:"irrigation",icon:te,title:"Smart Irrigation System",subtitle:"Water Management",description:"Automated irrigation scheduling based on AI analysis",highlights:["Water savings","Soil monitoring","Auto scheduling"],route:"/irrigation",demo:"irrigation",color:"from-cyan-400 to-teal-600",bgColor:"bg-cyan-50",textColor:"text-cyan-600"},{id:"consultation",icon:le,title:"Expert Video Consultations",subtitle:"Connect with Experts",description:"One-on-one sessions with agricultural professionals",highlights:["HD video calls","Screen sharing","Expert network"],route:"/consultation",demo:"video",color:"from-indigo-400 to-blue-600",bgColor:"bg-indigo-50",textColor:"text-indigo-600"}],h={weather:{title:"Weather Analytics",metrics:[{label:"Temperature",value:"24°C",trend:"+2°"},{label:"Humidity",value:"68%",trend:"-5%"},{label:"Rainfall",value:"12mm",trend:"+8mm"}]},ai:{title:"AI Assistant Chat",messages:[{role:"user",text:"What should I plant this season?"},{role:"ai",text:"Based on your soil analysis and weather patterns, I recommend tomatoes and corn for maximum yield."}]},market:{title:"Market Prices",prices:[{crop:"Wheat",price:"$245/ton",change:"+3.2%"},{crop:"Corn",price:"$198/ton",change:"+1.8%"},{crop:"Rice",price:"$312/ton",change:"-0.5%"}]}},m=[{icon:ta,value:o.users.toLocaleString(),label:"Active Farmers"},{icon:Je,value:o.farms.toLocaleString(),label:"Farms Monitored"},{icon:vs,value:o.predictions.toLocaleString(),label:"AI Predictions"},{icon:ve,value:`${o.accuracy.toFixed(1)}%`,label:"Accuracy Rate"}],g=[{name:"John Martinez",role:"Organic Farmer",location:"California, USA",quote:"Farmora increased my crop yield by 35% in just one season. The AI recommendations are incredibly accurate.",avatar:"👨‍🌾"},{name:"Sarah Johnson",role:"Agricultural Consultant",location:"Texas, USA",quote:"The pest detection feature saved my clients thousands in potential crop losses. Amazing technology!",avatar:"👩‍🌾"},{name:"Michael Chen",role:"Sustainable Farmer",location:"Oregon, USA",quote:"The water management system helped me reduce irrigation costs by 40% while maintaining optimal growth.",avatar:"👨‍💼"}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-blue-50 to-purple-50",children:[e.jsxs("section",{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-5",children:e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23059669' fill-opacity='0.1'%3E%3Cpath d='M30 30c0-11.046-8.954-20-20-20s-20 8.954-20 20 8.954 20 20 20 20-8.954 20-20zm0 0c0-11.046-8.954-20-20-20s-20 8.954-20 20 8.954 20 20 20 20-8.954 20-20z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-16",children:e.jsxs("div",{className:"text-center",children:[e.jsxs(L.div,{className:"inline-flex items-center space-x-4 bg-white rounded-full px-6 py-3 shadow-lg border mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${r==="connected"?"bg-green-500":r==="disconnected"?"bg-red-500":"bg-yellow-500"}`}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:r==="connected"?"All Systems Online":r==="disconnected"?"Backend Offline":"Checking..."})]}),e.jsx("div",{className:"w-px h-4 bg-gray-300"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ae,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:t.toLocaleTimeString()})]})]}),e.jsxs(L.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.2},children:[e.jsxs("div",{className:"flex items-center justify-center mb-6",children:[e.jsx(Me,{className:"w-16 h-16 text-green-600"}),e.jsx(dr,{className:"w-8 h-8 text-yellow-500 ml-2 animate-pulse"})]}),e.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-gray-900 mb-6",children:["Welcome to"," ",e.jsx("span",{className:"bg-gradient-to-r from-green-600 via-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Farmora"})]}),e.jsx("p",{className:"text-xl md:text-2xl text-gray-600 max-w-4xl mx-auto mb-8 leading-relaxed",children:"The future of agriculture is here. Experience AI-powered farming with real-time insights, expert consultations, and smart automation that transforms how you grow."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center mb-12",children:[d?e.jsxs(U,{to:"/dashboard",className:"group bg-gradient-to-r from-green-600 to-blue-600 text-white px-8 py-4 rounded-full font-semibold text-lg shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-200 flex items-center",children:[e.jsx(Te,{className:"w-5 h-5 mr-2"}),"Go to Dashboard",e.jsx(ln,{className:"w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(U,{to:"/register",className:"group bg-gradient-to-r from-green-600 to-blue-600 text-white px-8 py-4 rounded-full font-semibold text-lg shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-200 flex items-center",children:[e.jsx(dn,{className:"w-5 h-5 mr-2"}),"Start Free Trial",e.jsx(ln,{className:"w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform"})]}),e.jsxs(U,{to:"/login",className:"group bg-white text-gray-700 px-8 py-4 rounded-full font-semibold text-lg shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-200 flex items-center border-2 border-gray-200 hover:border-green-300",children:[e.jsx(un,{className:"w-5 h-5 mr-2"}),"Sign In"]})]}),e.jsxs("button",{onClick:()=>document.getElementById("features").scrollIntoView({behavior:"smooth"}),className:"group text-gray-600 hover:text-green-600 font-medium flex items-center transition-colors",children:[e.jsx(sa,{className:"w-5 h-5 mr-2"}),"Watch Demo",e.jsx(ts,{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform"})]})]}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-8 max-w-4xl mx-auto",children:m.map((f,y)=>e.jsxs(L.div,{className:"text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4+y*.1},children:[e.jsx(f.icon,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-1",children:f.value}),e.jsx("div",{className:"text-sm text-gray-600",children:f.label})]},y))})]})]})})]}),e.jsx("section",{id:"features",className:"py-20 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs(L.div,{className:"text-center mb-16",initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},children:[e.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4",children:"Powerful Features for Modern Farming"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Discover how Farmora's cutting-edge technology transforms traditional farming into smart agriculture"})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-8",children:u.map((f,y)=>e.jsxs(L.div,{className:"group relative overflow-hidden bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:y*.1},whileHover:{y:-5},children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-r ${f.color} opacity-0 group-hover:opacity-5 transition-opacity duration-300`}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-xl ${f.bgColor}`,children:e.jsx(f.icon,{className:`w-8 h-8 ${f.textColor}`})}),e.jsx("button",{onClick:()=>i(a===f.demo?null:f.demo),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(We,{className:"w-5 h-5"})})]}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:f.title}),e.jsx("p",{className:"text-sm font-medium text-gray-500 mb-3",children:f.subtitle}),e.jsx("p",{className:"text-gray-600 mb-4 leading-relaxed",children:f.description}),e.jsx("ul",{className:"space-y-2 mb-6",children:f.highlights.map((b,C)=>e.jsxs("li",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500 mr-3"}),b]},C))}),e.jsx(ps,{children:a===f.demo&&e.jsx(L.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mb-6 p-4 bg-gray-50 rounded-lg border",children:h[f.demo]&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:h[f.demo].title}),f.demo==="weather"&&e.jsx("div",{className:"space-y-2",children:h.weather.metrics.map((b,C)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:b.label}),e.jsxs("span",{className:"font-medium",children:[b.value," ",b.trend]})]},C))}),f.demo==="market"&&e.jsx("div",{className:"space-y-2",children:h.market.prices.map((b,C)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:b.crop}),e.jsxs("span",{className:"font-medium",children:[b.price," ",e.jsx("span",{className:"text-green-600",children:b.change})]})]},C))})]})})}),e.jsxs(U,{to:f.route,className:`w-full bg-gradient-to-r ${f.color} text-white py-3 px-4 rounded-lg font-semibold text-center block hover:shadow-lg transform hover:scale-105 transition-all duration-200 group-hover:scale-105`,children:["Explore ",f.title]})]})]},f.id))})]})}),e.jsx("section",{className:"py-20 bg-gradient-to-r from-green-50 to-blue-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs(L.div,{className:"text-center mb-16",initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},children:[e.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Trusted by Farmers Worldwide"}),e.jsx("p",{className:"text-xl text-gray-600",children:"See what our farming community says about Farmora"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:g.map((f,y)=>e.jsxs(L.div,{className:"bg-white rounded-2xl p-8 shadow-lg hover:shadow-xl transition-shadow duration-300",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:y*.1},children:[e.jsx("div",{className:"text-4xl mb-4",children:f.avatar}),e.jsxs("blockquote",{className:"text-gray-700 mb-6 italic",children:['"',f.quote,'"']}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:f.name}),e.jsx("p",{className:"text-sm text-gray-600",children:f.role}),e.jsx("p",{className:"text-sm text-gray-500",children:f.location})]})]},y))})]})}),e.jsx("section",{className:"py-20 bg-gradient-to-r from-green-600 to-blue-600",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:e.jsxs(L.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},children:[e.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:"Ready to Transform Your Farm?"}),e.jsx("p",{className:"text-xl text-green-100 mb-8 max-w-3xl mx-auto",children:"Join thousands of farmers who are already using Farmora to increase yields, reduce costs, and farm more sustainably."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[!d&&e.jsxs(e.Fragment,{children:[e.jsxs(U,{to:"/register",className:"bg-white text-green-600 px-8 py-4 rounded-full font-semibold text-lg hover:bg-gray-100 transform hover:scale-105 transition-all duration-200 flex items-center justify-center",children:[e.jsx(dn,{className:"w-5 h-5 mr-2"}),"Get Started Free"]}),e.jsxs(U,{to:"/login",className:"border-2 border-white text-white px-8 py-4 rounded-full font-semibold text-lg hover:bg-white hover:text-green-600 transform hover:scale-105 transition-all duration-200 flex items-center justify-center",children:[e.jsx(un,{className:"w-5 h-5 mr-2"}),"Sign In"]})]}),d&&e.jsxs(U,{to:"/dashboard",className:"bg-white text-green-600 px-8 py-4 rounded-full font-semibold text-lg hover:bg-gray-100 transform hover:scale-105 transition-all duration-200 flex items-center justify-center",children:[e.jsx(Te,{className:"w-5 h-5 mr-2"}),"Go to Dashboard"]})]})]})})})]})},vo=()=>e.jsx(jg,{}),vg=({weather:t,forecast:s,loading:r})=>{if(r)return e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-16 bg-gray-200 rounded mb-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})});const n=(c,d=32)=>{switch(c?.toLowerCase()){case"clear":return e.jsx(Lt,{size:d,className:"text-yellow-500"});case"clouds":return e.jsx(Ce,{size:d,className:"text-gray-500"});case"rain":case"drizzle":return e.jsx(cs,{size:d,className:"text-blue-500"});default:return e.jsx(Ce,{size:d,className:"text-gray-500"})}},a=c=>c>=35?"text-red-600":c>=25?"text-orange-500":c>=15?"text-green-600":"text-blue-600",i=c=>new Date(c).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),o=c=>new Date(c).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"});return e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-lg shadow-md overflow-hidden",children:[e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Current Weather"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Updated ",t?.timestamp?i(t.timestamp):"Recently"]})]}),t&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:n(t.weather,64)}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-baseline space-x-2",children:[e.jsxs("span",{className:`text-4xl font-bold ${a(t.temperature)}`,children:[Math.round(t.temperature),"°"]}),e.jsx("span",{className:"text-gray-500",children:"C"})]}),e.jsx("p",{className:"text-gray-700 capitalize font-medium",children:t.description})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-white/50 rounded-lg",children:[e.jsx(te,{className:"text-blue-500",size:18}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Humidity"}),e.jsxs("p",{className:"font-semibold",children:[t.humidity,"%"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-white/50 rounded-lg",children:[e.jsx(Ft,{className:"text-gray-600",size:18}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Wind Speed"}),e.jsxs("p",{className:"font-semibold",children:[t.windSpeed," km/h"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-white/50 rounded-lg",children:[e.jsx(We,{className:"text-purple-500",size:18}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Visibility"}),e.jsxs("p",{className:"font-semibold",children:[t.visibility/1e3," km"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-white/50 rounded-lg",children:[e.jsx(ur,{className:"text-green-600",size:18}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Pressure"}),e.jsxs("p",{className:"font-semibold",children:[t.pressure," hPa"]})]})]})]})]}),t?.farmingAdvisory&&e.jsx("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(je,{className:"text-yellow-600 mt-0.5 flex-shrink-0",size:18}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-yellow-800 mb-1",children:"Farming Advisory"}),e.jsx("p",{className:"text-yellow-700 text-sm",children:t.farmingAdvisory})]})]})})]}),s&&s.length>0&&e.jsxs("div",{className:"border-t border-white/20 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"5-Day Forecast"}),e.jsxs("button",{className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center space-x-1",children:[e.jsx("span",{children:"View Details"}),e.jsx(ln,{size:14})]})]}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:s.slice(0,5).map((c,d)=>e.jsxs("div",{className:"text-center p-3 bg-white/50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-600 font-medium mb-2",children:o(c.date)}),e.jsx("div",{className:"flex justify-center mb-2",children:n(c.weather,24)}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-sm font-semibold text-gray-800",children:[Math.round(c.tempMax),"°"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[Math.round(c.tempMin),"°"]})]}),c.precipitation>0&&e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[Math.round(c.precipitation),"mm"]})]},d))})]}),t?.alerts&&t.alerts.length>0&&e.jsxs("div",{className:"border-t border-white/20 p-6",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Weather Alerts"}),e.jsx("div",{className:"space-y-2",children:t.alerts.map((c,d)=>e.jsxs("div",{className:`p-3 rounded-lg border-l-4 ${c.severity==="high"?"bg-red-50 border-red-400":"bg-yellow-50 border-yellow-400"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(je,{className:c.severity==="high"?"text-red-600":"text-yellow-600",size:16}),e.jsx("span",{className:`text-sm font-medium ${c.severity==="high"?"text-red-800":"text-yellow-800"}`,children:c.type.replace("_"," ").toUpperCase()})]}),e.jsx("p",{className:`text-sm mt-1 ${c.severity==="high"?"text-red-700":"text-yellow-700"}`,children:c.message})]},d))})]})]})},ed=({advisory:t,loading:s})=>{const[r,n]=x.useState(null),[a,i]=x.useState({rating:0,helpful:null});if(s)return e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-4"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-4/6"})]})]})});const o=l=>{n(r===l?null:l)},c=(l,u)=>{i(h=>({...h,[l]:u}))},d=l=>{switch(l){case"urgent":return e.jsx($e,{className:"text-red-500",size:18});case"completed":return e.jsx(G,{className:"text-green-500",size:18});default:return e.jsx(pt,{className:"text-blue-500",size:18})}};return e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 p-6 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Qn,{className:"text-green-600",size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Crop Advisory"}),e.jsx("p",{className:"text-sm text-gray-600",children:t?.cropInfo?.name&&`${t.cropInfo.name} - ${t.cropInfo.currentStage}`})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[e.jsx(Ae,{size:16}),e.jsx("span",{children:"Updated 2 hours ago"})]})]})}),t&&e.jsxs("div",{className:"p-6",children:[t.cropAnalysis&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Current Growth Stage"}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-blue-900",children:t.cropAnalysis.stage}),e.jsx("span",{className:"text-sm text-blue-700",children:t.cropAnalysis.duration})]}),e.jsx("p",{className:"text-blue-800 text-sm",children:t.cropAnalysis.description}),t.cropAnalysis.keyActivities&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Key Activities:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.cropAnalysis.keyActivities.map((l,u)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:l},u))})]})]})]}),t.recommendations&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Recommendations"}),t.recommendations.irrigation&&e.jsxs("div",{className:"border rounded-lg",children:[e.jsxs("button",{onClick:()=>o("irrigation"),className:"w-full flex items-center justify-between p-4 text-left hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded",children:e.jsx(pt,{className:"text-blue-600",size:16})}),e.jsx("span",{className:"font-medium",children:"Irrigation Management"})]}),r==="irrigation"?e.jsx($s,{size:20}):e.jsx(ts,{size:20})]}),r==="irrigation"&&e.jsx("div",{className:"px-4 pb-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-700 mb-1",children:"Frequency"}),e.jsx("p",{className:"text-gray-600",children:t.recommendations.irrigation.frequency})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-700 mb-1",children:"Amount"}),e.jsx("p",{className:"text-gray-600",children:t.recommendations.irrigation.amount})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-700 mb-1",children:"Timing"}),e.jsx("p",{className:"text-gray-600",children:t.recommendations.irrigation.timing})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-700 mb-1",children:"Method"}),e.jsx("p",{className:"text-gray-600",children:t.recommendations.irrigation.method})]})]})})]}),t.recommendations.fertilization&&e.jsxs("div",{className:"border rounded-lg",children:[e.jsxs("button",{onClick:()=>o("fertilization"),className:"w-full flex items-center justify-between p-4 text-left hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded",children:e.jsx(pt,{className:"text-green-600",size:16})}),e.jsx("span",{className:"font-medium",children:"Fertilization"})]}),r==="fertilization"?e.jsx($s,{size:20}):e.jsx(ts,{size:20})]}),r==="fertilization"&&e.jsx("div",{className:"px-4 pb-4",children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-700",children:"Recommended Type"}),e.jsx("p",{className:"text-gray-600",children:t.recommendations.fertilization.type})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-700",children:"Application Timing"}),e.jsx("p",{className:"text-gray-600",children:t.recommendations.fertilization.timing})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-700",children:"Application Method"}),e.jsx("p",{className:"text-gray-600",children:t.recommendations.fertilization.application})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-700",children:"Organic Alternative"}),e.jsx("p",{className:"text-gray-600",children:t.recommendations.fertilization.organic})]})]})})]}),t.recommendations.pestManagement&&e.jsxs("div",{className:"border rounded-lg",children:[e.jsxs("button",{onClick:()=>o("pest"),className:"w-full flex items-center justify-between p-4 text-left hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded",children:e.jsx($e,{className:"text-red-600",size:16})}),e.jsx("span",{className:"font-medium",children:"Pest Management"})]}),r==="pest"?e.jsx($s,{size:20}):e.jsx(ts,{size:20})]}),r==="pest"&&e.jsx("div",{className:"px-4 pb-4",children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-700",children:"Monitoring"}),e.jsx("p",{className:"text-gray-600",children:t.recommendations.pestManagement.monitoring})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-700",children:"Prevention"}),e.jsx("p",{className:"text-gray-600",children:t.recommendations.pestManagement.prevention})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-700",children:"Treatment"}),e.jsx("p",{className:"text-gray-600",children:t.recommendations.pestManagement.treatment})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-700",children:"Organic Options"}),e.jsx("p",{className:"text-gray-600",children:t.recommendations.pestManagement.organic})]})]})})]})]}),t.actionItems&&t.actionItems.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Immediate Action Items"}),e.jsx("div",{className:"space-y-2",children:t.actionItems.map((l,u)=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-yellow-50 rounded-lg",children:[d("urgent"),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-medium text-gray-900",children:l})})]},u))})]}),t.nextSteps&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Next Steps"}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Ee,{className:"text-green-600",size:18}),e.jsxs("span",{className:"font-medium text-green-800",children:["Next Stage: ",t.nextSteps.nextStage]})]}),e.jsxs("p",{className:"text-green-700 text-sm mb-3",children:["Estimated in ",t.nextSteps.estimatedDays," days"]}),t.nextSteps.preparationNeeded&&e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800 mb-2",children:"Preparation Required:"}),e.jsx("ul",{className:"space-y-1",children:t.nextSteps.preparationNeeded.map((l,u)=>e.jsxs("li",{className:"text-green-700 text-sm flex items-start space-x-2",children:[e.jsx(G,{size:14,className:"mt-0.5 flex-shrink-0"}),e.jsx("span",{children:l})]},u))})]})]})]}),t.tips&&t.tips.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Seasonal Tips"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:t.tips.map((l,u)=>e.jsxs("div",{className:"flex items-start space-x-2 p-3 bg-blue-50 rounded-lg",children:[e.jsx(_t,{className:"text-blue-600 flex-shrink-0 mt-0.5",size:16}),e.jsx("p",{className:"text-blue-800 text-sm",children:l})]},u))})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Was this advisory helpful?"}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Rating:"}),e.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(l=>e.jsx("button",{onClick:()=>c("rating",l),className:`p-1 ${a.rating>=l?"text-yellow-500":"text-gray-300"}`,children:e.jsx(Ie,{size:20,fill:"currentColor"})},l))})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>c("helpful",!0),className:`flex items-center space-x-1 px-3 py-1 rounded-lg transition-colors ${a.helpful===!0?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(cc,{size:16}),e.jsx("span",{className:"text-sm",children:"Helpful"})]}),e.jsxs("button",{onClick:()=>c("helpful",!1),className:`flex items-center space-x-1 px-3 py-1 rounded-lg transition-colors ${a.helpful===!1?"bg-red-100 text-red-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(lc,{size:16}),e.jsx("span",{className:"text-sm",children:"Not Helpful"})]})]})]}),(a.rating>0||a.helpful!==null)&&e.jsxs("div",{className:"mt-3",children:[e.jsx("textarea",{placeholder:"Share your feedback or suggestions...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent resize-none",rows:"3"}),e.jsx("button",{className:"mt-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Submit Feedback"})]})]})]})]})};function td(t,s){return function(){return t.apply(s,arguments)}}const{toString:Ng}=Object.prototype,{getPrototypeOf:Va}=Object,{iterator:jr,toStringTag:sd}=Symbol,vr=(t=>s=>{const r=Ng.call(s);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),De=t=>(t=t.toLowerCase(),s=>vr(s)===t),Nr=t=>s=>typeof s===t,{isArray:Ht}=Array,Bt=Nr("undefined");function Es(t){return t!==null&&!Bt(t)&&t.constructor!==null&&!Bt(t.constructor)&&ye(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const rd=De("ArrayBuffer");function wg(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&rd(t.buffer),s}const Sg=Nr("string"),ye=Nr("function"),nd=Nr("number"),Ds=t=>t!==null&&typeof t=="object",Cg=t=>t===!0||t===!1,Js=t=>{if(vr(t)!=="object")return!1;const s=Va(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(sd in t)&&!(jr in t)},kg=t=>{if(!Ds(t)||Es(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Tg=De("Date"),Ag=De("File"),Eg=De("Blob"),Dg=De("FileList"),Pg=t=>Ds(t)&&ye(t.pipe),Ig=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||ye(t.append)&&((s=vr(t))==="formdata"||s==="object"&&ye(t.toString)&&t.toString()==="[object FormData]"))},Rg=De("URLSearchParams"),[Mg,Og,Fg,Lg]=["ReadableStream","Request","Response","Headers"].map(De),_g=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ps(t,s,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,a;if(typeof t!="object"&&(t=[t]),Ht(t))for(n=0,a=t.length;n<a;n++)s.call(null,t[n],n,t);else{if(Es(t))return;const i=r?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let c;for(n=0;n<o;n++)c=i[n],s.call(null,t[c],c,t)}}function ad(t,s){if(Es(t))return null;s=s.toLowerCase();const r=Object.keys(t);let n=r.length,a;for(;n-- >0;)if(a=r[n],s===a.toLowerCase())return a;return null}const ht=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,id=t=>!Bt(t)&&t!==ht;function zn(){const{caseless:t,skipUndefined:s}=id(this)&&this||{},r={},n=(a,i)=>{const o=t&&ad(r,i)||i;Js(r[o])&&Js(a)?r[o]=zn(r[o],a):Js(a)?r[o]=zn({},a):Ht(a)?r[o]=a.slice():(!s||!Bt(a))&&(r[o]=a)};for(let a=0,i=arguments.length;a<i;a++)arguments[a]&&Ps(arguments[a],n);return r}const zg=(t,s,r,{allOwnKeys:n}={})=>(Ps(s,(a,i)=>{r&&ye(a)?t[i]=td(a,r):t[i]=a},{allOwnKeys:n}),t),Vg=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Bg=(t,s,r,n)=>{t.prototype=Object.create(s.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),r&&Object.assign(t.prototype,r)},$g=(t,s,r,n)=>{let a,i,o;const c={};if(s=s||{},t==null)return s;do{for(a=Object.getOwnPropertyNames(t),i=a.length;i-- >0;)o=a[i],(!n||n(o,t,s))&&!c[o]&&(s[o]=t[o],c[o]=!0);t=r!==!1&&Va(t)}while(t&&(!r||r(t,s))&&t!==Object.prototype);return s},Ug=(t,s,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=s.length;const n=t.indexOf(s,r);return n!==-1&&n===r},Wg=t=>{if(!t)return null;if(Ht(t))return t;let s=t.length;if(!nd(s))return null;const r=new Array(s);for(;s-- >0;)r[s]=t[s];return r},Hg=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&Va(Uint8Array)),qg=(t,s)=>{const n=(t&&t[jr]).call(t);let a;for(;(a=n.next())&&!a.done;){const i=a.value;s.call(t,i[0],i[1])}},Kg=(t,s)=>{let r;const n=[];for(;(r=t.exec(s))!==null;)n.push(r);return n},Gg=De("HTMLFormElement"),Jg=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,a){return n.toUpperCase()+a}),No=(({hasOwnProperty:t})=>(s,r)=>t.call(s,r))(Object.prototype),Yg=De("RegExp"),od=(t,s)=>{const r=Object.getOwnPropertyDescriptors(t),n={};Ps(r,(a,i)=>{let o;(o=s(a,i,t))!==!1&&(n[i]=o||a)}),Object.defineProperties(t,n)},Xg=t=>{od(t,(s,r)=>{if(ye(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(ye(n)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Zg=(t,s)=>{const r={},n=a=>{a.forEach(i=>{r[i]=!0})};return Ht(t)?n(t):n(String(t).split(s)),r},Qg=()=>{},e0=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function t0(t){return!!(t&&ye(t.append)&&t[sd]==="FormData"&&t[jr])}const s0=t=>{const s=new Array(10),r=(n,a)=>{if(Ds(n)){if(s.indexOf(n)>=0)return;if(Es(n))return n;if(!("toJSON"in n)){s[a]=n;const i=Ht(n)?[]:{};return Ps(n,(o,c)=>{const d=r(o,a+1);!Bt(d)&&(i[c]=d)}),s[a]=void 0,i}}return n};return r(t,0)},r0=De("AsyncFunction"),n0=t=>t&&(Ds(t)||ye(t))&&ye(t.then)&&ye(t.catch),cd=((t,s)=>t?setImmediate:s?((r,n)=>(ht.addEventListener("message",({source:a,data:i})=>{a===ht&&i===r&&n.length&&n.shift()()},!1),a=>{n.push(a),ht.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",ye(ht.postMessage)),a0=typeof queueMicrotask<"u"?queueMicrotask.bind(ht):typeof process<"u"&&process.nextTick||cd,i0=t=>t!=null&&ye(t[jr]),k={isArray:Ht,isArrayBuffer:rd,isBuffer:Es,isFormData:Ig,isArrayBufferView:wg,isString:Sg,isNumber:nd,isBoolean:Cg,isObject:Ds,isPlainObject:Js,isEmptyObject:kg,isReadableStream:Mg,isRequest:Og,isResponse:Fg,isHeaders:Lg,isUndefined:Bt,isDate:Tg,isFile:Ag,isBlob:Eg,isRegExp:Yg,isFunction:ye,isStream:Pg,isURLSearchParams:Rg,isTypedArray:Hg,isFileList:Dg,forEach:Ps,merge:zn,extend:zg,trim:_g,stripBOM:Vg,inherits:Bg,toFlatObject:$g,kindOf:vr,kindOfTest:De,endsWith:Ug,toArray:Wg,forEachEntry:qg,matchAll:Kg,isHTMLForm:Gg,hasOwnProperty:No,hasOwnProp:No,reduceDescriptors:od,freezeMethods:Xg,toObjectSet:Zg,toCamelCase:Jg,noop:Qg,toFiniteNumber:e0,findKey:ad,global:ht,isContextDefined:id,isSpecCompliantForm:t0,toJSONObject:s0,isAsyncFn:r0,isThenable:n0,setImmediate:cd,asap:a0,isIterable:i0};function B(t,s,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}k.inherits(B,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:k.toJSONObject(this.config),code:this.code,status:this.status}}});const ld=B.prototype,dd={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{dd[t]={value:t}});Object.defineProperties(B,dd);Object.defineProperty(ld,"isAxiosError",{value:!0});B.from=(t,s,r,n,a,i)=>{const o=Object.create(ld);k.toFlatObject(t,o,function(u){return u!==Error.prototype},l=>l!=="isAxiosError");const c=t&&t.message?t.message:"Error",d=s==null&&t?t.code:s;return B.call(o,c,d,r,n,a),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",i&&Object.assign(o,i),o};const o0=null;function Vn(t){return k.isPlainObject(t)||k.isArray(t)}function ud(t){return k.endsWith(t,"[]")?t.slice(0,-2):t}function wo(t,s,r){return t?t.concat(s).map(function(a,i){return a=ud(a),!r&&i?"["+a+"]":a}).join(r?".":""):s}function c0(t){return k.isArray(t)&&!t.some(Vn)}const l0=k.toFlatObject(k,{},null,function(s){return/^is[A-Z]/.test(s)});function wr(t,s,r){if(!k.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,r=k.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,b){return!k.isUndefined(b[y])});const n=r.metaTokens,a=r.visitor||u,i=r.dots,o=r.indexes,d=(r.Blob||typeof Blob<"u"&&Blob)&&k.isSpecCompliantForm(s);if(!k.isFunction(a))throw new TypeError("visitor must be a function");function l(f){if(f===null)return"";if(k.isDate(f))return f.toISOString();if(k.isBoolean(f))return f.toString();if(!d&&k.isBlob(f))throw new B("Blob is not supported. Use a Buffer instead.");return k.isArrayBuffer(f)||k.isTypedArray(f)?d&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function u(f,y,b){let C=f;if(f&&!b&&typeof f=="object"){if(k.endsWith(y,"{}"))y=n?y:y.slice(0,-2),f=JSON.stringify(f);else if(k.isArray(f)&&c0(f)||(k.isFileList(f)||k.endsWith(y,"[]"))&&(C=k.toArray(f)))return y=ud(y),C.forEach(function(S,N){!(k.isUndefined(S)||S===null)&&s.append(o===!0?wo([y],N,i):o===null?y:y+"[]",l(S))}),!1}return Vn(f)?!0:(s.append(wo(b,y,i),l(f)),!1)}const h=[],m=Object.assign(l0,{defaultVisitor:u,convertValue:l,isVisitable:Vn});function g(f,y){if(!k.isUndefined(f)){if(h.indexOf(f)!==-1)throw Error("Circular reference detected in "+y.join("."));h.push(f),k.forEach(f,function(C,T){(!(k.isUndefined(C)||C===null)&&a.call(s,C,k.isString(T)?T.trim():T,y,m))===!0&&g(C,y?y.concat(T):[T])}),h.pop()}}if(!k.isObject(t))throw new TypeError("data must be an object");return g(t),s}function So(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return s[n]})}function Ba(t,s){this._pairs=[],t&&wr(t,this,s)}const hd=Ba.prototype;hd.append=function(s,r){this._pairs.push([s,r])};hd.toString=function(s){const r=s?function(n){return s.call(this,n,So)}:So;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function d0(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function md(t,s,r){if(!s)return t;const n=r&&r.encode||d0;k.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let i;if(a?i=a(s,r):i=k.isURLSearchParams(s)?s.toString():new Ba(s,r).toString(n),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class Co{constructor(){this.handlers=[]}use(s,r,n){return this.handlers.push({fulfilled:s,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){k.forEach(this.handlers,function(n){n!==null&&s(n)})}}const pd={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},u0=typeof URLSearchParams<"u"?URLSearchParams:Ba,h0=typeof FormData<"u"?FormData:null,m0=typeof Blob<"u"?Blob:null,p0={isBrowser:!0,classes:{URLSearchParams:u0,FormData:h0,Blob:m0},protocols:["http","https","file","blob","url","data"]},$a=typeof window<"u"&&typeof document<"u",Bn=typeof navigator=="object"&&navigator||void 0,f0=$a&&(!Bn||["ReactNative","NativeScript","NS"].indexOf(Bn.product)<0),x0=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",g0=$a&&window.location.href||"http://localhost",y0=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:$a,hasStandardBrowserEnv:f0,hasStandardBrowserWebWorkerEnv:x0,navigator:Bn,origin:g0},Symbol.toStringTag,{value:"Module"})),he={...y0,...p0};function b0(t,s){return wr(t,new he.classes.URLSearchParams,{visitor:function(r,n,a,i){return he.isNode&&k.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...s})}function j0(t){return k.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function v0(t){const s={},r=Object.keys(t);let n;const a=r.length;let i;for(n=0;n<a;n++)i=r[n],s[i]=t[i];return s}function fd(t){function s(r,n,a,i){let o=r[i++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),d=i>=r.length;return o=!o&&k.isArray(a)?a.length:o,d?(k.hasOwnProp(a,o)?a[o]=[a[o],n]:a[o]=n,!c):((!a[o]||!k.isObject(a[o]))&&(a[o]=[]),s(r,n,a[o],i)&&k.isArray(a[o])&&(a[o]=v0(a[o])),!c)}if(k.isFormData(t)&&k.isFunction(t.entries)){const r={};return k.forEachEntry(t,(n,a)=>{s(j0(n),a,r,0)}),r}return null}function N0(t,s,r){if(k.isString(t))try{return(s||JSON.parse)(t),k.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const Is={transitional:pd,adapter:["xhr","http","fetch"],transformRequest:[function(s,r){const n=r.getContentType()||"",a=n.indexOf("application/json")>-1,i=k.isObject(s);if(i&&k.isHTMLForm(s)&&(s=new FormData(s)),k.isFormData(s))return a?JSON.stringify(fd(s)):s;if(k.isArrayBuffer(s)||k.isBuffer(s)||k.isStream(s)||k.isFile(s)||k.isBlob(s)||k.isReadableStream(s))return s;if(k.isArrayBufferView(s))return s.buffer;if(k.isURLSearchParams(s))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let c;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return b0(s,this.formSerializer).toString();if((c=k.isFileList(s))||n.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return wr(c?{"files[]":s}:s,d&&new d,this.formSerializer)}}return i||a?(r.setContentType("application/json",!1),N0(s)):s}],transformResponse:[function(s){const r=this.transitional||Is.transitional,n=r&&r.forcedJSONParsing,a=this.responseType==="json";if(k.isResponse(s)||k.isReadableStream(s))return s;if(s&&k.isString(s)&&(n&&!this.responseType||a)){const o=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(s,this.parseReviver)}catch(c){if(o)throw c.name==="SyntaxError"?B.from(c,B.ERR_BAD_RESPONSE,this,null,this.response):c}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:he.classes.FormData,Blob:he.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};k.forEach(["delete","get","head","post","put","patch"],t=>{Is.headers[t]={}});const w0=k.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),S0=t=>{const s={};let r,n,a;return t&&t.split(`
`).forEach(function(o){a=o.indexOf(":"),r=o.substring(0,a).trim().toLowerCase(),n=o.substring(a+1).trim(),!(!r||s[r]&&w0[r])&&(r==="set-cookie"?s[r]?s[r].push(n):s[r]=[n]:s[r]=s[r]?s[r]+", "+n:n)}),s},ko=Symbol("internals");function Zt(t){return t&&String(t).trim().toLowerCase()}function Ys(t){return t===!1||t==null?t:k.isArray(t)?t.map(Ys):String(t)}function C0(t){const s=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)s[n[1]]=n[2];return s}const k0=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Kr(t,s,r,n,a){if(k.isFunction(n))return n.call(this,s,r);if(a&&(s=r),!!k.isString(s)){if(k.isString(n))return s.indexOf(n)!==-1;if(k.isRegExp(n))return n.test(s)}}function T0(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,r,n)=>r.toUpperCase()+n)}function A0(t,s){const r=k.toCamelCase(" "+s);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(a,i,o){return this[n].call(this,s,a,i,o)},configurable:!0})})}let be=class{constructor(s){s&&this.set(s)}set(s,r,n){const a=this;function i(c,d,l){const u=Zt(d);if(!u)throw new Error("header name must be a non-empty string");const h=k.findKey(a,u);(!h||a[h]===void 0||l===!0||l===void 0&&a[h]!==!1)&&(a[h||d]=Ys(c))}const o=(c,d)=>k.forEach(c,(l,u)=>i(l,u,d));if(k.isPlainObject(s)||s instanceof this.constructor)o(s,r);else if(k.isString(s)&&(s=s.trim())&&!k0(s))o(S0(s),r);else if(k.isObject(s)&&k.isIterable(s)){let c={},d,l;for(const u of s){if(!k.isArray(u))throw TypeError("Object iterator must return a key-value pair");c[l=u[0]]=(d=c[l])?k.isArray(d)?[...d,u[1]]:[d,u[1]]:u[1]}o(c,r)}else s!=null&&i(r,s,n);return this}get(s,r){if(s=Zt(s),s){const n=k.findKey(this,s);if(n){const a=this[n];if(!r)return a;if(r===!0)return C0(a);if(k.isFunction(r))return r.call(this,a,n);if(k.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,r){if(s=Zt(s),s){const n=k.findKey(this,s);return!!(n&&this[n]!==void 0&&(!r||Kr(this,this[n],n,r)))}return!1}delete(s,r){const n=this;let a=!1;function i(o){if(o=Zt(o),o){const c=k.findKey(n,o);c&&(!r||Kr(n,n[c],c,r))&&(delete n[c],a=!0)}}return k.isArray(s)?s.forEach(i):i(s),a}clear(s){const r=Object.keys(this);let n=r.length,a=!1;for(;n--;){const i=r[n];(!s||Kr(this,this[i],i,s,!0))&&(delete this[i],a=!0)}return a}normalize(s){const r=this,n={};return k.forEach(this,(a,i)=>{const o=k.findKey(n,i);if(o){r[o]=Ys(a),delete r[i];return}const c=s?T0(i):String(i).trim();c!==i&&delete r[i],r[c]=Ys(a),n[c]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const r=Object.create(null);return k.forEach(this,(n,a)=>{n!=null&&n!==!1&&(r[a]=s&&k.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,r])=>s+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...r){const n=new this(s);return r.forEach(a=>n.set(a)),n}static accessor(s){const n=(this[ko]=this[ko]={accessors:{}}).accessors,a=this.prototype;function i(o){const c=Zt(o);n[c]||(A0(a,o),n[c]=!0)}return k.isArray(s)?s.forEach(i):i(s),this}};be.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);k.reduceDescriptors(be.prototype,({value:t},s)=>{let r=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(n){this[r]=n}}});k.freezeMethods(be);function Gr(t,s){const r=this||Is,n=s||r,a=be.from(n.headers);let i=n.data;return k.forEach(t,function(c){i=c.call(r,i,a.normalize(),s?s.status:void 0)}),a.normalize(),i}function xd(t){return!!(t&&t.__CANCEL__)}function qt(t,s,r){B.call(this,t??"canceled",B.ERR_CANCELED,s,r),this.name="CanceledError"}k.inherits(qt,B,{__CANCEL__:!0});function gd(t,s,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):s(new B("Request failed with status code "+r.status,[B.ERR_BAD_REQUEST,B.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function E0(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function D0(t,s){t=t||10;const r=new Array(t),n=new Array(t);let a=0,i=0,o;return s=s!==void 0?s:1e3,function(d){const l=Date.now(),u=n[i];o||(o=l),r[a]=d,n[a]=l;let h=i,m=0;for(;h!==a;)m+=r[h++],h=h%t;if(a=(a+1)%t,a===i&&(i=(i+1)%t),l-o<s)return;const g=u&&l-u;return g?Math.round(m*1e3/g):void 0}}function P0(t,s){let r=0,n=1e3/s,a,i;const o=(l,u=Date.now())=>{r=u,a=null,i&&(clearTimeout(i),i=null),t(...l)};return[(...l)=>{const u=Date.now(),h=u-r;h>=n?o(l,u):(a=l,i||(i=setTimeout(()=>{i=null,o(a)},n-h)))},()=>a&&o(a)]}const ar=(t,s,r=3)=>{let n=0;const a=D0(50,250);return P0(i=>{const o=i.loaded,c=i.lengthComputable?i.total:void 0,d=o-n,l=a(d),u=o<=c;n=o;const h={loaded:o,total:c,progress:c?o/c:void 0,bytes:d,rate:l||void 0,estimated:l&&c&&u?(c-o)/l:void 0,event:i,lengthComputable:c!=null,[s?"download":"upload"]:!0};t(h)},r)},To=(t,s)=>{const r=t!=null;return[n=>s[0]({lengthComputable:r,total:t,loaded:n}),s[1]]},Ao=t=>(...s)=>k.asap(()=>t(...s)),I0=he.hasStandardBrowserEnv?((t,s)=>r=>(r=new URL(r,he.origin),t.protocol===r.protocol&&t.host===r.host&&(s||t.port===r.port)))(new URL(he.origin),he.navigator&&/(msie|trident)/i.test(he.navigator.userAgent)):()=>!0,R0=he.hasStandardBrowserEnv?{write(t,s,r,n,a,i){const o=[t+"="+encodeURIComponent(s)];k.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),k.isString(n)&&o.push("path="+n),k.isString(a)&&o.push("domain="+a),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const s=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function M0(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function O0(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function yd(t,s,r){let n=!M0(s);return t&&(n||r==!1)?O0(t,s):s}const Eo=t=>t instanceof be?{...t}:t;function jt(t,s){s=s||{};const r={};function n(l,u,h,m){return k.isPlainObject(l)&&k.isPlainObject(u)?k.merge.call({caseless:m},l,u):k.isPlainObject(u)?k.merge({},u):k.isArray(u)?u.slice():u}function a(l,u,h,m){if(k.isUndefined(u)){if(!k.isUndefined(l))return n(void 0,l,h,m)}else return n(l,u,h,m)}function i(l,u){if(!k.isUndefined(u))return n(void 0,u)}function o(l,u){if(k.isUndefined(u)){if(!k.isUndefined(l))return n(void 0,l)}else return n(void 0,u)}function c(l,u,h){if(h in s)return n(l,u);if(h in t)return n(void 0,l)}const d={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(l,u,h)=>a(Eo(l),Eo(u),h,!0)};return k.forEach(Object.keys({...t,...s}),function(u){const h=d[u]||a,m=h(t[u],s[u],u);k.isUndefined(m)&&h!==c||(r[u]=m)}),r}const bd=t=>{const s=jt({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:c}=s;if(s.headers=o=be.from(o),s.url=md(yd(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),k.isFormData(r)){if(he.hasStandardBrowserEnv||he.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(k.isFunction(r.getHeaders)){const d=r.getHeaders(),l=["content-type","content-length"];Object.entries(d).forEach(([u,h])=>{l.includes(u.toLowerCase())&&o.set(u,h)})}}if(he.hasStandardBrowserEnv&&(n&&k.isFunction(n)&&(n=n(s)),n||n!==!1&&I0(s.url))){const d=a&&i&&R0.read(i);d&&o.set(a,d)}return s},F0=typeof XMLHttpRequest<"u",L0=F0&&function(t){return new Promise(function(r,n){const a=bd(t);let i=a.data;const o=be.from(a.headers).normalize();let{responseType:c,onUploadProgress:d,onDownloadProgress:l}=a,u,h,m,g,f;function y(){g&&g(),f&&f(),a.cancelToken&&a.cancelToken.unsubscribe(u),a.signal&&a.signal.removeEventListener("abort",u)}let b=new XMLHttpRequest;b.open(a.method.toUpperCase(),a.url,!0),b.timeout=a.timeout;function C(){if(!b)return;const S=be.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),j={data:!c||c==="text"||c==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:S,config:t,request:b};gd(function(p){r(p),y()},function(p){n(p),y()},j),b=null}"onloadend"in b?b.onloadend=C:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(C)},b.onabort=function(){b&&(n(new B("Request aborted",B.ECONNABORTED,t,b)),b=null)},b.onerror=function(N){const j=N&&N.message?N.message:"Network Error",v=new B(j,B.ERR_NETWORK,t,b);v.event=N||null,n(v),b=null},b.ontimeout=function(){let N=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const j=a.transitional||pd;a.timeoutErrorMessage&&(N=a.timeoutErrorMessage),n(new B(N,j.clarifyTimeoutError?B.ETIMEDOUT:B.ECONNABORTED,t,b)),b=null},i===void 0&&o.setContentType(null),"setRequestHeader"in b&&k.forEach(o.toJSON(),function(N,j){b.setRequestHeader(j,N)}),k.isUndefined(a.withCredentials)||(b.withCredentials=!!a.withCredentials),c&&c!=="json"&&(b.responseType=a.responseType),l&&([m,f]=ar(l,!0),b.addEventListener("progress",m)),d&&b.upload&&([h,g]=ar(d),b.upload.addEventListener("progress",h),b.upload.addEventListener("loadend",g)),(a.cancelToken||a.signal)&&(u=S=>{b&&(n(!S||S.type?new qt(null,t,b):S),b.abort(),b=null)},a.cancelToken&&a.cancelToken.subscribe(u),a.signal&&(a.signal.aborted?u():a.signal.addEventListener("abort",u)));const T=E0(a.url);if(T&&he.protocols.indexOf(T)===-1){n(new B("Unsupported protocol "+T+":",B.ERR_BAD_REQUEST,t));return}b.send(i||null)})},_0=(t,s)=>{const{length:r}=t=t?t.filter(Boolean):[];if(s||r){let n=new AbortController,a;const i=function(l){if(!a){a=!0,c();const u=l instanceof Error?l:this.reason;n.abort(u instanceof B?u:new qt(u instanceof Error?u.message:u))}};let o=s&&setTimeout(()=>{o=null,i(new B(`timeout ${s} of ms exceeded`,B.ETIMEDOUT))},s);const c=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(l=>{l.unsubscribe?l.unsubscribe(i):l.removeEventListener("abort",i)}),t=null)};t.forEach(l=>l.addEventListener("abort",i));const{signal:d}=n;return d.unsubscribe=()=>k.asap(c),d}},z0=function*(t,s){let r=t.byteLength;if(r<s){yield t;return}let n=0,a;for(;n<r;)a=n+s,yield t.slice(n,a),n=a},V0=async function*(t,s){for await(const r of B0(t))yield*z0(r,s)},B0=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:r,value:n}=await s.read();if(r)break;yield n}}finally{await s.cancel()}},Do=(t,s,r,n)=>{const a=V0(t,s);let i=0,o,c=d=>{o||(o=!0,n&&n(d))};return new ReadableStream({async pull(d){try{const{done:l,value:u}=await a.next();if(l){c(),d.close();return}let h=u.byteLength;if(r){let m=i+=h;r(m)}d.enqueue(new Uint8Array(u))}catch(l){throw c(l),l}},cancel(d){return c(d),a.return()}},{highWaterMark:2})},Po=64*1024,{isFunction:Bs}=k,$0=(({Request:t,Response:s})=>({Request:t,Response:s}))(k.global),{ReadableStream:Io,TextEncoder:Ro}=k.global,Mo=(t,...s)=>{try{return!!t(...s)}catch{return!1}},U0=t=>{t=k.merge.call({skipUndefined:!0},$0,t);const{fetch:s,Request:r,Response:n}=t,a=s?Bs(s):typeof fetch=="function",i=Bs(r),o=Bs(n);if(!a)return!1;const c=a&&Bs(Io),d=a&&(typeof Ro=="function"?(f=>y=>f.encode(y))(new Ro):async f=>new Uint8Array(await new r(f).arrayBuffer())),l=i&&c&&Mo(()=>{let f=!1;const y=new r(he.origin,{body:new Io,method:"POST",get duplex(){return f=!0,"half"}}).headers.has("Content-Type");return f&&!y}),u=o&&c&&Mo(()=>k.isReadableStream(new n("").body)),h={stream:u&&(f=>f.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(f=>{!h[f]&&(h[f]=(y,b)=>{let C=y&&y[f];if(C)return C.call(y);throw new B(`Response type '${f}' is not supported`,B.ERR_NOT_SUPPORT,b)})});const m=async f=>{if(f==null)return 0;if(k.isBlob(f))return f.size;if(k.isSpecCompliantForm(f))return(await new r(he.origin,{method:"POST",body:f}).arrayBuffer()).byteLength;if(k.isArrayBufferView(f)||k.isArrayBuffer(f))return f.byteLength;if(k.isURLSearchParams(f)&&(f=f+""),k.isString(f))return(await d(f)).byteLength},g=async(f,y)=>{const b=k.toFiniteNumber(f.getContentLength());return b??m(y)};return async f=>{let{url:y,method:b,data:C,signal:T,cancelToken:S,timeout:N,onDownloadProgress:j,onUploadProgress:v,responseType:p,headers:w,withCredentials:P="same-origin",fetchOptions:A}=bd(f),M=s||fetch;p=p?(p+"").toLowerCase():"text";let V=_0([T,S&&S.toAbortSignal()],N),q=null;const I=V&&V.unsubscribe&&(()=>{V.unsubscribe()});let O;try{if(v&&l&&b!=="get"&&b!=="head"&&(O=await g(w,C))!==0){let Y=new r(y,{method:"POST",body:C,duplex:"half"}),fe;if(k.isFormData(C)&&(fe=Y.headers.get("content-type"))&&w.setContentType(fe),Y.body){const[Ye,Xe]=To(O,ar(Ao(v)));C=Do(Y.body,Po,Ye,Xe)}}k.isString(P)||(P=P?"include":"omit");const z=i&&"credentials"in r.prototype,E={...A,signal:V,method:b.toUpperCase(),headers:w.normalize().toJSON(),body:C,duplex:"half",credentials:z?P:void 0};q=i&&new r(y,E);let F=await(i?M(q,A):M(y,E));const H=u&&(p==="stream"||p==="response");if(u&&(j||H&&I)){const Y={};["status","statusText","headers"].forEach(kt=>{Y[kt]=F[kt]});const fe=k.toFiniteNumber(F.headers.get("content-length")),[Ye,Xe]=j&&To(fe,ar(Ao(j),!0))||[];F=new n(Do(F.body,Po,Ye,()=>{Xe&&Xe(),I&&I()}),Y)}p=p||"text";let Q=await h[k.findKey(h,p)||"text"](F,f);return!H&&I&&I(),await new Promise((Y,fe)=>{gd(Y,fe,{data:Q,headers:be.from(F.headers),status:F.status,statusText:F.statusText,config:f,request:q})})}catch(z){throw I&&I(),z&&z.name==="TypeError"&&/Load failed|fetch/i.test(z.message)?Object.assign(new B("Network Error",B.ERR_NETWORK,f,q),{cause:z.cause||z}):B.from(z,z&&z.code,f,q)}}},W0=new Map,jd=t=>{let s=t?t.env:{};const{fetch:r,Request:n,Response:a}=s,i=[n,a,r];let o=i.length,c=o,d,l,u=W0;for(;c--;)d=i[c],l=u.get(d),l===void 0&&u.set(d,l=c?new Map:U0(s)),u=l;return l};jd();const $n={http:o0,xhr:L0,fetch:{get:jd}};k.forEach($n,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const Oo=t=>`- ${t}`,H0=t=>k.isFunction(t)||t===null||t===!1,vd={getAdapter:(t,s)=>{t=k.isArray(t)?t:[t];const{length:r}=t;let n,a;const i={};for(let o=0;o<r;o++){n=t[o];let c;if(a=n,!H0(n)&&(a=$n[(c=String(n)).toLowerCase()],a===void 0))throw new B(`Unknown adapter '${c}'`);if(a&&(k.isFunction(a)||(a=a.get(s))))break;i[c||"#"+o]=a}if(!a){const o=Object.entries(i).map(([d,l])=>`adapter ${d} `+(l===!1?"is not supported by the environment":"is not available in the build"));let c=r?o.length>1?`since :
`+o.map(Oo).join(`
`):" "+Oo(o[0]):"as no adapter specified";throw new B("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return a},adapters:$n};function Jr(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new qt(null,t)}function Fo(t){return Jr(t),t.headers=be.from(t.headers),t.data=Gr.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),vd.getAdapter(t.adapter||Is.adapter,t)(t).then(function(n){return Jr(t),n.data=Gr.call(t,t.transformResponse,n),n.headers=be.from(n.headers),n},function(n){return xd(n)||(Jr(t),n&&n.response&&(n.response.data=Gr.call(t,t.transformResponse,n.response),n.response.headers=be.from(n.response.headers))),Promise.reject(n)})}const Nd="1.12.2",Sr={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{Sr[t]=function(n){return typeof n===t||"a"+(s<1?"n ":" ")+t}});const Lo={};Sr.transitional=function(s,r,n){function a(i,o){return"[Axios v"+Nd+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,c)=>{if(s===!1)throw new B(a(o," has been removed"+(r?" in "+r:"")),B.ERR_DEPRECATED);return r&&!Lo[o]&&(Lo[o]=!0,console.warn(a(o," has been deprecated since v"+r+" and will be removed in the near future"))),s?s(i,o,c):!0}};Sr.spelling=function(s){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${s}`),!0)};function q0(t,s,r){if(typeof t!="object")throw new B("options must be an object",B.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let a=n.length;for(;a-- >0;){const i=n[a],o=s[i];if(o){const c=t[i],d=c===void 0||o(c,i,t);if(d!==!0)throw new B("option "+i+" must be "+d,B.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new B("Unknown option "+i,B.ERR_BAD_OPTION)}}const Xs={assertOptions:q0,validators:Sr},Pe=Xs.validators;let yt=class{constructor(s){this.defaults=s||{},this.interceptors={request:new Co,response:new Co}}async request(s,r){try{return await this._request(s,r)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(s,r){typeof s=="string"?(r=r||{},r.url=s):r=s||{},r=jt(this.defaults,r);const{transitional:n,paramsSerializer:a,headers:i}=r;n!==void 0&&Xs.assertOptions(n,{silentJSONParsing:Pe.transitional(Pe.boolean),forcedJSONParsing:Pe.transitional(Pe.boolean),clarifyTimeoutError:Pe.transitional(Pe.boolean)},!1),a!=null&&(k.isFunction(a)?r.paramsSerializer={serialize:a}:Xs.assertOptions(a,{encode:Pe.function,serialize:Pe.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Xs.assertOptions(r,{baseUrl:Pe.spelling("baseURL"),withXsrfToken:Pe.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&k.merge(i.common,i[r.method]);i&&k.forEach(["delete","get","head","post","put","patch","common"],f=>{delete i[f]}),r.headers=be.concat(o,i);const c=[];let d=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(r)===!1||(d=d&&y.synchronous,c.unshift(y.fulfilled,y.rejected))});const l=[];this.interceptors.response.forEach(function(y){l.push(y.fulfilled,y.rejected)});let u,h=0,m;if(!d){const f=[Fo.bind(this),void 0];for(f.unshift(...c),f.push(...l),m=f.length,u=Promise.resolve(r);h<m;)u=u.then(f[h++],f[h++]);return u}m=c.length;let g=r;for(;h<m;){const f=c[h++],y=c[h++];try{g=f(g)}catch(b){y.call(this,b);break}}try{u=Fo.call(this,g)}catch(f){return Promise.reject(f)}for(h=0,m=l.length;h<m;)u=u.then(l[h++],l[h++]);return u}getUri(s){s=jt(this.defaults,s);const r=yd(s.baseURL,s.url,s.allowAbsoluteUrls);return md(r,s.params,s.paramsSerializer)}};k.forEach(["delete","get","head","options"],function(s){yt.prototype[s]=function(r,n){return this.request(jt(n||{},{method:s,url:r,data:(n||{}).data}))}});k.forEach(["post","put","patch"],function(s){function r(n){return function(i,o,c){return this.request(jt(c||{},{method:s,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}yt.prototype[s]=r(),yt.prototype[s+"Form"]=r(!0)});let K0=class wd{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(a=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](a);n._listeners=null}),this.promise.then=a=>{let i;const o=new Promise(c=>{n.subscribe(c),i=c}).then(a);return o.cancel=function(){n.unsubscribe(i)},o},s(function(i,o,c){n.reason||(n.reason=new qt(i,o,c),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const r=this._listeners.indexOf(s);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const s=new AbortController,r=n=>{s.abort(n)};return this.subscribe(r),s.signal.unsubscribe=()=>this.unsubscribe(r),s.signal}static source(){let s;return{token:new wd(function(a){s=a}),cancel:s}}};function G0(t){return function(r){return t.apply(null,r)}}function J0(t){return k.isObject(t)&&t.isAxiosError===!0}const Un={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Un).forEach(([t,s])=>{Un[s]=t});function Sd(t){const s=new yt(t),r=td(yt.prototype.request,s);return k.extend(r,yt.prototype,s,{allOwnKeys:!0}),k.extend(r,s,null,{allOwnKeys:!0}),r.create=function(a){return Sd(jt(t,a))},r}const se=Sd(Is);se.Axios=yt;se.CanceledError=qt;se.CancelToken=K0;se.isCancel=xd;se.VERSION=Nd;se.toFormData=wr;se.AxiosError=B;se.Cancel=se.CanceledError;se.all=function(s){return Promise.all(s)};se.spread=G0;se.isAxiosError=J0;se.mergeConfig=jt;se.AxiosHeaders=be;se.formToJSON=t=>fd(k.isHTMLForm(t)?new FormData(t):t);se.getAdapter=vd.getAdapter;se.HttpStatusCode=Un;se.default=se;const{Axios:Av,AxiosError:Ev,CanceledError:Dv,isCancel:Pv,CancelToken:Iv,VERSION:Rv,all:Mv,Cancel:Ov,isAxiosError:Fv,spread:Lv,toFormData:_v,AxiosHeaders:zv,HttpStatusCode:Vv,formToJSON:Bv,getAdapter:$v,mergeConfig:Uv}=se,Y0="http://localhost:5000/api",At="your_weather_api_key_here",_o="https://api.openweathermap.org/data/2.5";class X0{constructor(){this.api=se.create({baseURL:Y0,timeout:3e4,headers:{"Content-Type":"application/json"}}),this.api.interceptors.request.use(s=>{const r=localStorage.getItem("token");return r&&(s.headers.Authorization=`Bearer ${r}`),s},s=>Promise.reject(s)),this.api.interceptors.response.use(s=>s,s=>(s.response?.status===401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(s)))}async getCurrentWeather(s,r){try{console.log("Fetching real weather data for:",s,r);try{const n=await this.api.get("/weather/current",{params:{latitude:s,longitude:r}});return console.log("Backend weather API response:",n.data),n.data}catch{if(console.log("Backend weather API unavailable, trying direct OpenWeatherMap API"),At&&At!=="your_openweathermap_api_key"){const a=await fetch(`${_o}/weather?lat=${s}&lon=${r}&appid=${At}&units=metric`);if(a.ok){const i=await a.json();return{success:!0,data:{temperature:i.main.temp,humidity:i.main.humidity,windSpeed:i.wind?.speed||0,pressure:i.main.pressure,visibility:i.visibility,weather:i.weather[0]?.main||"Clear",description:i.weather[0]?.description||"clear sky",timestamp:new Date().toISOString(),location:i.name,country:i.sys.country}}}}throw new Error("No weather data available")}}catch(n){throw console.error("All weather APIs failed:",n.message),new Error("Unable to fetch weather data. Please check your API configuration.")}}async getWeatherForecast(s,r,n=7){try{console.log("Fetching real forecast data for:",s,r,n);try{const a=await this.api.get("/weather/forecast",{params:{latitude:s,longitude:r,days:n}});return console.log("Backend forecast API response:",a.data),a.data}catch{if(console.log("Backend forecast API unavailable, trying direct OpenWeatherMap API"),At&&At!=="your_openweathermap_api_key"){const i=await fetch(`${_o}/forecast?lat=${s}&lon=${r}&appid=${At}&units=metric&cnt=${Math.min(n*8,40)}`);if(i.ok){const o=await i.json(),c=[],d={};return o.list.forEach(l=>{const u=new Date(l.dt*1e3).toDateString();d[u]||(d[u]={temps:[],weather:l.weather[0],precipitation:l.rain?.["3h"]||0,date:l.dt*1e3}),d[u].temps.push(l.main.temp)}),Object.values(d).slice(0,n).forEach(l=>{c.push({date:new Date(l.date).toISOString(),tempMax:Math.round(Math.max(...l.temps)),tempMin:Math.round(Math.min(...l.temps)),weather:l.weather.main,description:l.weather.description,precipitation:l.precipitation})}),{success:!0,data:{forecasts:c}}}}throw new Error("No forecast data available")}}catch(a){throw console.error("All forecast APIs failed:",a.message),new Error("Unable to fetch forecast data. Please check your API configuration.")}}async getWeatherAlerts(s,r){return(await this.api.get("/weather/alerts",{params:{lat:s,lon:r}})).data}async getFarmingWeatherAdvisory(s,r,n){return(await this.api.get("/weather/farming-advisory",{params:{lat:s,lon:r,cropType:n}})).data}async getPersonalizedAdvisory(s){try{return(await this.api.get("/advisory/personalized",{params:s})).data}catch{return{success:!0,data:{advisory:{title:"Current Crop Advisory for "+(s.cropType||"Wheat"),recommendations:["Monitor soil moisture levels regularly","Apply fertilizer according to growth stage","Check for pest activity in the morning","Ensure proper drainage in fields"],priority:"medium",validUntil:new Date(Date.now()+10080*60*1e3).toISOString()}}}}}async getCropRecommendations(s){return(await this.api.get("/advisory/crop-recommendations",{params:s})).data}async getFertilizerRecommendations(s){return(await this.api.post("/advisory/fertilizer-recommendations",s)).data}async saveAdvisoryFeedback(s){return(await this.api.post("/advisory/feedback",s)).data}async getCurrentMarketPrices(s){return(await this.api.get("/market/prices",{params:s})).data}async getMarketTrends(s){return(await this.api.get("/market/trends",{params:s})).data}async getPricePredictions(s){return(await this.api.get("/market/predictions",{params:s})).data}async setPriceAlert(s){return(await this.api.post("/market/price-alert",s)).data}async detectPest(s,r){const n=new FormData;return n.append("pestImage",s),n.append("cropType",r),(await this.api.post("/pest/detect",n,{headers:{"Content-Type":"multipart/form-data"}})).data}async getPestInfo(s){return(await this.api.get("/pest/info",{params:s})).data}async getTreatmentRecommendations(s){return(await this.api.get("/pest/treatment",{params:s})).data}async reportPestOutbreak(s){return(await this.api.post("/pest/report-outbreak",s)).data}async getIrrigationSchedule(s){return(await this.api.get(`/irrigation/schedule/${s}`)).data}async getSoilMoisture(s){return(await this.api.get(`/irrigation/soil-moisture/${s}`)).data}async updateIrrigationSettings(s,r){return(await this.api.put(`/irrigation/settings/${s}`,r)).data}async triggerIrrigation(s,r){return(await this.api.post(`/irrigation/trigger/${s}`,{duration:r})).data}async getIrrigationHistory(s){return(await this.api.get("/irrigation/history",{params:s})).data}async bookConsultation(s){return(await this.api.post("/consultation/book",s)).data}async getUserConsultations(s){return(await this.api.get(`/consultation/user/${s}`)).data}async getAvailableExperts(s){return(await this.api.get("/consultation/experts",{params:s})).data}async startConsultation(s){return(await this.api.post(`/consultation/start/${s}`)).data}async endConsultation(s){return(await this.api.post(`/consultation/end/${s}`)).data}async getSignalingToken(s){return(await this.api.post(`/consultation/signaling-token/${s}`)).data}async sendSignalingMessage(s,r){return(await this.api.post(`/consultation/signaling/${s}`,{message:r})).data}async sendChatMessage(s,r={}){return(await this.api.post("/ai/chat",{message:s,context:r,timestamp:new Date().toISOString()})).data}async getChatHistory(s,r=50){return(await this.api.get(`/ai/chat/history/${s}`,{params:{limit:r}})).data}async analyzeCropImage(s,r){const n=new FormData;return n.append("image",s),n.append("cropType",r),(await this.api.post("/ai/analyze-crop",n,{headers:{"Content-Type":"multipart/form-data"}})).data}async getAIRecommendations(s){return(await this.api.post("/ai/recommendations",s)).data}async createNotification(s){try{return(await this.api.post("/notifications",s)).data}catch(r){throw console.error("Create notification error:",r),r}}async getUserNotifications(s,r={}){try{const n={page:r.page||1,limit:r.limit||20,type:r.type,read:r.read,...r};return(await this.api.get(`/notifications/user/${s}`,{params:n})).data}catch(n){return console.error("Get user notifications error:",n),{notifications:[],pagination:{},success:!1}}}async markNotificationRead(s){try{return(await this.api.patch(`/notifications/${s}/read`)).data}catch(r){throw console.error("Mark notification read error:",r),r}}async markNotificationsRead(s){try{return(await this.api.patch("/notifications/bulk-read",{notificationIds:s})).data}catch(r){throw console.error("Bulk mark read error:",r),r}}async deleteNotification(s){try{return(await this.api.delete(`/notifications/${s}`)).data}catch(r){throw console.error("Delete notification error:",r),r}}async getNotificationPreferences(s){try{return(await this.api.get(`/notifications/preferences/${s}`)).data}catch(r){return console.error("Get notification preferences error:",r),{preferences:{email:!0,sms:!1,push:!0,categories:{weather:!0,advisory:!0,market:!0,pest:!0,irrigation:!0}}}}}async updateNotificationPreferences(s,r){try{return(await this.api.put(`/notifications/preferences/${s}`,{preferences:r})).data}catch(n){throw console.error("Update notification preferences error:",n),n}}async registerFCMToken(s,r,n={}){try{return(await this.api.post("/notifications/register-token",{userId:s,token:r,deviceInfo:{platform:n.platform||"web",version:n.version||"1.0.0",...n}})).data}catch(a){throw console.error("Register FCM token error:",a),a}}async unregisterFCMToken(s,r){try{return(await this.api.delete("/notifications/unregister-token",{data:{userId:s,token:r}})).data}catch(n){throw console.error("Unregister FCM token error:",n),n}}async sendTestNotification(s,r="push"){try{return(await this.api.post("/notifications/test",{userId:s,type:r})).data}catch(n){throw console.error("Send test notification error:",n),n}}async getNotificationAnalytics(s,r={}){try{return(await this.api.get(`/notifications/analytics/${s}`,{params:{startDate:r.startDate,endDate:r.endDate,type:r.type,...r}})).data}catch(n){return console.error("Get notification analytics error:",n),{analytics:{totalSent:0,totalRead:0,byType:{},byCategory:{},readRate:0,deliveryRate:0}}}}async scheduleNotification(s,r){try{return(await this.api.post("/notifications/schedule",{...s,scheduleTime:r.toISOString()})).data}catch(n){throw console.error("Schedule notification error:",n),n}}async getScheduledNotifications(s){try{return(await this.api.get(`/notifications/scheduled/${s}`)).data}catch(r){return console.error("Get scheduled notifications error:",r),{notifications:[]}}}async cancelScheduledNotification(s){try{return(await this.api.delete(`/notifications/scheduled/${s}`)).data}catch(r){throw console.error("Cancel scheduled notification error:",r),r}}async getNotificationTemplates(s=null){try{const r=s?{type:s}:{};return(await this.api.get("/notifications/templates",{params:r})).data}catch(r){return console.error("Get notification templates error:",r),{templates:[]}}}async chatWithBot(s){return(await this.api.post("/chatbot/chat",s)).data}async getChatHistory(s){return(await this.api.get("/chatbot/history",{params:s})).data}async getSuggestedQuestions(s){return(await this.api.get("/chatbot/suggestions",{params:s})).data}async chatWithAIAssistant(s,r=null,n={}){try{return(await this.api.post("/advisory/chat",{message:s,userId:r,context:n})).data}catch(a){return console.error("AI Chat error:",a),{success:!1,data:{response:"I apologize, but I'm having trouble responding right now. Please try again in a moment.",timestamp:new Date().toISOString(),confidence:0,suggestions:["Try rephrasing your question","Check basic crop information"]}}}}async analyzeWithAI(s,r=[]){try{return(await this.api.post("/advisory/pest-disease-analysis",{symptoms:s,images:r})).data}catch(n){return console.error("AI Pest/Disease analysis error:",n),{success:!1,data:{identification:"Unable to identify specific pest/disease. Please consult local agricultural expert.",severity:"unknown",treatment:"Inspect plants carefully and consider contacting agricultural extension services.",management:"Implement general IPM practices and monitor field regularly.",confidence:.1,timestamp:new Date().toISOString()}}}}async generateAICropPlan({location:s,soilType:r,climate:n,budget:a,preferences:i}){try{return(await this.api.post("/advisory/crop-plan",{location:s,soilType:r,climate:n,budget:a,preferences:i})).data}catch(o){return console.error("AI Crop planning error:",o),{success:!1,data:{recommendedCrops:["wheat","rice","vegetables"],timeline:"Consult local agricultural calendar",resources:"Contact local agricultural suppliers",fullAnalysis:"AI analysis temporarily unavailable. Please consult local agricultural extension services.",confidence:.1,timestamp:new Date().toISOString()}}}}async getAIWeatherInsights(s,r){try{return(await this.api.post("/advisory/weather-insights",{weatherData:s,cropInfo:r})).data}catch(n){return console.error("AI Weather insights error:",n),{success:!1,data:{insights:"Weather analysis temporarily unavailable. Monitor local weather forecasts and adjust farming activities accordingly.",priority:"medium",actions:["Check weather forecast regularly","Adjust irrigation based on rainfall","Protect crops from extreme weather"],confidence:.1,timestamp:new Date().toISOString()}}}}async getAIMarketInsights(s,r){try{return(await this.api.post("/advisory/market-insights",{crops:s,location:r})).data}catch(n){return console.error("AI Market insights error:",n),{success:!1,data:{analysis:"Market analysis temporarily unavailable. Please check local market prices and consult with local traders.",trends:"Contact local agricultural market committees for current trends",opportunities:["Explore local markets","Consider value addition"],risks:["Price volatility","Storage and transportation"],recommendations:["Monitor local market prices","Diversify crop portfolio","Build relationships with buyers"],confidence:.1,timestamp:new Date().toISOString()}}}}async getAIInsights({userId:s,crop:r,growthStage:n,issues:a}){try{return(await this.api.post("/advisory/ai-insights",{userId:s,crop:r,growthStage:n,issues:a})).data}catch(i){return console.error("AI General insights error:",i),{success:!1,data:{insights:"Unable to generate AI insights at this time. Please check your connection and try again.",confidence:0,source:"fallback",timestamp:new Date().toISOString()}}}}async getBatchAIAnalysis({weatherData:s,cropInfo:r,marketData:n,issues:a=[]}){try{const[i,o,c]=await Promise.allSettled([this.getAIWeatherInsights(s,r),this.getAIMarketInsights(r?.crops||[],r?.location),this.getAIInsights({crop:r,issues:a})]);return{success:!0,data:{weather:i.status==="fulfilled"?i.value.data:null,market:o.status==="fulfilled"?o.value.data:null,general:c.status==="fulfilled"?c.value.data:null,timestamp:new Date().toISOString()}}}catch(i){return console.error("Batch AI analysis error:",i),{success:!1,message:"Failed to get comprehensive AI analysis",data:null}}}async getSmartRecommendations(s){try{const r=JSON.parse(localStorage.getItem("user")||"{}"),n=r.location||{latitude:28.6139,longitude:77.209},[a,i]=await Promise.allSettled([this.getCurrentWeather(n.latitude,n.longitude),this.getAIInsights({userId:s,crop:r.currentCrop,growthStage:r.currentGrowthStage})]);return{success:!0,data:{weatherBased:a.status==="fulfilled"?a.value.data:null,aiBased:i.status==="fulfilled"?i.value.data:null,priority:"high",timestamp:new Date().toISOString()}}}catch(r){return console.error("Smart recommendations error:",r),{success:!1,data:{recommendations:["Monitor crop health regularly","Check weather updates","Maintain irrigation schedule"],priority:"medium",timestamp:new Date().toISOString()}}}}}const $=new X0,Z0=()=>{const[t,s]=x.useState({weather:null,advisory:null,alerts:[],recentActivity:[],quickStats:{},upcomingTasks:[],marketSummary:null}),[r,n]=x.useState(!0),[a,i]=x.useState(null);x.useEffect(()=>{const l=localStorage.getItem("user");l&&i(JSON.parse(l)),o()},[]);const o=async()=>{try{n(!0);const h=await $.getCurrentWeather(28.6139,77.209),m=await $.getPersonalizedAdvisory({userId:"demo-user",cropType:"wheat",growthStage:"flowering"});s({weather:h.data,advisory:m.data?.advisory,alerts:[{id:1,type:"weather",severity:"high",title:"Heavy Rain Alert",message:"Heavy rainfall expected tomorrow. Secure crops and check drainage.",time:"2 hours ago"},{id:2,type:"pest",severity:"medium",title:"Pest Outbreak Nearby",message:"Aphid infestation reported 5km away. Monitor your crops.",time:"6 hours ago"}],recentActivity:[{id:1,type:"irrigation",message:"Automated irrigation completed for Field A",time:"30 minutes ago",status:"completed"},{id:2,type:"consultation",message:"Consultation with Dr. Priya scheduled for tomorrow",time:"2 hours ago",status:"scheduled"},{id:3,type:"market",message:"Wheat prices increased by 3% in local market",time:"5 hours ago",status:"info"}],quickStats:{temperature:h.data?.temperature||25,humidity:h.data?.humidity||65,soilMoisture:45,cropHealth:85,totalFields:3,activeDevices:5,todaysIrrigation:2.5,weeklyConsultations:1},upcomingTasks:[{id:1,task:"Apply fertilizer to Field B",due:"Today",priority:"high"},{id:2,task:"Pest inspection - Field A",due:"Tomorrow",priority:"medium"},{id:3,task:"Consultation with Dr. Priya",due:"Dec 18",priority:"low"}],marketSummary:{wheat:{price:2150,change:"+3.2%",trend:"up"},rice:{price:1850,change:"-1.5%",trend:"down"},cotton:{price:5200,change:"+5.1%",trend:"up"}}})}catch(l){console.error("Failed to fetch dashboard data:",l)}finally{n(!1)}};if(r)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-green-600"})});const c=({icon:l,label:u,value:h,unit:m,color:g="text-blue-600",bgColor:f="bg-blue-100"})=>e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-3 rounded-full ${f}`,children:e.jsx(l,{className:`h-6 w-6 ${g}`})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:u}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:[h,m&&e.jsx("span",{className:"text-sm text-gray-500 ml-1",children:m})]})]})]})}),d=({activity:l})=>{const u=m=>{switch(m){case"irrigation":return e.jsx(te,{className:"text-blue-500",size:16});case"consultation":return e.jsx(ta,{className:"text-purple-500",size:16});case"market":return e.jsx(ve,{className:"text-green-500",size:16});case"pest":return e.jsx(Ue,{className:"text-red-500",size:16});default:return e.jsx(Ae,{className:"text-gray-500",size:16})}},h=m=>{switch(m){case"completed":return"bg-green-100 text-green-800";case"scheduled":return"bg-blue-100 text-blue-800";case"info":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 p-1",children:u(l.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-gray-900",children:l.message}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("p",{className:"text-xs text-gray-500",children:l.time}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${h(l.status)}`,children:l.status})]})]})]})};return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome back, ",a?.name||"Farmer","! 👋"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Here's what's happening on your farm today."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(c,{icon:ls,label:"Temperature",value:t.quickStats.temperature,unit:"°C",color:"text-orange-600",bgColor:"bg-orange-100"}),e.jsx(c,{icon:te,label:"Soil Moisture",value:t.quickStats.soilMoisture,unit:"%",color:"text-blue-600",bgColor:"bg-blue-100"}),e.jsx(c,{icon:G,label:"Crop Health",value:t.quickStats.cropHealth,unit:"%",color:"text-green-600",bgColor:"bg-green-100"}),e.jsx(c,{icon:Ce,label:"Humidity",value:t.quickStats.humidity,unit:"%",color:"text-purple-600",bgColor:"bg-purple-100"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsx(vg,{weather:t.weather,loading:!1}),e.jsx(ed,{advisory:t.advisory,loading:!1}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Market Summary"}),e.jsx("button",{className:"text-green-600 hover:text-green-800 text-sm font-medium",children:"View Details →"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(t.marketSummary||{}).map(([l,u])=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-900 capitalize",children:l}),e.jsx("span",{className:`text-sm font-medium ${u.trend==="up"?"text-green-600":"text-red-600"}`,children:u.change})]}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:["₹",u.price,e.jsx("span",{className:"text-sm text-gray-500 font-normal",children:"/quintal"})]})]},l))})]})})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Active Alerts"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[t.alerts.length," alerts"]})]}),e.jsx("div",{className:"space-y-3",children:t.alerts.length>0?t.alerts.map(l=>e.jsx("div",{className:`p-3 rounded-lg border-l-4 ${l.severity==="high"?"bg-red-50 border-red-400":"bg-yellow-50 border-yellow-400"}`,children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(je,{className:l.severity==="high"?"text-red-600":"text-yellow-600",size:16}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-sm font-medium ${l.severity==="high"?"text-red-800":"text-yellow-800"}`,children:l.title}),e.jsx("p",{className:`text-xs mt-1 ${l.severity==="high"?"text-red-700":"text-yellow-700"}`,children:l.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:l.time})]})]})},l.id)):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(G,{className:"mx-auto h-12 w-12 text-green-400"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No active alerts"})]})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Upcoming Tasks"}),e.jsx(Ee,{className:"text-gray-400",size:20})]}),e.jsx("div",{className:"space-y-3",children:t.upcomingTasks.map(l=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${l.priority==="high"?"bg-red-400":l.priority==="medium"?"bg-yellow-400":"bg-green-400"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:l.task}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Due: ",l.due]})]})]},l.id))}),e.jsx("button",{className:"w-full mt-4 text-sm text-green-600 hover:text-green-800 font-medium",children:"View All Tasks →"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),e.jsx("div",{className:"space-y-4",children:t.recentActivity.map(l=>e.jsx(d,{activity:l},l.id))}),e.jsx("button",{className:"w-full mt-4 text-sm text-blue-600 hover:text-blue-800 font-medium",children:"View All Activity →"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{className:"w-full flex items-center space-x-3 p-3 text-left bg-green-50 rounded-lg hover:bg-green-100 transition-colors",children:[e.jsx(Ue,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-800",children:"Detect Pest Issue"})]}),e.jsxs("button",{className:"w-full flex items-center space-x-3 p-3 text-left bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:[e.jsx(te,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Schedule Irrigation"})]}),e.jsxs("button",{className:"w-full flex items-center space-x-3 p-3 text-left bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors",children:[e.jsx(Ve,{className:"h-5 w-5 text-purple-600"}),e.jsx("span",{className:"text-sm font-medium text-purple-800",children:"Ask AI Assistant"})]}),e.jsxs("button",{className:"w-full flex items-center space-x-3 p-3 text-left bg-yellow-50 rounded-lg hover:bg-yellow-100 transition-colors",children:[e.jsx(Ns,{className:"h-5 w-5 text-yellow-600"}),e.jsx("span",{className:"text-sm font-medium text-yellow-800",children:"Check Market Prices"})]})]})]})})]})]})]})};class Q0{constructor(){this.defaultLocation={latitude:28.6139,longitude:77.209,city:"New Delhi",country:"India"}}async getCurrentLocation(){try{if(!navigator.geolocation)return console.warn("Geolocation not supported, using default location"),this.defaultLocation;const s=await new Promise((i,o)=>{navigator.geolocation.getCurrentPosition(i,o,{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})}),{latitude:r,longitude:n}=s.coords,a=await this.reverseGeocode(r,n);return{latitude:r,longitude:n,city:a.city,country:a.country,state:a.state,accuracy:s.coords.accuracy}}catch(s){console.error("Error getting current location:",s);try{return await this.getLocationFromIP()}catch{return console.warn("IP location failed, using default location"),this.defaultLocation}}}async reverseGeocode(s,r){try{const n=await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${s}&longitude=${r}&localityLanguage=en`);if(!n.ok)throw new Error("Geocoding failed");const a=await n.json();return{city:a.city||a.locality||"Unknown",state:a.principalSubdivision||"Unknown",country:a.countryName||"Unknown",countryCode:a.countryCode||"IN"}}catch(n){return console.error("Reverse geocoding failed:",n),{city:"Unknown",state:"Unknown",country:"India",countryCode:"IN"}}}async getLocationFromIP(){try{const s=await fetch("https://ipapi.co/json/");if(!s.ok)throw new Error("IP geolocation failed");const r=await s.json();return{latitude:r.latitude,longitude:r.longitude,city:r.city,state:r.region,country:r.country_name,countryCode:r.country_code}}catch(s){throw console.error("IP geolocation failed:",s),s}}async requestLocationPermission(){try{const s=await navigator.permissions.query({name:"geolocation"});if(s.state==="denied")throw new Error("Location permission denied");return s.state}catch(s){return console.error("Error checking location permission:",s),"unknown"}}getCachedLocation(){try{const s=localStorage.getItem("user_location");if(s){const r=JSON.parse(s),n=localStorage.getItem("user_location_timestamp"),a=Date.now()-300*1e3;if(n&&parseInt(n)>a)return r}return null}catch(s){return console.error("Error getting cached location:",s),null}}cacheLocation(s){try{localStorage.setItem("user_location",JSON.stringify(s)),localStorage.setItem("user_location_timestamp",Date.now().toString())}catch(r){console.error("Error caching location:",r)}}async getLocationWithCaching(){const s=this.getCachedLocation();if(s)return console.log("Using cached location:",s),s;const r=await this.getCurrentLocation();return this.cacheLocation(r),r}}const Wn=new Q0,ey=()=>{const[t,s]=x.useState(null),[r,n]=x.useState([]),[a,i]=x.useState([]),[o,c]=x.useState(!0),[d,l]=x.useState(null),[u,h]=x.useState({city:"Loading...",country:""}),[m,g]=x.useState(0),[f,y]=x.useState(!1);x.useEffect(()=>{b()},[]),x.useEffect(()=>{d&&C()},[d]);const b=async()=>{try{y(!0),console.log("Getting user location...");const p=await Wn.getLocationWithCaching();console.log("User location obtained:",p),l({lat:p.latitude,lon:p.longitude}),h({city:p.city||"Unknown",state:p.state||"",country:p.country||"India"})}catch(p){console.error("Failed to get location, using default:",p),l({lat:28.6139,lon:77.209}),h({city:"New Delhi",state:"Delhi",country:"India"})}finally{y(!1)}},C=async()=>{try{c(!0),console.log("Fetching weather data for location:",d);const p=await $.getCurrentWeather(d.lat,d.lon);console.log("Current weather response:",p),s(p.data);const w=await $.getWeatherForecast(d.lat,d.lon,7);console.log("Forecast response:",w),n(w.data.forecasts||[]);const P=await $.getWeatherAlerts(d.lat,d.lon);console.log("Alerts response:",P),i(P.data||[])}catch(p){console.error("Failed to fetch weather data:",p)}finally{c(!1)}},T=async()=>{localStorage.removeItem("user_location"),localStorage.removeItem("user_location_timestamp"),await b()},S=(p,w=24)=>{switch(p?.toLowerCase()){case"clear":return e.jsx(Lt,{size:w,className:"text-yellow-500"});case"clouds":return e.jsx(Ce,{size:w,className:"text-gray-500"});case"rain":case"drizzle":return e.jsx(cs,{size:w,className:"text-blue-500"});default:return e.jsx(Ce,{size:w,className:"text-gray-500"})}},N=p=>p>=35?"text-red-600":p>=25?"text-orange-500":p>=15?"text-green-600":"text-blue-600",j=p=>new Date(p).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"}),v=p=>new Date(p).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return o?e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx("div",{className:"h-64 bg-gray-200 rounded-lg"}),e.jsx("div",{className:"h-48 bg-gray-200 rounded-lg"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-32 bg-gray-200 rounded-lg"}),e.jsx("div",{className:"h-48 bg-gray-200 rounded-lg"})]})]})]})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Weather Forecast"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2 text-gray-600",children:[e.jsx(Je,{size:16}),e.jsxs("span",{children:[u.city,u.state?`, ${u.state}`:"",", ",u.country]}),e.jsx("span",{className:"text-gray-400",children:"•"}),e.jsxs("span",{children:["Last updated: ",t?v(t.timestamp):"--"]}),f&&e.jsxs("span",{className:"text-blue-600 flex items-center space-x-1",children:[e.jsx(ei,{size:14,className:"animate-spin"}),e.jsx("span",{children:"Getting location..."})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:T,className:"flex items-center space-x-2 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",disabled:f,children:[e.jsx(ei,{size:16}),e.jsx("span",{children:"Update Location"})]}),e.jsxs("button",{onClick:C,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",disabled:o||!d,children:[e.jsx(ft,{size:16,className:o?"animate-spin":""}),e.jsx("span",{children:"Refresh"})]})]})]}),a.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Weather Alerts"}),e.jsx("div",{className:"space-y-3",children:a.map((p,w)=>e.jsx("div",{className:`p-4 rounded-lg border-l-4 ${p.severity==="critical"?"bg-red-50 border-red-400":p.severity==="high"?"bg-orange-50 border-orange-400":"bg-yellow-50 border-yellow-400"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(je,{className:p.severity==="critical"?"text-red-600":p.severity==="high"?"text-orange-600":"text-yellow-600",size:20}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold ${p.severity==="critical"?"text-red-800":p.severity==="high"?"text-orange-800":"text-yellow-800"}`,children:p.type.replace("_"," ").toUpperCase()}),e.jsx("p",{className:`text-sm mt-1 ${p.severity==="critical"?"text-red-700":p.severity==="high"?"text-orange-700":"text-yellow-700"}`,children:p.message}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Valid until: ",new Date(p.endTime).toLocaleString()]})]})]})},w))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-lg shadow-lg p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Current Weather"}),e.jsxs("div",{className:"text-right text-sm text-gray-600",children:[e.jsx("p",{children:j(new Date().toISOString())}),e.jsx("p",{children:v(new Date().toISOString())})]})]}),t&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("div",{className:"flex-shrink-0",children:S(t.weather,80)}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-baseline space-x-2",children:[e.jsx("span",{className:`text-6xl font-bold ${N(t.temperature)}`,children:Math.round(t.temperature)}),e.jsx("span",{className:"text-2xl text-gray-500",children:"°C"})]}),e.jsx("p",{className:"text-xl text-gray-700 capitalize font-medium mt-2",children:t.description}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Feels like ",Math.round(t.temperature+2),"°C"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white/70 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(te,{className:"text-blue-500",size:20}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Humidity"})]}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[t.humidity,"%"]})]}),e.jsxs("div",{className:"bg-white/70 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Ft,{className:"text-gray-600",size:20}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Wind"})]}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[t.windSpeed," km/h"]})]}),e.jsxs("div",{className:"bg-white/70 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(We,{className:"text-purple-500",size:20}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Visibility"})]}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[Math.round(t.visibility/1e3)," km"]})]}),e.jsxs("div",{className:"bg-white/70 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(ur,{className:"text-green-600",size:20}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Pressure"})]}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[t.pressure," hPa"]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"7-Day Forecast"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-4",children:r.map((p,w)=>e.jsxs("button",{onClick:()=>g(w),className:`p-4 rounded-lg text-center transition-all ${m===w?"bg-blue-100 border-2 border-blue-500":"bg-gray-50 hover:bg-gray-100 border-2 border-transparent"}`,children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:w===0?"Today":new Date(p.date).toLocaleDateString("en-US",{weekday:"short"})}),e.jsx("div",{className:"flex justify-center mb-2",children:S(p.weather,24)}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[Math.round(p.tempMax),"°"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[Math.round(p.tempMin),"°"]})]}),p.precipitation>0&&e.jsxs("p",{className:"text-xs text-blue-600 mt-2",children:[Math.round(p.precipitation),"mm"]})]},w))}),r[m]&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:m===0?"Today":j(r[m].date)}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"High/Low"}),e.jsxs("p",{className:"font-semibold",children:[Math.round(r[m].tempMax),"° / ",Math.round(r[m].tempMin),"°"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Humidity"}),e.jsxs("p",{className:"font-semibold",children:[Math.round(r[m].humidity),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Wind"}),e.jsxs("p",{className:"font-semibold",children:[Math.round(r[m].windSpeed)," km/h"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Precipitation"}),e.jsxs("p",{className:"font-semibold",children:[Math.round(r[m].precipitation),"mm"]})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Farming Weather Advisory"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0 w-2 h-2 bg-green-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-800",children:"Favorable for Field Operations"}),e.jsx("p",{className:"text-green-700 text-sm mt-1",children:"Current weather conditions are suitable for most farming activities including spraying and harvesting."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-yellow-50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0 w-2 h-2 bg-yellow-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-yellow-800",children:"Irrigation Recommendation"}),e.jsx("p",{className:"text-yellow-700 text-sm mt-1",children:"Consider light irrigation for sensitive crops due to low humidity levels. Best time: early morning or evening."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0 w-2 h-2 bg-blue-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-800",children:"Weekly Outlook"}),e.jsx("p",{className:"text-blue-700 text-sm mt-1",children:"Rain expected mid-week. Plan harvest activities for early week and postpone spraying operations."})]})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Today's Summary"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Sunrise"}),e.jsx("span",{className:"font-medium",children:"6:45 AM"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Sunset"}),e.jsx("span",{className:"font-medium",children:"5:30 PM"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"UV Index"}),e.jsx("span",{className:"font-medium",children:"6 (High)"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Moon Phase"}),e.jsx("span",{className:"font-medium",children:"Waxing Crescent"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Air Quality"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 mx-auto bg-green-100 rounded-full flex items-center justify-center mb-3",children:e.jsx("span",{className:"text-2xl font-bold text-green-600",children:"45"})}),e.jsx("p",{className:"font-medium text-green-600",children:"Good"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Air quality is satisfactory"})]}),e.jsxs("div",{className:"mt-4 space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"PM2.5"}),e.jsx("span",{children:"12 μg/m³"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"PM10"}),e.jsx("span",{children:"25 μg/m³"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"O3"}),e.jsx("span",{children:"68 μg/m³"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Compare to Last Year"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Temperature"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ve,{className:"text-red-500",size:16}),e.jsx("span",{className:"text-red-600 font-medium",children:"+3°C"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Rainfall"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ds,{className:"text-blue-500",size:16}),e.jsx("span",{className:"text-blue-600 font-medium",children:"-15mm"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Humidity"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ds,{className:"text-green-500",size:16}),e.jsx("span",{className:"text-green-600 font-medium",children:"-8%"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Weather Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{className:"w-full text-left p-3 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ee,{className:"text-blue-600",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-800",children:"Plan Field Activities"}),e.jsx("p",{className:"text-xs text-blue-600",children:"Based on 7-day forecast"})]})]})}),e.jsx("button",{className:"w-full text-left p-3 bg-green-50 rounded-lg hover:bg-green-100 transition-colors",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(te,{className:"text-green-600",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800",children:"Set Irrigation Alert"}),e.jsx("p",{className:"text-xs text-green-600",children:"Get notified when to water"})]})]})}),e.jsx("button",{className:"w-full text-left p-3 bg-yellow-50 rounded-lg hover:bg-yellow-100 transition-colors",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(je,{className:"text-yellow-600",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-yellow-800",children:"Weather Alerts"}),e.jsx("p",{className:"text-xs text-yellow-600",children:"Manage notification preferences"})]})]})})]})]})]})]})]})},ty=()=>{const[t,s]=x.useState([]),[r,n]=x.useState(!0),[a,i]=x.useState({cropType:"",season:"",growthStage:"",category:""}),[o,c]=x.useState(""),[d,l]=x.useState("personalized"),[u,h]=x.useState(!1),m=[{value:"wheat",label:"Wheat"},{value:"rice",label:"Rice"},{value:"cotton",label:"Cotton"},{value:"sugarcane",label:"Sugarcane"},{value:"maize",label:"Maize"},{value:"tomato",label:"Tomato"},{value:"potato",label:"Potato"},{value:"soybean",label:"Soybean"}],g=[{value:"kharif",label:"Kharif (Monsoon)"},{value:"rabi",label:"Rabi (Winter)"},{value:"zaid",label:"Zaid (Summer)"}],f=[{value:"seed_preparation",label:"Seed Preparation"},{value:"germination",label:"Germination"},{value:"seedling",label:"Seedling"},{value:"vegetative",label:"Vegetative"},{value:"flowering",label:"Flowering"},{value:"fruit_formation",label:"Fruit Formation"},{value:"maturation",label:"Maturation"},{value:"harvest",label:"Harvest"}],y=[{value:"irrigation",label:"Irrigation Management"},{value:"fertilization",label:"Fertilization"},{value:"pest_control",label:"Pest Control"},{value:"disease_management",label:"Disease Management"},{value:"soil_health",label:"Soil Health"},{value:"weather_advisory",label:"Weather Advisory"}];x.useEffect(()=>{b()},[d,a,o]);const b=async()=>{try{n(!0);let N;if(d==="personalized")N=await $.getPersonalizedAdvisory({userId:"demo-user",cropType:a.cropType||"wheat",growthStage:a.growthStage||"flowering",issues:[]}),s([N.data]);else if(d==="recommendations"){const j=await $.getCropRecommendations({latitude:28.6139,longitude:77.209,season:a.season||"rabi",soilType:"loam"});s(j.data.recommendations||[])}else s([{id:1,title:"Wheat Crop Management - December",category:"crop_management",cropType:"wheat",season:"rabi",content:"Comprehensive guide for wheat cultivation during winter season...",author:"Dr. Agricultural Expert",publishedDate:"2024-12-15",rating:4.8,tags:["wheat","winter","irrigation","fertilizer"]},{id:2,title:"Organic Pest Control Methods",category:"pest_control",cropType:"general",content:"Learn about natural and organic methods to control common pests...",author:"Organic Farming Specialist",publishedDate:"2024-12-14",rating:4.6,tags:["organic","pest control","natural methods"]}])}catch(N){console.error("Failed to fetch advisories:",N)}finally{n(!1)}},C=(N,j)=>{i(v=>({...v,[N]:j}))},T=()=>{i({cropType:"",season:"",growthStage:"",category:""}),c("")},S=[{id:"personalized",label:"Personalized Advisory",icon:vs},{id:"recommendations",label:"Crop Recommendations",icon:Zs},{id:"general",label:"General Advisories",icon:_t}];return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Crop Advisory"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Get personalized farming advice and expert recommendations"})]}),e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(ws,{size:16}),e.jsx("span",{children:"Request Advisory"})]})]}),e.jsx("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1 mb-8",children:S.map(N=>{const j=N.icon;return e.jsxs("button",{onClick:()=>l(N.id),className:`flex items-center space-x-2 px-4 py-2 rounded-md text-sm font-medium transition-all ${d===N.id?"bg-white text-green-700 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(j,{size:16}),e.jsx("span",{children:N.label})]},N.id)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 sticky top-8",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Filters"}),e.jsx("button",{onClick:()=>h(!u),className:"lg:hidden text-gray-500",children:u?e.jsx($s,{size:20}):e.jsx(ts,{size:20})})]})}),e.jsxs("div",{className:`p-4 space-y-6 ${u?"block":"hidden lg:block"}`,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"text",value:o,onChange:N=>c(N.target.value),placeholder:"Search advisories...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Crop Type"}),e.jsxs("select",{value:a.cropType,onChange:N=>C("cropType",N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Crops"}),m.map(N=>e.jsx("option",{value:N.value,children:N.label},N.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Season"}),e.jsxs("select",{value:a.season,onChange:N=>C("season",N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Seasons"}),g.map(N=>e.jsx("option",{value:N.value,children:N.label},N.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Growth Stage"}),e.jsxs("select",{value:a.growthStage,onChange:N=>C("growthStage",N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Stages"}),f.map(N=>e.jsx("option",{value:N.value,children:N.label},N.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),e.jsxs("select",{value:a.category,onChange:N=>C("category",N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Categories"}),y.map(N=>e.jsx("option",{value:N.value,children:N.label},N.value))]})]}),e.jsx("button",{onClick:T,className:"w-full px-3 py-2 text-sm text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Clear All Filters"})]})]})}),e.jsx("div",{className:"lg:col-span-3",children:r?e.jsx("div",{className:"space-y-6",children:[1,2,3].map(N=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-4"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-4/6"})]})]},N))}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-gray-600",children:[t.length," ",t.length===1?"advisory":"advisories"," found"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Sort by:"}),e.jsxs("select",{className:"text-sm border border-gray-300 rounded px-2 py-1",children:[e.jsx("option",{children:"Relevance"}),e.jsx("option",{children:"Date"}),e.jsx("option",{children:"Rating"})]})]})]}),d==="personalized"&&t[0]?e.jsx(ed,{advisory:t[0],loading:!1}):d==="recommendations"?e.jsx("div",{className:"grid gap-6",children:t.map((N,j)=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:[N.name?.charAt(0).toUpperCase()+N.name?.slice(1)," Cultivation"]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ve,{size:14}),e.jsxs("span",{children:["Suitability: ",N.suitabilityScore,"%"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ee,{size:14}),e.jsxs("span",{children:["Duration: ",N.duration]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Expected ROI"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[N.expectedROI,"%"]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Why This Crop?"}),e.jsx("ul",{className:"space-y-1 text-sm text-gray-600",children:N.reasons?.map((v,p)=>e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:v})]},p))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Investment Required"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Seeds:"}),e.jsxs("span",{className:"font-medium",children:["₹",N.investment?.seeds||0]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Fertilizers:"}),e.jsxs("span",{className:"font-medium",children:["₹",N.investment?.fertilizers||0]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Labor:"}),e.jsxs("span",{className:"font-medium",children:["₹",N.investment?.labor||0]})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2 font-semibold",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["₹",N.investment?.total||N.investment||0]})]})]})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxs("span",{className:`px-3 py-1 rounded-full ${N.riskLevel==="low"?"bg-green-100 text-green-800":N.riskLevel==="medium"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[N.riskLevel," Risk"]}),e.jsxs("span",{className:"text-gray-600",children:["Expected Yield: ",N.yield]})]}),e.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Get Detailed Plan"})]})]},j))}):e.jsx("div",{className:"space-y-6",children:t.map((N,j)=>e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:N.title}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-3",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(_t,{size:14}),e.jsx("span",{children:N.category?.replace("_"," ")})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(Ee,{size:14}),e.jsx("span",{children:new Date(N.publishedDate).toLocaleDateString()})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(Ie,{size:14,className:"text-yellow-500",fill:"currentColor"}),e.jsx("span",{children:N.rating})]})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:N.content}),e.jsx("div",{className:"flex flex-wrap gap-2",children:N.tags?.map(v=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:v},v))})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsx("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:e.jsxs("span",{children:["By ",N.author]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{className:"flex items-center space-x-1 px-3 py-1 text-sm text-gray-600 hover:text-blue-600",children:[e.jsx(dc,{size:14}),e.jsx("span",{children:"Download"})]}),e.jsxs("button",{className:"flex items-center space-x-1 px-3 py-1 text-sm text-gray-600 hover:text-green-600",children:[e.jsx(vu,{size:14}),e.jsx("span",{children:"Share"})]}),e.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Read More"})]})]})]})},N.id||j))}),t.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Qn,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No advisories found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Try adjusting your filters or search terms to find relevant advisories."}),e.jsx("button",{onClick:T,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Clear Filters"})]})]})})]})]})},sy=()=>{const[t,s]=x.useState([]),[r,n]=x.useState([]),[a,i]=x.useState([]),[o,c]=x.useState(!0),[d,l]=x.useState("wheat"),[u,h]=x.useState({state:"Maharashtra",district:"Pune"}),[m,g]=x.useState("7d"),[f,y]=x.useState([]),b=[{id:"wheat",name:"Wheat",unit:"quintal"},{id:"rice",name:"Rice",unit:"quintal"},{id:"cotton",name:"Cotton",unit:"quintal"},{id:"sugarcane",name:"Sugarcane",unit:"ton"},{id:"maize",name:"Maize",unit:"quintal"},{id:"soybean",name:"Soybean",unit:"quintal"},{id:"onion",name:"Onion",unit:"quintal"},{id:"potato",name:"Potato",unit:"quintal"}],C=["Andhra Pradesh","Maharashtra","Punjab","Haryana","Uttar Pradesh","Madhya Pradesh","Karnataka","Gujarat","Rajasthan","Tamil Nadu"];x.useEffect(()=>{T()},[d,u,m]);const T=async()=>{try{c(!0);const p=await $.getCurrentMarketPrices({commodity:d,state:u.state,district:u.district}),w=await $.getMarketTrends({commodity:d,duration:m}),P=await $.getPricePredictions({commodity:d,state:u.state,days:7});s([{market:"Main Market - Pune",minPrice:2050,maxPrice:2180,modalPrice:2120,date:new Date().toISOString(),volume:450,arrivals:320},{market:"Wholesale Market - Mumbai",minPrice:2080,maxPrice:2200,modalPrice:2150,date:new Date().toISOString(),volume:680,arrivals:520},{market:"Agricultural Market - Nashik",minPrice:2020,maxPrice:2160,modalPrice:2090,date:new Date().toISOString(),volume:390,arrivals:280}]),n(w.data||[]),i(P.data||[]),y([{id:1,commodity:"wheat",targetPrice:2200,currentPrice:2120,type:"above",status:"active",progress:96.4},{id:2,commodity:"rice",targetPrice:1800,currentPrice:1950,type:"below",status:"triggered",progress:108.3}])}catch(p){console.error("Failed to fetch market data:",p)}finally{c(!1)}},S=p=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(p),N=(p,w)=>{if(!w)return{change:0,percentage:0};const P=p-w,A=P/w*100;return{change:P,percentage:A}},j=({market:p})=>{const w=N(p.modalPrice,p.modalPrice-50);return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:p.market}),e.jsxs("p",{className:"text-sm text-gray-600 flex items-center mt-1",children:[e.jsx(Je,{size:12,className:"mr-1"}),u.state]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S(p.modalPrice)}),e.jsxs("div",{className:`flex items-center space-x-1 text-sm ${w.percentage>=0?"text-green-600":"text-red-600"}`,children:[w.percentage>=0?e.jsx(ve,{size:14}):e.jsx(ds,{size:14}),e.jsxs("span",{children:[w.percentage>=0?"+":"",w.percentage.toFixed(1),"%"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Min Price"}),e.jsx("p",{className:"font-semibold",children:S(p.minPrice)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Max Price"}),e.jsx("p",{className:"font-semibold",children:S(p.maxPrice)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Volume"}),e.jsxs("p",{className:"font-semibold",children:[p.volume," tons"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Arrivals"}),e.jsxs("p",{className:"font-semibold",children:[p.arrivals," tons"]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["Updated: ",new Date(p.date).toLocaleTimeString()]}),e.jsx("button",{className:"text-blue-600 hover:text-blue-800",children:"View Details"})]})})]})},v=()=>{const p=[{date:"2024-12-10",price:2080},{date:"2024-12-11",price:2095},{date:"2024-12-12",price:2070},{date:"2024-12-13",price:2110},{date:"2024-12-14",price:2125},{date:"2024-12-15",price:2120},{date:"2024-12-16",price:2140}];return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Price Trends"}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("select",{value:m,onChange:w=>g(w.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1",children:[e.jsx("option",{value:"7d",children:"7 Days"}),e.jsx("option",{value:"30d",children:"30 Days"}),e.jsx("option",{value:"90d",children:"90 Days"})]})})]}),e.jsx("div",{className:"h-64 flex items-end space-x-2",children:p.map((w,P)=>{const A=(w.price-2e3)/200*100;return e.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[e.jsx("div",{className:"w-full bg-blue-500 rounded-t",style:{height:`${A}%`}}),e.jsx("div",{className:"text-xs text-gray-500 mt-2 transform -rotate-45",children:new Date(w.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]},P)})}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600",children:"Avg Price"}),e.jsx("p",{className:"font-semibold",children:S(2105)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600",children:"Highest"}),e.jsx("p",{className:"font-semibold text-green-600",children:S(2140)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600",children:"Lowest"}),e.jsx("p",{className:"font-semibold text-red-600",children:S(2070)})]})]})})]})};return o?e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-8"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx("div",{className:"h-64 bg-gray-200 rounded-lg"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"h-48 bg-gray-200 rounded-lg"}),e.jsx("div",{className:"h-48 bg-gray-200 rounded-lg"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-32 bg-gray-200 rounded-lg"}),e.jsx("div",{className:"h-48 bg-gray-200 rounded-lg"})]})]})]})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Market Intelligence"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Real-time commodity prices and market trends"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:T,className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(ft,{size:16}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(Ot,{size:16}),e.jsx("span",{children:"Set Alert"})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Commodity"}),e.jsx("select",{value:d,onChange:p=>l(p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:b.map(p=>e.jsx("option",{value:p.id,children:p.name},p.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State"}),e.jsx("select",{value:u.state,onChange:p=>h(w=>({...w,state:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:C.map(p=>e.jsx("option",{value:p,children:p},p))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"District"}),e.jsx("input",{type:"text",value:u.district,onChange:p=>h(w=>({...w,district:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Enter district"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Range"}),e.jsxs("select",{value:m,onChange:p=>g(p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 3 months"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"lg:col-span-3 space-y-8",children:[e.jsx(v,{}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Current Prices"}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(Ae,{size:14}),e.jsx("span",{children:"Updated 5 minutes ago"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:t.map((p,w)=>e.jsx(j,{market:p},w))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"7-Day Price Forecast"}),e.jsx("div",{className:"space-y-4",children:[1,2,3,4,5,6,7].map(p=>{const w=new Date;w.setDate(w.getDate()+p);const P=2120+(Math.random()-.5)*100,A=85+Math.random()*10;return e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:w.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Confidence: ",A.toFixed(1),"%"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:S(P)}),e.jsxs("p",{className:`text-sm ${P>2120?"text-green-600":"text-red-600"}`,children:[P>2120?"+":"",((P-2120)/2120*100).toFixed(1),"%"]})]})]},p)})}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx($e,{className:"text-blue-600 mt-0.5 flex-shrink-0",size:16}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-800",children:"Market Analysis"}),e.jsx("p",{className:"text-blue-700 text-sm mt-1",children:"Prices are expected to remain stable with slight upward trend due to reduced supply and steady demand. Consider selling if prices exceed ₹2,200 per quintal."})]})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Price Alerts"}),e.jsx("button",{className:"text-sm text-green-600 hover:text-green-800",children:"Add Alert"})]}),e.jsx("div",{className:"space-y-3",children:f.map(p=>e.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-gray-900 capitalize",children:p.commodity}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${p.status==="active"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:p.status})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("p",{children:[p.type==="above"?"Alert when above":"Alert when below"," ",S(p.targetPrice)]}),e.jsxs("p",{children:["Current: ",S(p.currentPrice)]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[p.progress.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:`h-1.5 rounded-full ${p.status==="triggered"?"bg-green-500":"bg-blue-500"}`,style:{width:`${Math.min(100,p.progress)}%`}})})]})]},p.id))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Market Statistics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Daily Volume"}),e.jsx("span",{className:"font-semibold",children:"1,520 tons"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Weekly Average"}),e.jsx("span",{className:"font-semibold",children:S(2105)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Monthly High"}),e.jsx("span",{className:"font-semibold text-green-600",children:S(2250)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Monthly Low"}),e.jsx("span",{className:"font-semibold text-red-600",children:S(1980)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Volatility"}),e.jsx("span",{className:"font-semibold",children:"Medium (±4.2%)"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{className:"w-full flex items-center space-x-3 p-3 text-left bg-green-50 rounded-lg hover:bg-green-100 transition-colors",children:[e.jsx(vs,{className:"text-green-600",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800",children:"Set Price Target"}),e.jsx("p",{className:"text-xs text-green-600",children:"Get notified at optimal price"})]})]}),e.jsxs("button",{className:"w-full flex items-center space-x-3 p-3 text-left bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:[e.jsx(Ns,{className:"text-blue-600",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-800",children:"Market Analysis"}),e.jsx("p",{className:"text-xs text-blue-600",children:"Get detailed insights"})]})]}),e.jsxs("button",{className:"w-full flex items-center space-x-3 p-3 text-left bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors",children:[e.jsx(dc,{className:"text-purple-600",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-purple-800",children:"Export Data"}),e.jsx("p",{className:"text-xs text-purple-600",children:"Download price history"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Related Commodities"}),e.jsx("div",{className:"space-y-3",children:b.filter(p=>p.id!==d).slice(0,4).map(p=>{const w=1800+Math.random()*800,P=(Math.random()-.5)*10;return e.jsxs("button",{onClick:()=>l(p.id),className:"w-full flex items-center justify-between p-3 text-left border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:p.name}),e.jsx("p",{className:"text-sm text-gray-600",children:S(w)})]}),e.jsxs("div",{className:`flex items-center space-x-1 ${P>=0?"text-green-600":"text-red-600"}`,children:[P>=0?e.jsx(ve,{size:14}):e.jsx(ds,{size:14}),e.jsxs("span",{className:"text-sm",children:[P>=0?"+":"",P.toFixed(1),"%"]})]})]},p.id)})})]})]})]})]})},ry=()=>{const[t,s]=x.useState(null),[r,n]=x.useState(""),[a,i]=x.useState(null),[o,c]=x.useState(!1),[d,l]=x.useState([]),[u,h]=x.useState(!1),m=x.useRef(null),g=[{value:"wheat",label:"Wheat"},{value:"rice",label:"Rice"},{value:"cotton",label:"Cotton"},{value:"tomato",label:"Tomato"},{value:"potato",label:"Potato"},{value:"maize",label:"Maize"},{value:"soybean",label:"Soybean"},{value:"sugarcane",label:"Sugarcane"}],f=v=>{if(v&&v.type.startsWith("image/")){const p=new FileReader;p.onload=w=>{s({file:v,url:w.target.result,name:v.name})},p.readAsDataURL(v)}},y=v=>{v.preventDefault(),v.stopPropagation(),v.type==="dragenter"||v.type==="dragover"?h(!0):v.type==="dragleave"&&h(!1)},b=v=>{v.preventDefault(),v.stopPropagation(),h(!1),v.dataTransfer.files&&v.dataTransfer.files[0]&&f(v.dataTransfer.files[0])},C=v=>{v.target.files&&v.target.files[0]&&f(v.target.files[0])},T=async()=>{if(!t||!r){alert("Please select an image and crop type");return}try{c(!0);const v=new FormData;v.append("pestImage",t.file),v.append("cropType",r);const p=await $.detectPest(t.file,r);i(p.data);const w={id:Date.now(),image:t.url,cropType:r,pest:p.data.pest,confidence:p.data.confidence,date:new Date().toISOString()};l(P=>[w,...P.slice(0,9)])}catch(v){console.error("Pest detection failed:",v),alert("Failed to detect pest. Please try again.")}finally{c(!1)}},S=()=>{s(null),i(null),m.current&&(m.current.value="")},N=v=>v>=.8?"text-red-600 bg-red-100":v>=.6?"text-orange-600 bg-orange-100":"text-yellow-600 bg-yellow-100",j=v=>v>=.8?"High":v>=.6?"Medium":"Low";return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Pest Detection"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Upload crop images to identify pests and diseases using AI technology"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Upload Image"}),t?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:t.url,alt:"Selected crop",className:"w-full h-64 object-cover rounded-lg border border-gray-200"}),e.jsx("button",{onClick:S,className:"absolute top-2 right-2 p-2 bg-red-600 text-white rounded-full hover:bg-red-700 transition-colors",children:e.jsx(bt,{size:16})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Crop Type"}),e.jsxs("select",{value:r,onChange:v=>n(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Choose crop type..."}),g.map(v=>e.jsx("option",{value:v.value,children:v.label},v.value))]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:T,disabled:!r||o,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?e.jsxs(e.Fragment,{children:[e.jsx(mr,{className:"animate-spin",size:16}),e.jsx("span",{children:"Analyzing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ue,{size:16}),e.jsx("span",{children:"Detect Pest"})]})}),e.jsx("button",{onClick:S,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]})]}):e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${u?"border-green-400 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:y,onDragLeave:y,onDragOver:y,onDrop:b,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(uc,{className:"text-gray-400",size:32})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Drop your image here, or browse"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Support for JPG, PNG, GIF files up to 10MB"}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsxs("button",{onClick:()=>m.current?.click(),className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(Nu,{size:16}),e.jsx("span",{children:"Choose File"})]}),e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(hn,{size:16}),e.jsx("span",{children:"Take Photo"})]})]})]})]}),e.jsx("input",{ref:m,type:"file",accept:"image/*",onChange:C,className:"hidden"})]})]}),a&&e.jsxs("div",{className:"border-t border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Detection Results"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:a.pest||"Unknown Pest"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Confidence:"}),e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${N(a.confidence)}`,children:[((a.confidence||0)*100).toFixed(1),"% - ",j(a.confidence)]})]})]}),e.jsx("div",{className:"flex space-x-1",children:a.confidence>=.8?e.jsx(G,{className:"text-green-500",size:24}):a.confidence>=.6?e.jsx(je,{className:"text-orange-500",size:24}):e.jsx(je,{className:"text-yellow-500",size:24})})]}),a.confidence<.7&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-3",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(je,{className:"text-yellow-600 flex-shrink-0 mt-0.5",size:16}),e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-800 text-sm font-medium",children:"Low Confidence Detection"}),e.jsx("p",{className:"text-yellow-700 text-sm",children:"Consider uploading a clearer image or consult with an expert for accurate identification."})]})]})})]}),a.treatment&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Recommended Treatments"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.treatment.organic&&a.treatment.organic.length>0&&e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(Me,{className:"text-green-600",size:18}),e.jsx("h5",{className:"font-medium text-green-800",children:"Organic"})]}),e.jsx("ul",{className:"space-y-1 text-sm text-green-700",children:a.treatment.organic.map((v,p)=>e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:v})]},p))})]}),a.treatment.chemical&&a.treatment.chemical.length>0&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(Zn,{className:"text-blue-600",size:18}),e.jsx("h5",{className:"font-medium text-blue-800",children:"Chemical"})]}),e.jsx("ul",{className:"space-y-1 text-sm text-blue-700",children:a.treatment.chemical.map((v,p)=>e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:v})]},p))})]}),a.treatment.cultural&&a.treatment.cultural.length>0&&e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(wu,{className:"text-purple-600",size:18}),e.jsx("h5",{className:"font-medium text-purple-800",children:"Cultural"})]}),e.jsx("ul",{className:"space-y-1 text-sm text-purple-700",children:a.treatment.cultural.map((v,p)=>e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:v})]},p))})]})]})]}),a.prevention&&a.prevention.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Prevention Tips"}),e.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:e.jsx("ul",{className:"space-y-2 text-sm text-blue-800",children:a.prevention.map((v,p)=>e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx(G,{className:"text-blue-600 flex-shrink-0 mt-0.5",size:14}),e.jsx("span",{children:v})]},p))})})]}),e.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-gray-200",children:[e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(_t,{size:16}),e.jsx("span",{children:"Learn More"})]}),e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(ft,{size:16}),e.jsx("span",{children:"Analyze Again"})]})]})]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Recent Detections"}),d.length>0?e.jsxs("div",{className:"space-y-3",children:[d.slice(0,5).map(v=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[e.jsx("img",{src:v.image,alt:"Detection",className:"w-12 h-12 object-cover rounded"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-900 truncate",children:v.pest}),e.jsx("p",{className:"text-sm text-gray-600 capitalize",children:v.cropType}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(v.date).toLocaleDateString()})]}),e.jsxs("div",{className:`px-2 py-1 rounded text-xs font-medium ${N(v.confidence)}`,children:[(v.confidence*100).toFixed(0),"%"]})]},v.id)),d.length>5&&e.jsxs("button",{className:"w-full text-sm text-blue-600 hover:text-blue-800",children:["View All (",d.length,")"]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ue,{className:"mx-auto h-12 w-12 text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No detections yet"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Photo Guidelines"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(G,{className:"text-green-500 flex-shrink-0 mt-0.5",size:16}),e.jsx("span",{className:"text-gray-700",children:"Take clear, well-lit photos"})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(G,{className:"text-green-500 flex-shrink-0 mt-0.5",size:16}),e.jsx("span",{className:"text-gray-700",children:"Focus on affected plant parts"})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(G,{className:"text-green-500 flex-shrink-0 mt-0.5",size:16}),e.jsx("span",{className:"text-gray-700",children:"Include leaves, stems, or fruits"})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(G,{className:"text-green-500 flex-shrink-0 mt-0.5",size:16}),e.jsx("span",{className:"text-gray-700",children:"Avoid blurry or dark images"})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(G,{className:"text-green-500 flex-shrink-0 mt-0.5",size:16}),e.jsx("span",{className:"text-gray-700",children:"Multiple angles help accuracy"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Need Help?"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{className:"w-full text-left p-3 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(_t,{className:"text-blue-600",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-800",children:"Pest Guide"}),e.jsx("p",{className:"text-xs text-blue-600",children:"Common pests & diseases"})]})]})}),e.jsx("button",{className:"w-full text-left p-3 bg-green-50 rounded-lg hover:bg-green-100 transition-colors",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(hn,{className:"text-green-600",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800",children:"Photo Tips"}),e.jsx("p",{className:"text-xs text-green-600",children:"How to take better photos"})]})]})}),e.jsx("button",{className:"w-full text-left p-3 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(je,{className:"text-purple-600",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-purple-800",children:"Expert Consultation"}),e.jsx("p",{className:"text-xs text-purple-600",children:"Get professional help"})]})]})})]})]})]})]})]})},ny=()=>{const[t,s]=x.useState([]),[r,n]=x.useState(null),[a,i]=x.useState(null),[o,c]=x.useState(!0),[d,l]=x.useState([]),[u,h]=x.useState(null);x.useEffect(()=>{m()},[]),x.useEffect(()=>{r&&g(r.id)},[r]);const m=async()=>{try{c(!0);const j=[{id:"SENSOR_001",name:"Field A - Moisture Sensor",type:"soil_moisture",location:{fieldName:"Field A",lat:20.5937,lon:78.9629},status:"online",batteryLevel:85,lastPing:new Date().toISOString(),settings:{moistureThreshold:30,irrigationDuration:15,autoMode:!0},currentMoisture:25},{id:"SENSOR_002",name:"Field B - Irrigation Controller",type:"irrigation_controller",location:{fieldName:"Field B",lat:20.5947,lon:78.9639},status:"online",batteryLevel:92,lastPing:new Date().toISOString(),settings:{moistureThreshold:35,irrigationDuration:20,autoMode:!1},currentMoisture:42},{id:"SENSOR_003",name:"Greenhouse - Environmental Monitor",type:"environmental_monitor",location:{fieldName:"Greenhouse",lat:20.5957,lon:78.9649},status:"offline",batteryLevel:15,lastPing:new Date(Date.now()-7200*1e3).toISOString(),settings:{moistureThreshold:40,irrigationDuration:10,autoMode:!0},currentMoisture:null}];s(j),j.length>0&&n(j[0])}catch(j){console.error("Failed to fetch devices:",j)}finally{c(!1)}},g=async j=>{try{const v={current:25,history:f(),unit:"percentage",timestamp:new Date().toISOString()};i(v);const p=[{id:1,startTime:new Date(Date.now()-360*60*1e3).toISOString(),endTime:new Date(Date.now()-5.75*60*60*1e3).toISOString(),duration:15,waterUsed:150,trigger:"automatic",status:"completed"},{id:2,startTime:new Date(Date.now()-1440*60*1e3).toISOString(),endTime:new Date(Date.now()-23.67*60*60*1e3).toISOString(),duration:20,waterUsed:200,trigger:"manual",status:"completed"}];l(p),h({totalUsage:1250,averageDaily:41.7,efficiency:85,savings:200,recommendations:["Consider adjusting irrigation timing to early morning for better efficiency","Zone 3 shows higher water usage - check for leaks","Weather forecast shows rain in 2 days - reduce irrigation accordingly"]})}catch(v){console.error("Failed to fetch device data:",v)}},f=()=>{const j=[];for(let v=48;v>=0;v--){const p=new Date(Date.now()-v*30*60*1e3),w=30,P=Math.sin(v/8)*10+Math.random()*5;j.push({timestamp:p.toISOString(),value:Math.max(10,Math.min(90,w+P)),unit:"percentage"})}return j},y=async(j,v)=>{try{const p=await $.triggerIrrigation(j,v);s(w=>w.map(P=>P.id===j?{...P,status:"irrigating"}:P)),setTimeout(()=>{g(j)},2e3)}catch(p){console.error("Failed to trigger irrigation:",p),alert("Failed to start irrigation")}},b=j=>{switch(j){case"online":return"text-green-600 bg-green-100";case"offline":return"text-red-600 bg-red-100";case"irrigating":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}},C=j=>{switch(j){case"online":return e.jsx(G,{size:16});case"offline":return e.jsx(je,{size:16});case"irrigating":return e.jsx(te,{size:16});default:return e.jsx(Ae,{size:16})}},T=(j,v)=>j<v?"text-red-600":j<v+10?"text-yellow-600":"text-green-600",S=({device:j})=>e.jsxs("div",{className:`p-4 border rounded-lg cursor-pointer transition-all ${r?.id===j.id?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>n(j),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:j.name}),e.jsx("p",{className:"text-sm text-gray-600",children:j.location.fieldName})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{className:`flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ${b(j.status)}`,children:[C(j.status),e.jsx("span",{className:"capitalize",children:j.status})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Soil Moisture"}),e.jsx("p",{className:`font-semibold ${T(j.currentMoisture,j.settings.moistureThreshold)}`,children:j.currentMoisture!==null?`${j.currentMoisture}%`:"--"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Battery"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ti,{size:14,className:j.batteryLevel>20?"text-green-600":"text-red-600"}),e.jsxs("span",{className:"font-semibold",children:[j.batteryLevel,"%"]})]})]})]}),j.currentMoisture!==null&&j.currentMoisture<j.settings.moistureThreshold&&e.jsx("div",{className:"mt-3 p-2 bg-yellow-50 border border-yellow-200 rounded",children:e.jsx("p",{className:"text-yellow-800 text-xs font-medium",children:"⚠️ Low moisture - irrigation needed"})})]}),N=({data:j})=>{if(!j||!j.history)return null;const v=j.history.slice(-24);return e.jsx("div",{className:"h-64 flex items-end space-x-1",children:v.map((p,w)=>{const P=p.value/100*100;return e.jsx("div",{className:"flex-1 flex flex-col items-center",children:e.jsx("div",{className:"w-full bg-blue-500 rounded-t",style:{height:`${P}%`},title:`${p.value.toFixed(1)}% at ${new Date(p.timestamp).toLocaleTimeString()}`})},w)})})};return o?e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-8"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-32 bg-gray-200 rounded-lg"}),e.jsx("div",{className:"h-32 bg-gray-200 rounded-lg"}),e.jsx("div",{className:"h-32 bg-gray-200 rounded-lg"})]}),e.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[e.jsx("div",{className:"h-64 bg-gray-200 rounded-lg"}),e.jsx("div",{className:"h-48 bg-gray-200 rounded-lg"})]})]})]})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Smart Irrigation"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Monitor and control your irrigation systems remotely"})]}),e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(ws,{size:16}),e.jsx("span",{children:"Add Device"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"font-semibold text-gray-900",children:["Devices (",t.length,")"]}),t.map(j=>e.jsx(S,{device:j},j.id))]}),e.jsx("div",{className:"lg:col-span-3 space-y-8",children:r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r.name}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Je,{size:14}),e.jsx("span",{children:r.location.fieldName})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[r.status==="online"?e.jsx(Su,{size:14}):e.jsx(Cu,{size:14}),e.jsx("span",{className:"capitalize",children:r.status})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ae,{size:14}),e.jsxs("span",{children:["Last update: ",new Date(r.lastPing).toLocaleTimeString()]})]})]})]}),e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(lr,{size:16}),e.jsx("span",{children:"Settings"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(te,{className:"text-blue-600",size:20}),e.jsx("span",{className:"font-medium text-blue-800",children:"Soil Moisture"})]}),e.jsx("p",{className:`text-3xl font-bold ${T(r.currentMoisture,r.settings.moistureThreshold)}`,children:r.currentMoisture!==null?`${r.currentMoisture}%`:"--"}),e.jsxs("p",{className:"text-blue-700 text-sm mt-1",children:["Threshold: ",r.settings.moistureThreshold,"%"]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(ls,{className:"text-green-600",size:20}),e.jsx("span",{className:"font-medium text-green-800",children:"Temperature"})]}),e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:[25+Math.random()*10,"°C"]}),e.jsx("p",{className:"text-green-700 text-sm mt-1",children:"Optimal range"})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(ur,{className:"text-purple-600",size:20}),e.jsx("span",{className:"font-medium text-purple-800",children:"Pressure"})]}),e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:(1013+Math.random()*20).toFixed(0)}),e.jsx("p",{className:"text-purple-700 text-sm mt-1",children:"hPa"})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(ti,{className:"text-orange-600",size:20}),e.jsx("span",{className:"font-medium text-orange-800",children:"Battery"})]}),e.jsxs("p",{className:`text-3xl font-bold ${r.batteryLevel>20?"text-orange-600":"text-red-600"}`,children:[r.batteryLevel,"%"]}),e.jsx("p",{className:"text-orange-700 text-sm mt-1",children:r.batteryLevel>20?"Good":"Low - Replace soon"})]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Manual Control"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>y(r.id,r.settings.irrigationDuration),disabled:r.status==="offline",className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(sa,{size:16}),e.jsx("span",{children:"Start Irrigation"})]}),e.jsxs("button",{disabled:r.status==="offline",className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(ku,{size:16}),e.jsx("span",{children:"Stop"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Duration:"}),e.jsxs("select",{className:"px-2 py-1 border border-gray-300 rounded text-sm",defaultValue:r.settings.irrigationDuration,children:[e.jsx("option",{value:"5",children:"5 min"}),e.jsx("option",{value:"10",children:"10 min"}),e.jsx("option",{value:"15",children:"15 min"}),e.jsx("option",{value:"20",children:"20 min"}),e.jsx("option",{value:"30",children:"30 min"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Soil Moisture Trend (12 Hours)"}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded"}),e.jsx("span",{children:"Moisture Level"})]})]}),e.jsx(N,{data:a}),e.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600",children:"Current"}),e.jsxs("p",{className:"font-semibold text-blue-600",children:[a?.current||"--","%"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600",children:"Average (24h)"}),e.jsxs("p",{className:"font-semibold text-gray-900",children:[a?.history?(a.history.reduce((j,v)=>j+v.value,0)/a.history.length).toFixed(1):"--","%"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600",children:"Threshold"}),e.jsxs("p",{className:"font-semibold text-orange-600",children:[r.settings.moistureThreshold,"%"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[u&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Water Usage Analytics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Usage (Month)"}),e.jsxs("span",{className:"font-semibold",children:[u.totalUsage,"L"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Average Daily"}),e.jsxs("span",{className:"font-semibold",children:[u.averageDaily,"L"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Efficiency"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[u.efficiency,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Water Saved"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ve,{className:"text-green-500",size:14}),e.jsxs("span",{className:"font-semibold text-green-600",children:[u.savings,"L"]})]})]})]}),u.recommendations&&e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Recommendations"}),e.jsx("ul",{className:"space-y-1 text-sm text-gray-600",children:u.recommendations.slice(0,2).map((j,v)=>e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:j})]},v))})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"}),e.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-800",children:"View All"})]}),e.jsx("div",{className:"space-y-3",children:d.map(j=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(te,{className:"text-blue-600",size:20})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"font-medium text-gray-900",children:["Irrigation ",j.trigger]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Duration: ",j.duration,"min • Water: ",j.waterUsed,"L"]}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(j.startTime).toLocaleString()})]}),e.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${j.status==="completed"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:j.status})]},j.id))})]})]})]}):e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[e.jsx(te,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Device Selected"}),e.jsx("p",{className:"text-gray-600",children:"Select a device from the list to view its details and controls."})]})})]})]})},ay=({consultation:t,onJoin:s,onEnd:r,isActive:n=!1})=>{const[a,i]=x.useState(""),[o,c]=x.useState(!0),[d,l]=x.useState(!0),[u,h]=x.useState("connecting");x.useEffect(()=>{if(t?.scheduledDate){const y=setInterval(()=>{const b=new Date,T=new Date(t.scheduledDate)-b;if(T>0){const S=Math.floor(T/36e5),N=Math.floor(T%(1e3*60*60)/(1e3*60)),j=Math.floor(T%(1e3*60)/1e3);S>0?i(`${S}h ${N}m`):N>0?i(`${N}m ${j}s`):i(`${j}s`)}else i("Starting now")},1e3);return()=>clearInterval(y)}},[t?.scheduledDate]);const m=y=>{switch(y){case"scheduled":return"text-blue-600 bg-blue-100";case"in_progress":return"text-green-600 bg-green-100";case"completed":return"text-gray-600 bg-gray-100";case"cancelled":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},g=y=>{switch(y){case"scheduled":return e.jsx(Ae,{size:16});case"in_progress":return e.jsx(sa,{size:16});case"completed":return e.jsx(G,{size:16});case"cancelled":return e.jsx($e,{size:16});default:return e.jsx(Ae,{size:16})}},f=y=>new Date(y).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return t?e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-4 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(le,{className:"text-blue-600",size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Expert Consultation"}),e.jsx("p",{className:"text-sm text-gray-600",children:t.topic})]})]}),e.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${m(t.status)}`,children:[g(t.status),e.jsx("span",{className:"capitalize",children:t.status.replace("_"," ")})]})]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx(Te,{className:"text-gray-500",size:20})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Dr. Priya Agricultural Expert"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ie,{className:"text-yellow-500",size:14,fill:"currentColor"}),e.jsx("span",{className:"text-sm text-gray-600",children:"4.8"})]}),e.jsx("span",{className:"text-sm text-gray-400",children:"•"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Crop Management Specialist"})]})]})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[e.jsx(Ee,{className:"text-gray-400",size:16}),e.jsx("span",{className:"text-gray-600",children:f(t.scheduledDate)})]}),e.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[e.jsx(Ae,{className:"text-gray-400",size:16}),e.jsxs("span",{className:"text-gray-600",children:["Duration: ",t.duration," minutes"]})]}),e.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[e.jsx(Ve,{className:"text-gray-400",size:16}),e.jsxs("span",{className:"text-gray-600",children:["Type: ",t.consultationType.replace("_"," ")]})]})]}),n?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-900 rounded-lg aspect-video relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx(le,{className:"mx-auto mb-2",size:32}),e.jsx("p",{className:"text-sm",children:"Video call in progress..."}),e.jsxs("p",{className:"text-xs text-gray-300",children:["Connection: ",u]})]})}),e.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>l(!d),className:`p-3 rounded-full ${d?"bg-gray-700 text-white":"bg-red-600 text-white"}`,children:d?e.jsx(ra,{size:20}):e.jsx(na,{size:20})}),e.jsx("button",{onClick:()=>c(!o),className:`p-3 rounded-full ${o?"bg-gray-700 text-white":"bg-red-600 text-white"}`,children:o?e.jsx(le,{size:20}):e.jsx(mn,{size:20})}),e.jsx("button",{onClick:r,className:"p-3 rounded-full bg-red-600 text-white hover:bg-red-700",children:e.jsx(hc,{size:20,className:"transform rotate-[135deg]"})}),e.jsx("button",{className:"p-3 rounded-full bg-gray-700 text-white",children:e.jsx(lr,{size:20})})]})}),e.jsx("div",{className:"absolute top-4 left-4 bg-black/50 text-white px-3 py-1 rounded-full text-sm",children:t.actualStartTime&&`${Math.floor((new Date-new Date(t.actualStartTime))/6e4)}:${String(Math.floor((new Date-new Date(t.actualStartTime))%6e4/1e3)).padStart(2,"0")}`}),e.jsx("div",{className:"absolute top-4 right-4 w-24 h-16 bg-gray-800 rounded border-2 border-white",children:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(Te,{className:"text-white",size:20})})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Chat"}),e.jsx(Ve,{className:"text-gray-400",size:16})]}),e.jsx("div",{className:"space-y-2 max-h-20 overflow-y-auto text-xs",children:e.jsxs("div",{className:"bg-white p-2 rounded",children:[e.jsx("span",{className:"font-medium",children:"Expert:"})," How can I help you today?"]})}),e.jsxs("div",{className:"mt-2 flex space-x-2",children:[e.jsx("input",{type:"text",placeholder:"Type a message...",className:"flex-1 px-3 py-1 text-sm border border-gray-300 rounded-lg focus:ring-1 focus:ring-blue-500 focus:border-transparent"}),e.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700",children:"Send"})]})]})]}):t.status==="scheduled"?e.jsxs("div",{className:"space-y-3",children:[a&&e.jsx("div",{className:"bg-blue-50 p-3 rounded-lg text-center",children:e.jsx("p",{className:"text-sm text-blue-800 font-medium",children:a==="Starting now"?"Ready to join!":`Starts in ${a}`})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:s,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",disabled:a&&a!=="Starting now"&&!a.includes("s"),children:[e.jsx(le,{size:16}),e.jsx("span",{children:"Join Call"})]}),e.jsx("button",{className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:e.jsx(Ve,{size:16})})]}),e.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[e.jsx("p",{className:"font-medium",children:"Before joining:"}),e.jsxs("ul",{className:"space-y-1 ml-4",children:[e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(G,{className:"text-green-500",size:12}),e.jsx("span",{children:"Camera and microphone ready"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(G,{className:"text-green-500",size:12}),e.jsx("span",{children:"Stable internet connection"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(G,{className:"text-green-500",size:12}),e.jsx("span",{children:"Questions prepared"})]})]})]})]}):t.status==="completed"?e.jsxs("div",{className:"text-center space-y-3",children:[e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[e.jsx(G,{className:"mx-auto text-green-600 mb-2",size:24}),e.jsx("p",{className:"text-green-800 font-medium",children:"Consultation Completed"}),e.jsxs("p",{className:"text-green-700 text-sm",children:["Duration: ",t.actualDuration," minutes"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Rate this consultation"}),e.jsx("div",{className:"flex justify-center space-x-1",children:[1,2,3,4,5].map(y=>e.jsx("button",{className:"text-gray-300 hover:text-yellow-500",children:e.jsx(Ie,{size:20})},y))})]}),e.jsx("button",{className:"w-full px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Download Recording"})]}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx($e,{className:"mx-auto text-gray-400 mb-2",size:24}),e.jsxs("p",{className:"text-gray-600 text-sm",children:["Consultation ",t.status.replace("_"," ")]})]}),!n&&t.status==="scheduled"&&e.jsxs("div",{className:"mt-4 pt-4 border-t flex justify-between text-sm",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-800",children:"Reschedule"}),e.jsx("button",{className:"text-red-600 hover:text-red-800",children:"Cancel"})]})]})]}):e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(le,{className:"mx-auto text-gray-400 mb-3",size:48}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Active Consultation"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Book a consultation with our agricultural experts"}),e.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Book Consultation"})]})})},iy=()=>{const[t,s]=x.useState("upcoming"),[r,n]=x.useState([]),[a,i]=x.useState([]),[o,c]=x.useState(!0),[d,l]=x.useState(!1),[u,h]=x.useState(null),[m,g]=x.useState(null),f=[{id:"upcoming",label:"Upcoming",count:2},{id:"experts",label:"Find Experts",count:null},{id:"history",label:"History",count:8}];x.useEffect(()=>{y(),b()},[]);const y=async()=>{try{c(!0);const p=[{id:"1",farmerId:"farmer1",expertId:"expert1",expert:{name:"Dr. Priya Sharma",specialization:"Crop Management",rating:4.8,image:null},consultationType:"video_call",topic:"Wheat Disease Management",description:"Need help with identifying and treating yellow rust in wheat crop",scheduledDate:new Date(Date.now()+1440*60*1e3).toISOString(),duration:30,status:"scheduled",price:500,currency:"INR"},{id:"2",farmerId:"farmer1",expertId:"expert2",expert:{name:"Prof. Rajesh Kumar",specialization:"Soil Health",rating:4.9,image:null},consultationType:"video_call",topic:"Soil Nutrient Analysis",description:"Consultation on soil test results and fertilizer recommendations",scheduledDate:new Date(Date.now()+4320*60*1e3).toISOString(),duration:45,status:"scheduled",price:750,currency:"INR"},{id:"3",farmerId:"farmer1",expertId:"expert1",expert:{name:"Dr. Priya Sharma",specialization:"Crop Management",rating:4.8,image:null},consultationType:"video_call",topic:"Pest Control Strategy",description:"Discussed integrated pest management for cotton crop",scheduledDate:new Date(Date.now()-2880*60*1e3).toISOString(),actualStartTime:new Date(Date.now()-2880*60*1e3).toISOString(),actualEndTime:new Date(Date.now()-47.5*60*60*1e3).toISOString(),duration:30,actualDuration:28,status:"completed",price:500,currency:"INR",rating:5,feedback:"Very helpful session. Clear explanations and practical advice."}];n(p)}catch(p){console.error("Failed to fetch consultations:",p)}finally{c(!1)}},b=async()=>{try{i([{id:"expert1",name:"Dr. Priya Sharma",title:"Agricultural Scientist",specialization:["Crop Management","Plant Pathology","Integrated Farming"],experience:"15+ years",rating:4.8,reviewCount:324,languages:["English","Hindi","Marathi"],availability:"Available today",priceRange:"₹500-800/session",location:"Mumbai, Maharashtra",education:"Ph.D. in Plant Pathology, IARI New Delhi",achievements:["Best Agricultural Scientist Award 2023","Published 45+ research papers"],image:null},{id:"expert2",name:"Prof. Rajesh Kumar",title:"Soil Science Expert",specialization:["Soil Health","Nutrient Management","Organic Farming"],experience:"20+ years",rating:4.9,reviewCount:256,languages:["English","Hindi","Punjabi"],availability:"Available tomorrow",priceRange:"₹600-900/session",location:"Chandigarh, Punjab",education:"Ph.D. in Soil Science, PAU Ludhiana",achievements:["ICAR Fellow","Expert in sustainable agriculture"],image:null},{id:"expert3",name:"Dr. Anita Desai",title:"Horticulture Specialist",specialization:["Fruit Crops","Vegetable Farming","Post Harvest Technology"],experience:"12+ years",rating:4.7,reviewCount:189,languages:["English","Hindi","Gujarati"],availability:"Available now",priceRange:"₹400-600/session",location:"Ahmedabad, Gujarat",education:"M.Sc. Horticulture, AAU Anand",achievements:["Best Extension Worker 2022","Specialized in precision farming"],image:null}])}catch(p){console.error("Failed to fetch experts:",p)}},C=p=>new Date(p).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),T=p=>{switch(p){case"scheduled":return"text-blue-600 bg-blue-100";case"in_progress":return"text-green-600 bg-green-100";case"completed":return"text-gray-600 bg-gray-100";case"cancelled":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},S=({consultation:p})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx(Te,{className:"text-gray-500",size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:p.expert.name}),e.jsx("p",{className:"text-sm text-gray-600",children:p.expert.specialization}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ie,{className:"text-yellow-500",size:14,fill:"currentColor"}),e.jsx("span",{className:"text-sm text-gray-600",children:p.expert.rating})]}),e.jsx("span",{className:"text-gray-300",children:"•"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[p.duration," min"]})]})]})]}),e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${T(p.status)}`,children:[p.status==="scheduled"&&e.jsx(Ee,{size:14,className:"inline mr-1"}),p.status==="in_progress"&&e.jsx(le,{size:14,className:"inline mr-1"}),p.status==="completed"&&e.jsx(G,{size:14,className:"inline mr-1"}),e.jsx("span",{className:"capitalize",children:p.status.replace("_"," ")})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:p.topic}),e.jsx("p",{className:"text-sm text-gray-600",children:p.description})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ee,{size:14}),e.jsx("span",{children:C(p.scheduledDate)})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Tu,{size:14}),e.jsxs("span",{children:[p.currency," ",p.price]})]})]}),p.status==="completed"&&p.rating&&e.jsxs("div",{className:"pt-3 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Your rating:"}),e.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(w=>e.jsx(Ie,{size:16,className:w<=p.rating?"text-yellow-500":"text-gray-300",fill:"currentColor"},w))})]}),p.feedback&&e.jsxs("p",{className:"text-sm text-gray-600 italic",children:['"',p.feedback,'"']})]}),e.jsxs("div",{className:"flex items-center space-x-3 pt-3 border-t border-gray-200",children:[p.status==="scheduled"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>g(p),className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(le,{size:16}),e.jsx("span",{children:"Join Call"})]}),e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(Ve,{size:16}),e.jsx("span",{children:"Message"})]}),e.jsx("button",{className:"text-sm text-red-600 hover:text-red-800",children:"Reschedule"})]}),p.status==="completed"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(_t,{size:16}),e.jsx("span",{children:"View Notes"})]}),e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(le,{size:16}),e.jsx("span",{children:"Download Recording"})]})]})]})]})]}),N=({expert:p})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-start space-x-4 mb-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx(Te,{className:"text-gray-500",size:32})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:p.name}),e.jsx("p",{className:"text-sm text-gray-600",children:p.title}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ie,{className:"text-yellow-500",size:14,fill:"currentColor"}),e.jsxs("span",{children:[p.rating," (",p.reviewCount," reviews)"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Je,{size:14}),e.jsx("span",{children:p.location})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-green-600",children:p.priceRange}),e.jsx("p",{className:"text-xs text-gray-500",children:p.availability})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Specializations"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:p.specialization.map((w,P)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:w},P))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:"Experience & Education"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[p.experience," • ",p.education]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:"Languages"}),e.jsx("p",{className:"text-sm text-gray-600",children:p.languages.join(", ")})]}),p.achievements&&p.achievements.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Achievements"}),e.jsx("ul",{className:"space-y-1",children:p.achievements.map((w,P)=>e.jsxs("li",{className:"flex items-start space-x-2 text-sm text-gray-600",children:[e.jsx(mc,{size:12,className:"text-yellow-500 mt-1 flex-shrink-0"}),e.jsx("span",{children:w})]},P))})]}),e.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>{h(p),l(!0)},className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Book Consultation"}),e.jsx("button",{className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"View Profile"})]})]})]}),j=r.filter(p=>p.status==="scheduled"),v=r.filter(p=>p.status==="completed");return o?e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-8"}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[1,2,3,4].map(p=>e.jsx("div",{className:"h-64 bg-gray-200 rounded-lg"},p))})]})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[m&&e.jsx("div",{className:"mb-8",children:e.jsx(ay,{consultation:m,isActive:!0,onEnd:()=>g(null)})}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Expert Consultation"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Connect with agricultural experts for personalized advice"})]}),e.jsxs("button",{onClick:()=>l(!0),className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(ws,{size:16}),e.jsx("span",{children:"Book Consultation"})]})]}),e.jsx("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1 mb-8",children:f.map(p=>e.jsxs("button",{onClick:()=>s(p.id),className:`flex items-center space-x-2 px-4 py-2 rounded-md text-sm font-medium transition-all ${t===p.id?"bg-white text-green-700 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx("span",{children:p.label}),p.count!==null&&e.jsx("span",{className:"bg-gray-200 px-2 py-1 rounded-full text-xs",children:p.count})]},p.id))}),e.jsxs("div",{className:"space-y-6",children:[t==="upcoming"&&e.jsx("div",{children:j.length>0?e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:j.map(p=>e.jsx(S,{consultation:p},p.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ee,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No upcoming consultations"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Book a session with our agricultural experts to get personalized advice."}),e.jsx("button",{onClick:()=>s("experts"),className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Find Experts"})]})}),t==="experts"&&e.jsxs("div",{children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"text",placeholder:"Search experts by name or specialization...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[e.jsx("option",{children:"All Specializations"}),e.jsx("option",{children:"Crop Management"}),e.jsx("option",{children:"Soil Health"}),e.jsx("option",{children:"Pest Control"}),e.jsx("option",{children:"Organic Farming"})]}),e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[e.jsx("option",{children:"All Languages"}),e.jsx("option",{children:"English"}),e.jsx("option",{children:"Hindi"}),e.jsx("option",{children:"Marathi"}),e.jsx("option",{children:"Gujarati"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:a.map(p=>e.jsx(N,{expert:p},p.id))})]}),t==="history"&&e.jsx("div",{children:v.length>0?e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:v.map(p=>e.jsx(S,{consultation:p},p.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(le,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No consultation history"}),e.jsx("p",{className:"text-gray-600",children:"Your completed consultations will appear here."})]})})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Book Consultation"}),e.jsx("button",{onClick:()=>l(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(X,{size:24})})]}),u&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx(Te,{className:"text-gray-500",size:32})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:u.name}),e.jsx("p",{className:"text-gray-600",children:u.title}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx(Ie,{className:"text-yellow-500",size:14,fill:"currentColor"}),e.jsx("span",{className:"text-sm text-gray-600",children:u.rating})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Topic"}),e.jsx("input",{type:"text",placeholder:"e.g., Pest control in wheat crop",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{rows:"3",placeholder:"Provide more details about your query...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Date"}),e.jsx("input",{type:"date",min:new Date().toISOString().split("T")[0],className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Time"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[e.jsx("option",{children:"9:00 AM"}),e.jsx("option",{children:"10:00 AM"}),e.jsx("option",{children:"11:00 AM"}),e.jsx("option",{children:"2:00 PM"}),e.jsx("option",{children:"3:00 PM"}),e.jsx("option",{children:"4:00 PM"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[e.jsx("option",{value:"30",children:"30 minutes - ₹500"}),e.jsx("option",{value:"45",children:"45 minutes - ₹750"}),e.jsx("option",{value:"60",children:"60 minutes - ₹1000"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Consultation Type"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("label",{className:"flex items-center p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"radio",name:"type",value:"video_call",defaultChecked:!0,className:"mr-3"}),e.jsx(le,{size:20,className:"mr-2 text-green-600"}),e.jsx("span",{children:"Video Call"})]}),e.jsxs("label",{className:"flex items-center p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"radio",name:"type",value:"audio_call",className:"mr-3"}),e.jsx(hc,{size:20,className:"mr-2 text-blue-600"}),e.jsx("span",{children:"Audio Call"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{l(!1),alert("Consultation booked successfully!")},className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Book & Pay ₹500"})]})]})]})})})]})},oy=()=>{const[t,s]=x.useState([]),[r,n]=x.useState(!0),[a,i]=x.useState("all"),[o,c]=x.useState(""),[d,l]=x.useState([]),[u,h]=x.useState(!1),m=[{id:"all",label:"All Notifications",icon:Ot},{id:"weather",label:"Weather Alerts",icon:Ce},{id:"market",label:"Market Updates",icon:ve},{id:"pest",label:"Pest Alerts",icon:Ue},{id:"irrigation",label:"Irrigation",icon:te},{id:"consultation",label:"Consultations",icon:le}];x.useEffect(()=>{g()},[]);const g=async()=>{try{n(!0);const A=[{id:"1",type:"weather",title:"Heavy Rainfall Alert",message:"Heavy rainfall expected in your area tomorrow. Secure your crops and ensure proper drainage systems are in place.",timestamp:new Date(Date.now()-3600*1e3).toISOString(),isRead:!1,priority:"high",actionUrl:"/weather"},{id:"2",type:"market",title:"Price Increase Alert",message:"Wheat prices increased by 5% in your local market. Current rate: ₹2,150 per quintal.",timestamp:new Date(Date.now()-10800*1e3).toISOString(),isRead:!1,priority:"medium",actionUrl:"/market"},{id:"3",type:"irrigation",title:"Low Soil Moisture Detected",message:"Field A sensor shows soil moisture at 18%. Irrigation recommended within next 2 hours.",timestamp:new Date(Date.now()-360*60*1e3).toISOString(),isRead:!0,priority:"high",actionUrl:"/irrigation"},{id:"4",type:"pest",title:"Pest Outbreak Warning",message:"Aphid infestation reported 5km from your location. Monitor your crops closely and consider preventive measures.",timestamp:new Date(Date.now()-720*60*1e3).toISOString(),isRead:!1,priority:"medium",actionUrl:"/pest-detection"},{id:"5",type:"consultation",title:"Upcoming Consultation",message:"Your consultation with Dr. Priya Sharma is scheduled for tomorrow at 2:00 PM. Prepare your questions.",timestamp:new Date(Date.now()-1080*60*1e3).toISOString(),isRead:!0,priority:"low",actionUrl:"/consultation"},{id:"6",type:"weather",title:"Temperature Warning",message:"High temperatures (42°C) expected for next 3 days. Increase irrigation frequency and provide shade.",timestamp:new Date(Date.now()-1440*60*1e3).toISOString(),isRead:!0,priority:"medium",actionUrl:"/weather"},{id:"7",type:"market",title:"Best Time to Sell",message:"Market analysis suggests selling your cotton stock within next week for optimal profits.",timestamp:new Date(Date.now()-2160*60*1e3).toISOString(),isRead:!1,priority:"low",actionUrl:"/market"},{id:"8",type:"irrigation",title:"Irrigation Schedule Complete",message:"Automated irrigation for Field B completed successfully. 150L water used over 15 minutes.",timestamp:new Date(Date.now()-2880*60*1e3).toISOString(),isRead:!0,priority:"low",actionUrl:"/irrigation"}];s(A)}catch(A){console.error("Failed to fetch notifications:",A)}finally{n(!1)}},f=A=>{const V={weather:Ce,market:ve,pest:Ue,irrigation:te,consultation:le}[A]||pt;return e.jsx(V,{size:20})},y=(A,M)=>M==="high"?"text-red-600 bg-red-100":{weather:"text-blue-600 bg-blue-100",market:"text-green-600 bg-green-100",pest:"text-red-600 bg-red-100",irrigation:"text-blue-600 bg-blue-100",consultation:"text-purple-600 bg-purple-100"}[A]||"text-gray-600 bg-gray-100",b=A=>{switch(A){case"high":return"bg-red-500";case"medium":return"bg-yellow-500";case"low":return"bg-green-500";default:return"bg-gray-500"}},C=A=>{const M=new Date,V=new Date(A),q=Math.floor((M-V)/(1e3*60*60));if(q<1){const I=Math.floor((M-V)/6e4);return I<1?"Just now":`${I}m ago`}else{if(q<24)return`${q}h ago`;{const I=Math.floor(q/24);return I===1?"1 day ago":`${I} days ago`}}},T=t.filter(A=>{const M=a==="all"||A.type===a,V=A.title.toLowerCase().includes(o.toLowerCase())||A.message.toLowerCase().includes(o.toLowerCase());return M&&V}),S=t.filter(A=>!A.isRead).length,N=async A=>{try{await $.markNotificationRead(A),s(M=>M.map(V=>V.id===A?{...V,isRead:!0}:V))}catch(M){console.error("Failed to mark as read:",M)}},j=async()=>{try{const A=t.filter(M=>!M.isRead).map(M=>M.id);s(M=>M.map(V=>({...V,isRead:!0})))}catch(A){console.error("Failed to mark all as read:",A)}},v=A=>{s(M=>M.filter(V=>V.id!==A))},p=A=>{l(M=>M.includes(A)?M.filter(V=>V!==A):[...M,A])},w=()=>{s(A=>A.filter(M=>!d.includes(M.id))),l([])},P=()=>{s(A=>A.map(M=>d.includes(M.id)?{...M,isRead:!0}:M)),l([])};return r?e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-8"}),e.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(A=>e.jsx("div",{className:"h-24 bg-gray-200 rounded-lg"},A))})]})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Notifications"}),e.jsxs("p",{className:"text-gray-600 mt-2",children:["Stay updated with important alerts and updates (",S," unread)"]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[d.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:P,className:"flex items-center space-x-2 px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(cn,{size:14}),e.jsx("span",{children:"Mark Read"})]}),e.jsxs("button",{onClick:w,className:"flex items-center space-x-2 px-3 py-2 text-sm border border-red-300 text-red-600 rounded-lg hover:bg-red-50 transition-colors",children:[e.jsx(Au,{size:14}),e.jsx("span",{children:"Delete"})]})]}),e.jsxs("button",{onClick:()=>h(!u),className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(lr,{size:16}),e.jsx("span",{children:"Settings"})]}),S>0&&e.jsxs("button",{onClick:j,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(G,{size:16}),e.jsx("span",{children:"Mark All Read"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 sticky top-8",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsx("h3",{className:"font-semibold text-gray-900",children:"Filters"})}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"text",value:o,onChange:A=>c(A.target.value),placeholder:"Search notifications...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})}),e.jsx("div",{className:"space-y-2",children:m.map(A=>{const M=A.icon,V=A.id==="all"?t.length:t.filter(q=>q.type===A.id).length;return e.jsxs("button",{onClick:()=>i(A.id),className:`w-full flex items-center justify-between p-3 text-left rounded-lg transition-colors ${a===A.id?"bg-green-100 text-green-700":"hover:bg-gray-100 text-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(M,{size:18}),e.jsx("span",{className:"font-medium",children:A.label})]}),e.jsx("span",{className:"text-sm bg-gray-200 px-2 py-1 rounded-full",children:V})]},A.id)})})]})]})}),e.jsxs("div",{className:"lg:col-span-3",children:[d.length>0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-blue-800 font-medium",children:[d.length," notification",d.length>1?"s":""," selected"]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("button",{onClick:()=>l([]),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Clear selection"})})]})}),e.jsx("div",{className:"space-y-4",children:T.length>0?T.map(A=>e.jsx("div",{className:`bg-white rounded-lg shadow-sm border transition-all ${A.isRead?"border-gray-200":"border-blue-200 bg-blue-50"} ${d.includes(A.id)?"ring-2 ring-green-500":""}`,children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("input",{type:"checkbox",checked:d.includes(A.id),onChange:()=>p(A.id),className:"mt-1 rounded border-gray-300 text-green-600 focus:ring-green-500"}),e.jsx("div",{className:`flex-shrink-0 p-2 rounded-lg ${y(A.type,A.priority)}`,children:f(A.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h3",{className:`font-semibold ${A.isRead?"text-gray-700":"text-gray-900"}`,children:A.title}),e.jsx("div",{className:`w-2 h-2 rounded-full ${b(A.priority)}`}),!A.isRead&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]}),e.jsx("p",{className:`text-sm ${A.isRead?"text-gray-600":"text-gray-700"} mb-2`,children:A.message}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[e.jsx("span",{children:C(A.timestamp)}),e.jsx("span",{className:"capitalize",children:A.type}),e.jsxs("span",{className:"capitalize",children:[A.priority," priority"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[!A.isRead&&e.jsx("button",{onClick:()=>N(A.id),className:"p-1 text-blue-600 hover:text-blue-800",title:"Mark as read",children:e.jsx(cn,{size:16})}),e.jsx("button",{onClick:()=>v(A.id),className:"p-1 text-red-600 hover:text-red-800",title:"Delete notification",children:e.jsx(bt,{size:16})})]})]}),A.actionUrl&&e.jsx("div",{className:"mt-3",children:e.jsx("button",{className:"text-sm text-green-600 hover:text-green-800 font-medium",children:"View Details →"})})]})]})})},A.id)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ot,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No notifications found"}),e.jsx("p",{className:"text-gray-600",children:o||a!=="all"?"Try adjusting your filters or search terms.":"You'll see your notifications here when you receive them."}),(o||a!=="all")&&e.jsx("button",{onClick:()=>{c(""),i("all")},className:"mt-4 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Clear Filters"})]})}),T.length>0&&e.jsx("div",{className:"mt-8 text-center",children:e.jsx("button",{className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Load More Notifications"})})]})]}),u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notification Settings"}),e.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(bt,{size:20})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Weather Alerts"}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded border-gray-300 text-green-600 focus:ring-green-500"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Market Updates"}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded border-gray-300 text-green-600 focus:ring-green-500"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Pest Alerts"}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded border-gray-300 text-green-600 focus:ring-green-500"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Irrigation Reminders"}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded border-gray-300 text-green-600 focus:ring-green-500"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Consultation Reminders"}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded border-gray-300 text-green-600 focus:ring-green-500"})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Delivery Method"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded border-gray-300 text-green-600 focus:ring-green-500"}),e.jsx("span",{className:"ml-2 text-gray-700",children:"Push Notifications"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded border-gray-300 text-green-600 focus:ring-green-500"}),e.jsx("span",{className:"ml-2 text-gray-700",children:"Email"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-green-600 focus:ring-green-500"}),e.jsx("span",{className:"ml-2 text-gray-700",children:"SMS"})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Save Settings"})]})]})})})]})},cy=({latitude:t,longitude:s,locationName:r})=>{const[n,a]=x.useState(null),[i,o]=x.useState([]),[c,d]=x.useState(!0),[l,u]=x.useState(null),[h,m]=x.useState(""),[g,f]=x.useState(new Date),[y,b]=x.useState(0);x.useEffect(()=>{t&&s&&C()},[t,s]),x.useEffect(()=>{const p=setInterval(()=>{f(new Date)},1e3);return()=>clearInterval(p)},[]);const C=async()=>{try{d(!0),u(null);const[p,w]=await Promise.all([$.getCurrentWeather(t,s),$.getWeatherForecast(t,s,7)]);p.success&&a(p.data),w.success&&o(w.data.forecasts||[])}catch(p){console.error("Weather fetch error:",p),u(p.message)}finally{d(!1)}},T=(p,w="large")=>{const A={small:{size:24,strokeWidth:2},medium:{size:32,strokeWidth:2},large:{size:80,strokeWidth:1.5},xlarge:{size:120,strokeWidth:1}}[w];switch(p?.toLowerCase()){case"clear":case"sunny":return e.jsx(Lt,{...A,className:"weather-icon sunny"});case"clouds":case"cloudy":case"partly cloudy":return e.jsx(Ce,{...A,className:"weather-icon cloudy"});case"rain":case"rainy":return e.jsx(cs,{...A,className:"weather-icon rainy"});case"snow":case"snowy":return e.jsx(Du,{...A,className:"weather-icon snowy"});case"thunderstorm":case"storm":return e.jsx(Eu,{...A,className:"weather-icon stormy"});default:return e.jsx(Lt,{...A,className:"weather-icon"})}},S=p=>p.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),N=p=>{const w=new Date(p),P=new Date,A=new Date(P);return A.setDate(A.getDate()+1),w.toDateString()===P.toDateString()?"Today":w.toDateString()===A.toDateString()?"Tomorrow":w.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})},j=p=>p>=35?"temp-very-hot":p>=25?"temp-hot":p>=15?"temp-warm":p>=5?"temp-cool":"temp-cold",v=p=>["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"][Math.round(p/22.5)%16];return c?e.jsxs("div",{className:"google-weather-ui loading",children:[e.jsx(L.div,{className:"loading-spinner",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:e.jsx(ft,{size:40})}),e.jsx("p",{children:"Loading weather data..."})]}):l?e.jsxs("div",{className:"google-weather-ui error",children:[e.jsx(je,{size:48}),e.jsx("h2",{children:"Weather Unavailable"}),e.jsx("p",{children:l}),e.jsxs("button",{onClick:C,className:"retry-button",children:[e.jsx(ft,{size:16}),"Retry"]})]}):e.jsxs("div",{className:"google-weather-ui",children:[e.jsxs(L.header,{className:"weather-header",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("div",{className:"location-info",children:[e.jsx(Je,{size:18}),e.jsx("span",{className:"location-name",children:r||n?.location||"Current Location"}),e.jsx("span",{className:"country-name",children:n?.country&&`, ${n.country}`})]}),e.jsxs("div",{className:"current-time",children:[e.jsx(Ae,{size:16}),e.jsx("span",{children:S(g)})]}),e.jsx("button",{onClick:C,className:"refresh-button",disabled:c,children:e.jsx(L.div,{animate:c?{rotate:360}:{rotate:0},transition:{duration:1,repeat:c?1/0:0},children:e.jsx(ft,{size:16})})})]}),e.jsxs(L.div,{className:"main-weather",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.1},children:[e.jsx("div",{className:"weather-icon-section",children:e.jsx(L.div,{className:"weather-icon-container",animate:{rotateY:[0,10,0,-10,0],scale:[1,1.05,1]},transition:{duration:3,repeat:1/0,repeatType:"reverse"},children:T(n?.weather,"xlarge")})}),e.jsxs("div",{className:"temperature-section",children:[e.jsxs("div",{className:"main-temperature",children:[e.jsxs("span",{className:`temperature-value ${j(n?.temperature)}`,children:[Math.round(n?.temperature||0),"°"]}),e.jsx("span",{className:"temperature-unit",children:"C"})]}),e.jsxs("div",{className:"weather-description",children:[e.jsx("p",{className:"condition",children:n?.weather||"Clear"}),e.jsx("p",{className:"description",children:n?.description||"Clear sky"})]}),e.jsxs("div",{className:"feels-like",children:["Feels like ",Math.round((n?.temperature||0)+2),"°C"]})]})]}),e.jsxs(L.div,{className:"weather-details",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:[e.jsxs("div",{className:"detail-card",children:[e.jsx("div",{className:"detail-icon",children:e.jsx(te,{size:24})}),e.jsxs("div",{className:"detail-content",children:[e.jsx("span",{className:"detail-label",children:"Humidity"}),e.jsxs("span",{className:"detail-value",children:[n?.humidity||0,"%"]})]})]}),e.jsxs("div",{className:"detail-card",children:[e.jsx("div",{className:"detail-icon",children:e.jsx(Ft,{size:24})}),e.jsxs("div",{className:"detail-content",children:[e.jsx("span",{className:"detail-label",children:"Wind"}),e.jsxs("span",{className:"detail-value",children:[Math.round(n?.windSpeed||0)," km/h",e.jsx("span",{className:"wind-direction",children:v(n?.windDirection||0)})]})]})]}),e.jsxs("div",{className:"detail-card",children:[e.jsx("div",{className:"detail-icon",children:e.jsx(ur,{size:24})}),e.jsxs("div",{className:"detail-content",children:[e.jsx("span",{className:"detail-label",children:"Pressure"}),e.jsxs("span",{className:"detail-value",children:[n?.pressure||0," hPa"]})]})]}),e.jsxs("div",{className:"detail-card",children:[e.jsx("div",{className:"detail-icon",children:e.jsx(We,{size:24})}),e.jsxs("div",{className:"detail-content",children:[e.jsx("span",{className:"detail-label",children:"Visibility"}),e.jsxs("span",{className:"detail-value",children:[Math.round((n?.visibility||0)/1e3)," km"]})]})]})]}),e.jsxs(L.div,{className:"forecast-section",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},children:[e.jsxs("h3",{className:"forecast-title",children:[e.jsx(Ee,{size:20}),"7-Day Forecast"]}),e.jsx("div",{className:"forecast-list",children:e.jsx(ps,{children:i.map((p,w)=>e.jsxs(L.div,{className:`forecast-item ${y===w?"selected":""}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:w*.1},onClick:()=>b(w),whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx("div",{className:"forecast-day",children:e.jsx("span",{className:"day-name",children:N(p.date)})}),e.jsx("div",{className:"forecast-icon",children:T(p.weather,"medium")}),e.jsxs("div",{className:"forecast-temps",children:[e.jsxs("span",{className:"temp-high",children:[Math.round(p.tempMax),"°"]}),e.jsxs("span",{className:"temp-low",children:[Math.round(p.tempMin),"°"]})]}),e.jsxs("div",{className:"forecast-condition",children:[e.jsx("span",{className:"condition-text",children:p.weather}),p.precipitation>0&&e.jsxs("span",{className:"precipitation",children:[e.jsx(te,{size:14}),Math.round(p.precipitation),"mm"]})]})]},w))})})]}),e.jsx(ps,{children:n?.alerts&&n.alerts.length>0&&e.jsxs(L.div,{className:"weather-alerts",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.4},children:[e.jsxs("h3",{className:"alerts-title",children:[e.jsx(je,{size:20}),"Weather Alerts"]}),n.alerts.map((p,w)=>e.jsxs("div",{className:"alert-item",children:[e.jsx("span",{className:"alert-title",children:p.title}),e.jsx("span",{className:"alert-description",children:p.description})]},w))]})})]})},ly=({latitude:t,longitude:s,locationName:r})=>{const[n,a]=x.useState(null),[i,o]=x.useState([]),[c,d]=x.useState(!0),[l,u]=x.useState(null),[h,m]=x.useState("overview"),[g,f]=x.useState(null),[y,b]=x.useState("7d"),[C,T]=x.useState([]),[S,N]=x.useState([]),[j,v]=x.useState([]),p=x.useRef(null);x.useEffect(()=>{t&&s&&(w(),P(),A())},[t,s]);const w=async()=>{try{d(!0),u(null);const[E,F,H]=await Promise.all([$.getCurrentWeather(t,s),$.getWeatherForecast(t,s,14),$.getWeatherHistory(t,s,30)]);E.success&&a(E.data),F.success&&o(F.data.forecasts||[]),H.success&&T(H.data.history||[])}catch(E){console.error("Weather fetch error:",E),u(E.message)}finally{d(!1)}},P=async()=>{try{const E=await $.getWeatherInsights(t,s);E.success&&f(E.data)}catch(E){console.error("AI insights fetch error:",E)}},A=async()=>{try{const E=await $.getCropRecommendations(t,s);E.success&&N(E.data.recommendations||[])}catch(E){console.error("Crop recommendations fetch error:",E)}},M=()=>{if(C.length<7)return"stable";const F=C.slice(-7).reduce((Y,fe)=>Y+fe.temperature,0)/7,Q=C.slice(-14,-7).reduce((Y,fe)=>Y+fe.temperature,0)/7;return F>Q+2?"warming":F<Q-2?"cooling":"stable"},V=()=>{if(!n)return null;const E=[];return n.temperature>35&&E.push({type:"warning",icon:ls,title:"Heat Stress Risk",description:"High temperatures may stress crops. Consider increasing irrigation.",severity:"high"}),n.temperature<5&&E.push({type:"warning",icon:Mu,title:"Frost Risk",description:"Low temperatures may damage sensitive crops. Consider protection measures.",severity:"high"}),n.humidity>80&&E.push({type:"caution",icon:te,title:"High Humidity",description:"Increased risk of fungal diseases. Monitor crop health closely.",severity:"medium"}),n.windSpeed>25&&E.push({type:"warning",icon:Ft,title:"Strong Winds",description:"High winds may damage crops. Secure loose structures.",severity:"medium"}),i[0]?.precipitation>20&&E.push({type:"info",icon:cs,title:"Heavy Rain Expected",description:"Good for soil moisture but may delay field work.",severity:"low"}),E},q=()=>e.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"overview-tab",children:[e.jsx(cy,{latitude:t,longitude:s,locationName:r}),e.jsxs(L.div,{className:"ai-insights-panel",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:[e.jsxs("div",{className:"panel-header",children:[e.jsx(ss,{className:"w-6 h-6 text-blue-600"}),e.jsx("h3",{children:"AI Weather Insights"})]}),g?e.jsxs("div",{className:"insights-content",children:[e.jsxs("div",{className:"insight-item",children:[e.jsx("div",{className:"insight-icon",children:e.jsx(ve,{className:"w-5 h-5"})}),e.jsxs("div",{className:"insight-text",children:[e.jsx("h4",{children:"Weekly Outlook"}),e.jsx("p",{children:g.weeklyOutlook||"Stable weather conditions expected"})]})]}),e.jsxs("div",{className:"insight-item",children:[e.jsx("div",{className:"insight-icon",children:e.jsx(vs,{className:"w-5 h-5"})}),e.jsxs("div",{className:"insight-text",children:[e.jsx("h4",{children:"Best Field Work Days"}),e.jsx("p",{children:g.bestDays||"Tuesday and Thursday look optimal"})]})]}),e.jsxs("div",{className:"insight-item",children:[e.jsx("div",{className:"insight-icon",children:e.jsx(te,{className:"w-5 h-5"})}),e.jsxs("div",{className:"insight-text",children:[e.jsx("h4",{children:"Irrigation Recommendation"}),e.jsx("p",{children:g.irrigation||"Reduce watering by 30% this week"})]})]})]}):e.jsxs("div",{className:"loading-insights",children:[e.jsx(L.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:e.jsx(ss,{className:"w-8 h-8 text-gray-400"})}),e.jsx("p",{children:"AI analyzing weather patterns..."})]})]}),V()?.length>0&&e.jsxs(L.div,{className:"agricultural-alerts",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.5},children:[e.jsxs("div",{className:"alerts-header",children:[e.jsx(je,{className:"w-6 h-6 text-amber-600"}),e.jsx("h3",{children:"Agricultural Impact Alerts"})]}),e.jsx("div",{className:"alerts-grid",children:V().map((E,F)=>e.jsxs(L.div,{className:`alert-card severity-${E.severity}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(E.icon,{className:"w-5 h-5"}),e.jsxs("div",{className:"alert-content",children:[e.jsx("h4",{children:E.title}),e.jsx("p",{children:E.description})]})]},F))})]})]}),I=()=>e.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"analytics-tab",children:[e.jsx("div",{className:"analytics-header",children:e.jsxs("div",{className:"tab-controls",children:[e.jsx("button",{className:y==="7d"?"active":"",onClick:()=>b("7d"),children:"7 Days"}),e.jsx("button",{className:y==="30d"?"active":"",onClick:()=>b("30d"),children:"30 Days"}),e.jsx("button",{className:y==="90d"?"active":"",onClick:()=>b("90d"),children:"3 Months"})]})}),e.jsxs(L.div,{className:"chart-container",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[e.jsxs("div",{className:"chart-header",children:[e.jsx("h3",{children:"Temperature & Precipitation Trends"}),e.jsxs("div",{className:"trend-indicator",children:[M()==="warming"&&e.jsxs("span",{className:"trend warming",children:[e.jsx(Pu,{className:"w-4 h-4"})," Warming Trend"]}),M()==="cooling"&&e.jsxs("span",{className:"trend cooling",children:[e.jsx(Iu,{className:"w-4 h-4"})," Cooling Trend"]}),M()==="stable"&&e.jsxs("span",{className:"trend stable",children:[e.jsx(Ru,{className:"w-4 h-4"})," Stable Pattern"]})]})]}),e.jsx("div",{className:"chart-placeholder",ref:p,children:e.jsxs("div",{className:"chart-mock",children:[e.jsx("div",{className:"chart-bars",children:C.slice(-7).map((E,F)=>e.jsx("div",{className:"chart-bar",style:{height:`${Math.max(10,(E.temperature+10)*2)}px`,backgroundColor:`hsl(${200+E.temperature}, 70%, 50%)`}},F))}),e.jsx("div",{className:"chart-labels",children:C.slice(-7).map((E,F)=>e.jsx("span",{className:"chart-label",children:new Date(E.date).toLocaleDateString("en-US",{weekday:"short"})},F))})]})})]}),e.jsxs("div",{className:"weather-stats",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(ls,{className:"w-6 h-6 text-red-500"})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h4",{children:"Avg Temperature"}),e.jsxs("div",{className:"stat-value",children:[C.length>0?Math.round(C.reduce((E,F)=>E+F.temperature,0)/C.length):0,"°C"]}),e.jsx("p",{className:"stat-change",children:"+2.1° vs last month"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(cs,{className:"w-6 h-6 text-blue-500"})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h4",{children:"Total Rainfall"}),e.jsxs("div",{className:"stat-value",children:[C.length>0?Math.round(C.reduce((E,F)=>E+(F.precipitation||0),0)):0,"mm"]}),e.jsx("p",{className:"stat-change",children:"-15mm vs last month"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(Lt,{className:"w-6 h-6 text-yellow-500"})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h4",{children:"Sunny Days"}),e.jsx("div",{className:"stat-value",children:C.filter(E=>E.weather?.toLowerCase().includes("clear")||E.weather?.toLowerCase().includes("sunny")).length}),e.jsx("p",{className:"stat-change",children:"+3 vs last month"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(We,{className:"w-6 h-6 text-purple-500"})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h4",{children:"Avg Humidity"}),e.jsxs("div",{className:"stat-value",children:[C.length>0?Math.round(C.reduce((E,F)=>E+(F.humidity||0),0)/C.length):0,"%"]}),e.jsx("p",{className:"stat-change",children:"-5% vs last month"})]})]})]})]}),O=()=>e.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"crop-advisory-tab",children:[e.jsxs("div",{className:"advisory-header",children:[e.jsx(Me,{className:"w-6 h-6 text-green-600"}),e.jsx("h3",{children:"Weather-Based Crop Advisory"})]}),e.jsxs("div",{className:"current-impact",children:[e.jsx("h4",{children:"Current Weather Impact on Crops"}),e.jsxs("div",{className:"impact-grid",children:[e.jsxs("div",{className:"impact-card positive",children:[e.jsx(Zs,{className:"w-8 h-8"}),e.jsxs("div",{className:"impact-content",children:[e.jsx("h5",{children:"Growth Conditions"}),e.jsx("p",{children:"Optimal temperature range for most crops"}),e.jsx("span",{className:"impact-score",children:"Excellent"})]})]}),e.jsxs("div",{className:"impact-card neutral",children:[e.jsx(te,{className:"w-8 h-8"}),e.jsxs("div",{className:"impact-content",children:[e.jsx("h5",{children:"Soil Moisture"}),e.jsx("p",{children:"Adequate moisture levels, monitor closely"}),e.jsx("span",{className:"impact-score",children:"Good"})]})]}),e.jsxs("div",{className:"impact-card warning",children:[e.jsx(Ft,{className:"w-8 h-8"}),e.jsxs("div",{className:"impact-content",children:[e.jsx("h5",{children:"Wind Stress"}),e.jsx("p",{children:"Moderate winds may affect tall crops"}),e.jsx("span",{className:"impact-score",children:"Caution"})]})]})]})]}),e.jsxs("div",{className:"crop-recommendations",children:[e.jsx("h4",{children:"Recommended Actions"}),e.jsx("div",{className:"recommendations-list",children:S.length>0?S.map((E,F)=>e.jsxs(L.div,{className:"recommendation-card",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:F*.1},children:[e.jsx("div",{className:"rec-priority",children:e.jsx("span",{className:`priority-badge priority-${E.priority}`,children:E.priority?.toUpperCase()})}),e.jsxs("div",{className:"rec-content",children:[e.jsx("h5",{children:E.title}),e.jsx("p",{children:E.description}),E.weatherBased&&e.jsxs("span",{className:"weather-based-tag",children:[e.jsx(Ce,{className:"w-4 h-4"}),"Weather-based recommendation"]})]})]},F)):e.jsxs("div",{className:"no-recommendations",children:[e.jsx(Me,{className:"w-12 h-12 text-gray-300"}),e.jsx("p",{children:"No specific recommendations at this time. Current conditions are favorable."})]})})]}),e.jsxs("div",{className:"seasonal-planning",children:[e.jsx("h4",{children:"Seasonal Planning Based on Weather Patterns"}),e.jsxs("div",{className:"planning-timeline",children:[e.jsxs("div",{className:"timeline-item active",children:[e.jsx("div",{className:"timeline-marker"}),e.jsxs("div",{className:"timeline-content",children:[e.jsx("h5",{children:"Current Week"}),e.jsx("p",{children:"Focus on irrigation management and pest monitoring"})]})]}),e.jsxs("div",{className:"timeline-item",children:[e.jsx("div",{className:"timeline-marker"}),e.jsxs("div",{className:"timeline-content",children:[e.jsx("h5",{children:"Next 2 Weeks"}),e.jsx("p",{children:"Prepare for temperature changes, plan harvest timing"})]})]}),e.jsxs("div",{className:"timeline-item",children:[e.jsx("div",{className:"timeline-marker"}),e.jsxs("div",{className:"timeline-content",children:[e.jsx("h5",{children:"Next Month"}),e.jsx("p",{children:"Consider seasonal crop rotation based on climate trends"})]})]})]})]})]}),z=[{id:"overview",label:"Overview",icon:We},{id:"analytics",label:"Analytics",icon:Ns},{id:"advisory",label:"Crop Advisory",icon:Me}];return e.jsxs("div",{className:"enhanced-weather-dashboard",children:[e.jsx("div",{className:"dashboard-tabs",children:z.map(E=>e.jsxs("button",{className:`tab-button ${h===E.id?"active":""}`,onClick:()=>m(E.id),children:[e.jsx(E.icon,{className:"w-5 h-5"}),E.label]},E.id))}),e.jsxs("div",{className:"tab-content",children:[h==="overview"&&q(),h==="analytics"&&I(),h==="advisory"&&O()]}),e.jsx("style",{jsx:!0,children:`
        .enhanced-weather-dashboard {
          max-width: 1200px;
          margin: 0 auto;
          padding: 20px;
        }

        .dashboard-tabs {
          display: flex;
          gap: 4px;
          background: white;
          border-radius: 12px;
          padding: 6px;
          margin-bottom: 24px;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .tab-button {
          flex: 1;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 8px;
          padding: 12px 20px;
          border: none;
          background: transparent;
          color: #6b7280;
          border-radius: 8px;
          cursor: pointer;
          transition: all 0.2s ease;
          font-weight: 500;
        }

        .tab-button.active {
          background: linear-gradient(135deg, #10b981, #059669);
          color: white;
          box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
        }

        .tab-button:hover:not(.active) {
          background: #f3f4f6;
          color: #374151;
        }

        .tab-content {
          min-height: 600px;
        }

        .ai-insights-panel {
          background: white;
          border-radius: 16px;
          padding: 24px;
          margin: 24px 0;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .panel-header {
          display: flex;
          align-items: center;
          gap: 12px;
          margin-bottom: 20px;
          padding-bottom: 16px;
          border-bottom: 1px solid #e5e7eb;
        }

        .panel-header h3 {
          margin: 0;
          font-size: 1.25rem;
          font-weight: 600;
          color: #111827;
        }

        .insights-content {
          display: flex;
          flex-direction: column;
          gap: 16px;
        }

        .insight-item {
          display: flex;
          align-items: flex-start;
          gap: 12px;
          padding: 16px;
          background: #f8fafc;
          border-radius: 12px;
          border-left: 4px solid #10b981;
        }

        .insight-icon {
          flex-shrink: 0;
          width: 40px;
          height: 40px;
          background: #10b981;
          border-radius: 10px;
          display: flex;
          align-items: center;
          justify-content: center;
          color: white;
        }

        .insight-text h4 {
          margin: 0 0 4px 0;
          font-size: 1rem;
          font-weight: 600;
          color: #111827;
        }

        .insight-text p {
          margin: 0;
          color: #6b7280;
          line-height: 1.5;
        }

        .loading-insights {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: 40px;
          text-align: center;
          color: #6b7280;
        }

        .agricultural-alerts {
          background: white;
          border-radius: 16px;
          padding: 24px;
          margin: 24px 0;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .alerts-header {
          display: flex;
          align-items: center;
          gap: 12px;
          margin-bottom: 20px;
        }

        .alerts-header h3 {
          margin: 0;
          font-size: 1.25rem;
          font-weight: 600;
          color: #d97706;
        }

        .alerts-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
          gap: 16px;
        }

        .alert-card {
          display: flex;
          align-items: flex-start;
          gap: 12px;
          padding: 16px;
          border-radius: 12px;
          cursor: pointer;
          transition: all 0.2s ease;
        }

        .alert-card.severity-high {
          background: #fef2f2;
          border: 1px solid #fecaca;
          color: #dc2626;
        }

        .alert-card.severity-medium {
          background: #fffbeb;
          border: 1px solid #fed7aa;
          color: #d97706;
        }

        .alert-card.severity-low {
          background: #f0f9ff;
          border: 1px solid #bae6fd;
          color: #0369a1;
        }

        .alert-content h4 {
          margin: 0 0 4px 0;
          font-weight: 600;
        }

        .alert-content p {
          margin: 0;
          font-size: 0.875rem;
        }

        .analytics-tab {
          background: white;
          border-radius: 16px;
          padding: 24px;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .analytics-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 24px;
        }

        .tab-controls {
          display: flex;
          gap: 8px;
          background: #f3f4f6;
          border-radius: 8px;
          padding: 4px;
        }

        .tab-controls button {
          padding: 8px 16px;
          border: none;
          background: transparent;
          border-radius: 6px;
          cursor: pointer;
          transition: all 0.2s ease;
          color: #6b7280;
        }

        .tab-controls button.active {
          background: white;
          color: #111827;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .chart-container {
          background: white;
          border-radius: 12px;
          padding: 20px;
          margin-bottom: 24px;
          border: 1px solid #e5e7eb;
        }

        .chart-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 16px;
        }

        .chart-header h3 {
          margin: 0;
          font-size: 1.125rem;
          font-weight: 600;
        }

        .trend {
          display: flex;
          align-items: center;
          gap: 6px;
          font-size: 0.875rem;
          font-weight: 500;
        }

        .trend.warming { color: #dc2626; }
        .trend.cooling { color: #2563eb; }
        .trend.stable { color: #059669; }

        .chart-mock {
          height: 200px;
          position: relative;
          background: #f9fafb;
          border-radius: 8px;
          padding: 20px;
          display: flex;
          flex-direction: column;
        }

        .chart-bars {
          flex: 1;
          display: flex;
          align-items: end;
          justify-content: space-around;
          gap: 8px;
        }

        .chart-bar {
          flex: 1;
          border-radius: 4px 4px 0 0;
          min-height: 20px;
          transition: all 0.3s ease;
        }

        .chart-bar:hover {
          opacity: 0.8;
        }

        .chart-labels {
          display: flex;
          justify-content: space-around;
          margin-top: 12px;
          font-size: 0.75rem;
          color: #6b7280;
        }

        .weather-stats {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
          gap: 16px;
        }

        .stat-card {
          display: flex;
          align-items: center;
          gap: 16px;
          background: white;
          padding: 20px;
          border-radius: 12px;
          border: 1px solid #e5e7eb;
        }

        .stat-icon {
          flex-shrink: 0;
          width: 48px;
          height: 48px;
          border-radius: 12px;
          display: flex;
          align-items: center;
          justify-content: center;
          background: #f3f4f6;
        }

        .stat-content h4 {
          margin: 0 0 4px 0;
          font-size: 0.875rem;
          color: #6b7280;
          font-weight: 500;
        }

        .stat-value {
          font-size: 1.5rem;
          font-weight: 700;
          color: #111827;
          margin-bottom: 4px;
        }

        .stat-change {
          margin: 0;
          font-size: 0.75rem;
          color: #10b981;
        }

        .crop-advisory-tab {
          background: white;
          border-radius: 16px;
          padding: 24px;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .advisory-header {
          display: flex;
          align-items: center;
          gap: 12px;
          margin-bottom: 24px;
          padding-bottom: 16px;
          border-bottom: 1px solid #e5e7eb;
        }

        .advisory-header h3 {
          margin: 0;
          font-size: 1.25rem;
          font-weight: 600;
        }

        .current-impact h4,
        .crop-recommendations h4,
        .seasonal-planning h4 {
          font-size: 1.125rem;
          font-weight: 600;
          margin: 0 0 16px 0;
          color: #111827;
        }

        .impact-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
          gap: 16px;
          margin-bottom: 32px;
        }

        .impact-card {
          display: flex;
          align-items: center;
          gap: 16px;
          padding: 20px;
          border-radius: 12px;
          border: 2px solid;
        }

        .impact-card.positive {
          background: #f0fdf4;
          border-color: #bbf7d0;
          color: #166534;
        }

        .impact-card.neutral {
          background: #fffbeb;
          border-color: #fed7aa;
          color: #d97706;
        }

        .impact-card.warning {
          background: #fef2f2;
          border-color: #fecaca;
          color: #dc2626;
        }

        .impact-content h5 {
          margin: 0 0 4px 0;
          font-weight: 600;
        }

        .impact-content p {
          margin: 0 0 8px 0;
          font-size: 0.875rem;
        }

        .impact-score {
          font-size: 0.75rem;
          font-weight: 600;
          text-transform: uppercase;
        }

        .recommendations-list {
          display: flex;
          flex-direction: column;
          gap: 16px;
          margin-bottom: 32px;
        }

        .recommendation-card {
          display: flex;
          gap: 16px;
          padding: 20px;
          background: #f8fafc;
          border-radius: 12px;
          border-left: 4px solid #10b981;
        }

        .rec-priority {
          flex-shrink: 0;
        }

        .priority-badge {
          padding: 4px 8px;
          border-radius: 6px;
          font-size: 0.75rem;
          font-weight: 600;
          text-transform: uppercase;
        }

        .priority-badge.priority-high {
          background: #dc2626;
          color: white;
        }

        .priority-badge.priority-medium {
          background: #d97706;
          color: white;
        }

        .priority-badge.priority-low {
          background: #10b981;
          color: white;
        }

        .rec-content h5 {
          margin: 0 0 8px 0;
          font-weight: 600;
        }

        .rec-content p {
          margin: 0 0 8px 0;
          color: #6b7280;
          line-height: 1.5;
        }

        .weather-based-tag {
          display: inline-flex;
          align-items: center;
          gap: 4px;
          padding: 4px 8px;
          background: #dbeafe;
          color: #1e40af;
          border-radius: 6px;
          font-size: 0.75rem;
          font-weight: 500;
        }

        .no-recommendations {
          text-align: center;
          padding: 40px;
          color: #6b7280;
        }

        .planning-timeline {
          position: relative;
        }

        .timeline-item {
          position: relative;
          padding-left: 40px;
          padding-bottom: 24px;
        }

        .timeline-item:not(:last-child)::before {
          content: '';
          position: absolute;
          left: 12px;
          top: 24px;
          bottom: -24px;
          width: 2px;
          background: #e5e7eb;
        }

        .timeline-marker {
          position: absolute;
          left: 0;
          top: 6px;
          width: 24px;
          height: 24px;
          background: #e5e7eb;
          border-radius: 50%;
        }

        .timeline-item.active .timeline-marker {
          background: #10b981;
        }

        .timeline-content h5 {
          margin: 0 0 8px 0;
          font-weight: 600;
        }

        .timeline-content p {
          margin: 0;
          color: #6b7280;
          font-size: 0.875rem;
          line-height: 1.5;
        }

        @media (max-width: 768px) {
          .enhanced-weather-dashboard {
            padding: 16px;
          }

          .dashboard-tabs {
            overflow-x: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
          }

          .dashboard-tabs::-webkit-scrollbar {
            display: none;
          }

          .tab-button {
            flex: none;
            white-space: nowrap;
          }

          .impact-grid,
          .weather-stats {
            grid-template-columns: 1fr;
          }

          .analytics-header {
            flex-direction: column;
            gap: 16px;
            align-items: stretch;
          }

          .chart-header {
            flex-direction: column;
            align-items: flex-start;
            gap: 12px;
          }
        }
      `})]})},dy=()=>{const[t,s]=x.useState(null),[r,n]=x.useState(""),[a,i]=x.useState(!0),{user:o}=Ct();x.useEffect(()=>{c()},[]);const c=async()=>{try{i(!0);const d=await Wn.getCurrentLocation();if(d){s(d);const l=await Wn.getLocationName(d.latitude,d.longitude);n(l||"Current Location")}else s({latitude:20.2961,longitude:85.8245}),n("Jatani, Odisha")}catch(d){console.error("Location initialization error:",d),s({latitude:20.2961,longitude:85.8245}),n("Jatani, Odisha")}finally{i(!1)}};return a?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Loading weather dashboard..."})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Farmora Weather Intelligence"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Advanced weather analytics and agricultural insights powered by AI"})]}),e.jsx(ly,{latitude:t?.latitude,longitude:t?.longitude,locationName:r})]})})},uy="http://localhost:5000/api";class hy{constructor(){this.api=se.create({baseURL:`${uy}/chatbot`,timeout:3e4,headers:{"Content-Type":"application/json"}}),this.api.interceptors.request.use(s=>{const r=localStorage.getItem("token");return r&&(s.headers.Authorization=`Bearer ${r}`),s},s=>Promise.reject(s)),this.api.interceptors.response.use(s=>s,s=>(console.error("Chatbot API Error:",s),Promise.reject(s)))}async sendMessage(s,r,n=null,a={}){try{return(await this.api.post("/chat",{message:s,userId:r,sessionId:n||this.generateSessionId(),context:{language:a.language||"en",cropType:a.cropType,location:a.location,farmSize:a.farmSize,experience:a.experience,...a},timestamp:new Date().toISOString()})).data}catch(i){throw console.error("Send message error:",i),new Error("Failed to send message. Please try again.")}}async getChatHistory(s,r,n=50,a=0){try{return(await this.api.get("/history",{params:{userId:s,sessionId:r,limit:n,offset:a}})).data}catch(i){throw console.error("Get chat history error:",i),new Error("Failed to load chat history.")}}async getSuggestedQuestions(s={}){try{return(await this.api.get("/suggestions",{params:{cropType:s.cropType,season:s.season,growthStage:s.growthStage,language:s.language||"en",category:s.category}})).data}catch(r){return console.error("Get suggestions error:",r),{suggestions:[]}}}async processVoiceInput(s,r={}){try{const n=new FormData;return n.append("audio",s,"voice_input.wav"),n.append("language",r.language||"en"),n.append("userId",r.userId||""),n.append("sessionId",r.sessionId||""),(await this.api.post("/voice",n,{headers:{"Content-Type":"multipart/form-data"},timeout:6e4})).data}catch(n){throw console.error("Voice processing error:",n),new Error("Failed to process voice input. Please try again.")}}async getTextToSpeech(s,r="en",n="female"){try{return(await this.api.post("/tts",{text:s,language:r,voice:n},{responseType:"blob"})).data}catch(a){throw console.error("Text-to-speech error:",a),new Error("Failed to generate speech.")}}async getFarmingTips(s,r={}){try{return(await this.api.get("/tips",{params:{category:s,cropType:r.cropType,season:r.season,language:r.language||"en",experience:r.experience||"intermediate"}})).data}catch(n){return console.error("Get farming tips error:",n),{tips:[]}}}async getQuickResponses(s,r={}){try{return(await this.api.post("/quick-response",{query:s,context:r})).data}catch(n){throw console.error("Quick response error:",n),new Error("Failed to get quick response.")}}async submitFeedback(s,r,n){try{return(await this.api.post("/feedback",{sessionId:s,messageId:r,feedback:{helpful:n.helpful,rating:n.rating,comment:n.comment,timestamp:new Date().toISOString()}})).data}catch(a){return console.error("Submit feedback error:",a),{success:!1}}}async getBotAnalytics(s,r="7d"){try{return(await this.api.get("/analytics",{params:{userId:s,period:r}})).data}catch(n){return console.error("Get analytics error:",n),{analytics:{}}}}async searchChatHistory(s,r,n=20){try{return(await this.api.get("/search",{params:{userId:s,query:r,limit:n}})).data}catch(a){return console.error("Search chat history error:",a),{results:[]}}}async getSupportedLanguages(){try{return(await this.api.get("/languages")).data}catch(s){return console.error("Get languages error:",s),{languages:[{code:"en",name:"English",native:"English"},{code:"hi",name:"Hindi",native:"हिंदी"},{code:"mr",name:"Marathi",native:"मराठी"},{code:"gu",name:"Gujarati",native:"ગુજરાતી"}]}}}async exportChatHistory(s,r,n="json"){try{return(await this.api.get("/export",{params:{userId:s,sessionId:r,format:n},responseType:n==="json"?"json":"blob"})).data}catch(a){throw console.error("Export chat history error:",a),new Error("Failed to export chat history.")}}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}isOnline(){return navigator.onLine}async cacheCommonResponses(){try{const s=["weather forecast","crop recommendations","market prices","pest identification","irrigation tips"],r={};for(const n of s)try{const a=await this.getQuickResponses(n);r[n]=a}catch{console.warn(`Failed to cache response for: ${n}`)}return localStorage.setItem("cachedBotResponses",JSON.stringify(r)),r}catch(s){console.error("Cache responses error:",s)}}getCachedResponse(s){try{return JSON.parse(localStorage.getItem("cachedBotResponses")||"{}")[s]||null}catch(r){return console.error("Get cached response error:",r),null}}formatMessage(s){return{...s,timestamp:new Date(s.timestamp),formattedTime:new Date(s.timestamp).toLocaleTimeString(),isFromUser:s.sender==="user",isFromBot:s.sender==="bot"}}validateMessage(s){if(!s||s.trim().length===0)throw new Error("Message cannot be empty.");if(s.length>1e3)throw new Error("Message is too long. Please keep it under 1000 characters.");return s.trim()}async detectLanguage(s){try{return(await this.api.post("/detect-language",{text:s})).data}catch(r){return console.error("Language detection error:",r),{language:"en",confidence:.5}}}async getContextualHelp(s,r=null){try{return(await this.api.get("/contextual-help",{params:{page:s,action:r}})).data}catch(n){return console.error("Contextual help error:",n),{help:[]}}}}const Qt=new hy,my=()=>{const[t,s]=x.useState([]),[r,n]=x.useState(""),[a,i]=x.useState(!1),[o,c]=x.useState(!1),[d,l]=x.useState(!1),[u,h]=x.useState([]),[m,g]=x.useState(null),[f,y]=x.useState(!0),[b,C]=x.useState([]),[T,S]=x.useState(null),[N,j]=x.useState(null),[v,p]=x.useState("general"),{user:w}=Ct(),P=x.useRef(null),A=x.useRef(null),M=x.useRef(null),V=x.useRef(null);x.useEffect(()=>{q(),I(),O()},[]);const q=async()=>{const R=Qt.generateSessionId();j(R);const W={id:Date.now(),text:"Hello! I'm your smart farming assistant. I can help you with crop advice, weather insights, pest identification, market information, and much more. How can I assist you today?",sender:"bot",timestamp:new Date,type:"text",suggestions:["What's the best time to plant wheat?","Identify this pest in my crops","Current weather impact on farming","Market prices for my crops"]};s([W])},I=async()=>{try{const R=await $.getChatHistory(w?.id,10);R.success&&R.data&&h(R.data)}catch(R){console.error("Error loading chat history:",R)}},O=async()=>{try{const R=await Qt.getSuggestedQuestions({cropType:w?.currentCrop||"general",category:v,language:"en"});R.suggestions&&C(R.suggestions)}catch(R){console.error("Error loading suggestions:",R),C(["What crops should I plant this season?","How to prevent pest attacks?","Best irrigation schedule for my crops","Current market prices in my area","Weather forecast for farming"])}},z=async(R,W=null)=>{if(!R.trim()&&!W)return;const xe={id:Date.now(),text:R||"Image uploaded",sender:"user",timestamp:new Date,type:W?"image":"text",imageUrl:W?URL.createObjectURL(W):null,imageFile:W};s(re=>[...re,xe]),n(""),S(null),y(!1),i(!0),c(!0);try{let re;W?re=await E(R,W):re=await $.sendChatMessage(R,{userId:w?.id,sessionId:N,cropType:w?.currentCrop,location:w?.location,language:"en",mode:v,chatHistory:t.slice(-5)});const Gt={id:Date.now()+1,text:re.response||re.message||"I'm sorry, I couldn't process that request.",sender:"bot",timestamp:new Date,type:"text",confidence:re.confidence,sources:re.sources,actions:re.actions,suggestions:re.suggestions};s(Jt=>[...Jt,Gt])}catch(re){console.error("Error sending message:",re);const Gt={id:Date.now()+1,text:"I apologize, but I'm having trouble responding right now. Please try again in a moment.",sender:"bot",timestamp:new Date,type:"error"};s(Jt=>[...Jt,Gt])}finally{i(!1),c(!1)}},E=async(R,W)=>v==="pest"||R.toLowerCase().includes("pest")||R.toLowerCase().includes("disease")?await $.detectPest(W,w?.currentCrop||"general"):await $.analyzeCropImage(W,w?.currentCrop||"general"),F=async()=>{try{const R=await navigator.mediaDevices.getUserMedia({audio:!0});M.current=new MediaRecorder(R);const W=[];M.current.ondataavailable=xe=>{W.push(xe.data)},M.current.onstop=async()=>{const xe=new Blob(W,{type:"audio/wav"});try{const re=await Qt.processVoiceInput(xe,{language:"en",userId:w?.id,sessionId:N});re.transcription&&n(re.transcription)}catch(re){console.error("Voice processing error:",re)}R.getTracks().forEach(re=>re.stop())},M.current.start(),l(!0)}catch(R){console.error("Error starting voice recording:",R)}},H=()=>{M.current&&(M.current.stop(),l(!1))},Q=R=>{const W=R.target.files[0];W&&S(W)},Y=R=>{n(R),y(!1),A.current?.focus()},fe=R=>{navigator.clipboard.writeText(R)},Ye=async(R,W)=>{try{await Qt.submitFeedback(N,R,{helpful:W,rating:W?5:2,comment:W?"Helpful response":"Not helpful"})}catch(xe){console.error("Error submitting feedback:",xe)}},Xe=()=>{s([]),j(Qt.generateSessionId()),y(!0),q()},kt=()=>{P.current?.scrollIntoView({behavior:"smooth"})};x.useEffect(()=>{kt()},[t]);const Dr=R=>new Date(R).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),Rs=R=>{R.key==="Enter"&&!R.shiftKey&&(R.preventDefault(),T?z(r,T):z(r))};return e.jsxs("div",{className:"ai-chat",children:[e.jsxs("div",{className:"chat-header",children:[e.jsxs("div",{className:"chat-title",children:[e.jsxs("div",{className:"bot-avatar",children:[e.jsx(ss,{className:"bot-icon"}),e.jsx("div",{className:"status-indicator online"})]}),e.jsxs("div",{className:"chat-info",children:[e.jsx("h2",{children:"Smart Farm Assistant"}),e.jsx("span",{className:"status-text",children:"Online • Always here to help"})]})]}),e.jsxs("div",{className:"chat-actions",children:[e.jsx("div",{className:"mode-selector",children:e.jsxs("select",{value:v,onChange:R=>p(R.target.value),className:"mode-select",children:[e.jsx("option",{value:"general",children:"General"}),e.jsx("option",{value:"pest",children:"Pest & Disease"}),e.jsx("option",{value:"weather",children:"Weather"}),e.jsx("option",{value:"market",children:"Market"}),e.jsx("option",{value:"advisory",children:"Advisory"})]})}),e.jsx("button",{className:"action-btn",onClick:Xe,children:e.jsx(ws,{className:"action-icon"})}),e.jsx("button",{className:"action-btn",children:e.jsx(hr,{className:"action-icon"})}),e.jsx("button",{className:"action-btn",children:e.jsx(Ou,{className:"action-icon"})})]})]}),e.jsxs("div",{className:"messages-container",children:[e.jsx(ps,{children:t.map(R=>e.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`message ${R.sender}`,children:[e.jsx("div",{className:"message-avatar",children:R.sender==="bot"?e.jsx("div",{className:"bot-avatar small",children:e.jsx(ss,{className:"avatar-icon"})}):e.jsx("div",{className:"user-avatar",children:e.jsx(Te,{className:"avatar-icon"})})}),e.jsxs("div",{className:"message-content",children:[e.jsxs("div",{className:"message-bubble",children:[R.type==="image"&&R.imageUrl&&e.jsx("div",{className:"message-image",children:e.jsx("img",{src:R.imageUrl,alt:"Uploaded content"})}),e.jsx("div",{className:"message-text",children:R.text}),R.confidence&&e.jsxs("div",{className:"confidence-indicator",children:[e.jsx(dr,{className:"confidence-icon"}),e.jsxs("span",{children:["Confidence: ",Math.round(R.confidence*100),"%"]})]}),R.sources&&e.jsx("div",{className:"message-sources",children:e.jsxs("small",{children:["Sources: ",R.sources.join(", ")]})}),R.actions&&e.jsx("div",{className:"message-actions",children:R.actions.map((W,xe)=>e.jsx("button",{className:"action-button",children:W.label},xe))})]}),e.jsxs("div",{className:"message-meta",children:[e.jsx("span",{className:"message-time",children:Dr(R.timestamp)}),R.sender==="bot"&&e.jsxs("div",{className:"message-controls",children:[e.jsx("button",{className:"control-btn",onClick:()=>fe(R.text),children:e.jsx(Fu,{className:"control-icon"})}),e.jsx("button",{className:"control-btn",onClick:()=>Ye(R.id,!0),children:e.jsx(cc,{className:"control-icon"})}),e.jsx("button",{className:"control-btn",onClick:()=>Ye(R.id,!1),children:e.jsx(lc,{className:"control-icon"})})]})]}),R.suggestions&&e.jsx("div",{className:"message-suggestions",children:R.suggestions.map((W,xe)=>e.jsx("button",{className:"suggestion-chip",onClick:()=>Y(W),children:W},xe))})]})]},R.id))}),a&&e.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"message bot",children:[e.jsx("div",{className:"message-avatar",children:e.jsx("div",{className:"bot-avatar small",children:e.jsx(ss,{className:"avatar-icon"})})}),e.jsx("div",{className:"message-content",children:e.jsxs("div",{className:"typing-indicator",children:[e.jsxs("div",{className:"typing-dots",children:[e.jsx("div",{className:"dot"}),e.jsx("div",{className:"dot"}),e.jsx("div",{className:"dot"})]}),e.jsx("span",{children:"Assistant is typing..."})]})})]}),f&&b.length>0&&e.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"suggestions-container",children:[e.jsx("h3",{children:"Suggested Questions"}),e.jsx("div",{className:"suggestions-grid",children:b.slice(0,6).map((R,W)=>e.jsxs("button",{className:"suggestion-card",onClick:()=>Y(R),children:[e.jsx(Ve,{className:"suggestion-icon"}),e.jsx("span",{children:R})]},W))})]}),e.jsx("div",{ref:P})]}),T&&e.jsxs("div",{className:"image-preview",children:[e.jsxs("div",{className:"preview-container",children:[e.jsx("img",{src:URL.createObjectURL(T),alt:"Upload preview"}),e.jsx("button",{className:"remove-image",onClick:()=>S(null),children:e.jsx(bt,{className:"remove-icon"})})]}),e.jsx("span",{className:"preview-text",children:"Image ready to send"})]}),e.jsxs("div",{className:"input-container",children:[e.jsxs("div",{className:"input-wrapper",children:[e.jsxs("div",{className:"input-actions-left",children:[e.jsx("button",{className:"input-action",onClick:()=>V.current?.click(),children:e.jsx(Lu,{className:"action-icon"})}),e.jsx("button",{className:"input-action",onClick:()=>V.current?.click(),children:e.jsx(uc,{className:"action-icon"})}),e.jsx("button",{className:"input-action",onClick:()=>V.current?.click(),children:e.jsx(hn,{className:"action-icon"})})]}),e.jsx("div",{className:"message-input-container",children:e.jsx("textarea",{ref:A,value:r,onChange:R=>n(R.target.value),onKeyPress:Rs,placeholder:"Ask me anything about farming...",className:"message-input",rows:"1",disabled:o})}),e.jsxs("div",{className:"input-actions-right",children:[e.jsx("button",{className:`voice-btn ${d?"recording":""}`,onMouseDown:F,onMouseUp:H,onMouseLeave:H,children:d?e.jsx(na,{className:"action-icon"}):e.jsx(ra,{className:"action-icon"})}),e.jsx("button",{className:"send-btn",onClick:()=>T?z(r,T):z(r),disabled:!r.trim()&&!T,children:o?e.jsx(mr,{className:"action-icon loading"}):e.jsx(_u,{className:"action-icon"})})]})]}),e.jsx("div",{className:"input-hint",children:e.jsx("span",{children:"Press Enter to send, Shift+Enter for new line"})})]}),e.jsx("input",{ref:V,type:"file",accept:"image/*",onChange:Q,style:{display:"none"}})]})},py=()=>{const[t,s]=x.useState("dashboard"),[r,n]=x.useState([]),[a,i]=x.useState([]),[o,c]=x.useState(null),[d,l]=x.useState(null),[u,h]=x.useState(!0),[m,g]=x.useState(!0),[f,y]=x.useState(!1),[b,C]=x.useState(!1),[T,S]=x.useState("disconnected"),[N,j]=x.useState([]),[v,p]=x.useState(""),[w,P]=x.useState(!1),[A,M]=x.useState(null),[V,q]=x.useState(null),[I,O]=x.useState(null),z=x.useRef(null),E=x.useRef(null),{user:F}=Ct();x.useEffect(()=>(H(),Q(),Y(),()=>{A&&A.getTracks().forEach(D=>D.stop()),I&&I.close()}),[]);const H=async()=>{try{const D=await $.getUserConsultations(F?.id);D.success&&n(D.consultations||xe)}catch(D){console.error("Error loading consultations:",D),n(xe)}},Q=async()=>{try{const D=await $.getAvailableExperts();D.success&&i(D.experts||W)}catch(D){console.error("Error loading experts:",D),i(W)}},Y=async()=>{try{const D={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]},ue=new RTCPeerConnection(D);ue.oniceconnectionstatechange=()=>{S(ue.iceConnectionState)},ue.ontrack=Tt=>{q(Tt.streams[0])},O(ue)}catch(D){console.error("Error initializing WebRTC:",D)}},fe=async()=>{try{const D=await navigator.mediaDevices.getUserMedia({video:u,audio:m});M(D),z.current&&(z.current.srcObject=D),I&&D.getTracks().forEach(ue=>{I.addTrack(ue,D)})}catch(D){console.error("Error accessing media devices:",D)}},Ye=()=>{if(A){const D=A.getVideoTracks()[0];D&&(D.enabled=!D.enabled,h(D.enabled))}},Xe=()=>{if(A){const D=A.getAudioTracks()[0];D&&(D.enabled=!D.enabled,g(D.enabled))}},kt=async D=>{try{await fe();const ue=await $.startConsultation(D);ue.success&&(l(ue.consultation),y(!0),s("consultation"),S("connecting"))}catch(ue){console.error("Error starting consultation:",ue)}},Dr=async()=>{try{d&&await $.endConsultation(d.id),A&&(A.getTracks().forEach(D=>D.stop()),M(null)),I&&(I.close(),Y()),y(!1),l(null),S("disconnected"),s("dashboard")}catch(D){console.error("Error ending consultation:",D)}},Rs=()=>{if(v.trim()){const D={id:Date.now(),sender:F?.name||"You",message:v,timestamp:new Date};j(ue=>[...ue,D]),p("")}},R=()=>{document.fullscreenElement?(document.exitFullscreen(),C(!1)):(document.documentElement.requestFullscreen(),C(!0))},W=[{id:1,name:"Dr. Rajesh Kumar",specialty:"Crop Disease Specialist",experience:15,rating:4.9,reviews:234,avatar:"/api/placeholder/150/150",languages:["Hindi","English","Marathi"],location:"Pune, Maharashtra",availability:"Available Now",price:500,credentials:["PhD in Plant Pathology","20+ years experience"],specializations:["Disease Diagnosis","Pest Management","Organic Farming"]},{id:2,name:"Dr. Priya Sharma",specialty:"Soil & Fertility Expert",experience:12,rating:4.8,reviews:189,avatar:"/api/placeholder/150/150",languages:["Hindi","English","Gujarati"],location:"Gandhinagar, Gujarat",availability:"Available from 2 PM",price:450,credentials:["MSc Soil Science","Agricultural Consultant"],specializations:["Soil Testing","Nutrient Management","Sustainable Agriculture"]}],xe=[{id:1,expert:W[0],scheduledTime:new Date(Date.now()+7200*1e3),topic:"Wheat crop disease identification",status:"scheduled",duration:30},{id:2,expert:W[1],scheduledTime:new Date(Date.now()-1440*60*1e3),topic:"Soil fertility management",status:"completed",duration:45,rating:5,feedback:"Very helpful session, got exactly what I needed."}],re=()=>e.jsxs("div",{className:"consultation-dashboard",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsx("h1",{children:"Video Consultations"}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("button",{className:"btn-primary",onClick:()=>s("experts"),children:[e.jsx(Ee,{className:"btn-icon"}),"Book Consultation"]}),e.jsxs("button",{className:"btn-secondary",onClick:()=>s("experts"),children:[e.jsx(ta,{className:"btn-icon"}),"View Experts"]})]})]}),e.jsxs("div",{className:"consultation-stats",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-number",children:"12"}),e.jsx("div",{className:"stat-label",children:"Total Consultations"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-number",children:"3"}),e.jsx("div",{className:"stat-label",children:"This Month"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-number",children:"4.8"}),e.jsx("div",{className:"stat-label",children:"Avg Rating"})]})]}),e.jsxs("div",{className:"consultations-section",children:[e.jsx("h2",{children:"Your Consultations"}),e.jsx("div",{className:"consultations-grid",children:r.map(D=>e.jsxs("div",{className:"consultation-card",children:[e.jsxs("div",{className:"consultation-header",children:[e.jsxs("div",{className:"expert-info",children:[e.jsx("img",{src:D.expert.avatar,alt:D.expert.name,className:"expert-avatar"}),e.jsxs("div",{children:[e.jsx("h3",{children:D.expert.name}),e.jsx("p",{children:D.expert.specialty})]})]}),e.jsx("div",{className:`status-badge ${D.status}`,children:D.status.toUpperCase()})]}),e.jsxs("div",{className:"consultation-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx(Ae,{className:"detail-icon"}),e.jsx("span",{children:D.scheduledTime.toLocaleString()})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx(Ve,{className:"detail-icon"}),e.jsx("span",{children:D.topic})]})]}),e.jsxs("div",{className:"consultation-actions",children:[D.status==="scheduled"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"btn-primary",onClick:()=>kt(D.id),children:[e.jsx(le,{className:"btn-icon"}),"Join Call"]}),e.jsx("button",{className:"btn-secondary",children:"Reschedule"})]}),D.status==="completed"&&e.jsxs("div",{className:"rating-section",children:[e.jsx("div",{className:"rating",children:[...Array(5)].map((ue,Tt)=>e.jsx(Ie,{className:`star ${Tt<D.rating?"filled":""}`},Tt))}),e.jsx("p",{className:"feedback",children:D.feedback})]})]})]},D.id))})]})]}),Gt=()=>e.jsxs("div",{className:"experts-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h1",{children:"Available Experts"}),e.jsx("button",{className:"btn-secondary",onClick:()=>s("dashboard"),children:"Back to Dashboard"})]}),e.jsx("div",{className:"experts-grid",children:a.map(D=>e.jsxs("div",{className:"expert-card",children:[e.jsxs("div",{className:"expert-header",children:[e.jsx("img",{src:D.avatar,alt:D.name,className:"expert-avatar"}),e.jsxs("div",{className:"expert-basic-info",children:[e.jsx("h3",{children:D.name}),e.jsx("p",{className:"specialty",children:D.specialty}),e.jsxs("div",{className:"rating-info",children:[e.jsx(Ie,{className:"star filled"}),e.jsxs("span",{children:[D.rating," (",D.reviews," reviews)"]})]})]}),e.jsx("div",{className:"availability-badge",children:D.availability})]}),e.jsxs("div",{className:"expert-details",children:[e.jsxs("div",{className:"detail-row",children:[e.jsx(mc,{className:"detail-icon"}),e.jsxs("span",{children:[D.experience," years experience"]})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx(Je,{className:"detail-icon"}),e.jsx("span",{children:D.location})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx(zu,{className:"detail-icon"}),e.jsx("span",{children:D.languages.join(", ")})]})]}),e.jsx("div",{className:"specializations",children:D.specializations.map((ue,Tt)=>e.jsx("span",{className:"specialization-tag",children:ue},Tt))}),e.jsxs("div",{className:"expert-footer",children:[e.jsxs("div",{className:"price",children:["₹",D.price,"/session"]}),e.jsx("button",{className:"btn-primary",onClick:()=>{c(D),s("booking")},children:"Book Session"})]})]},D.id))})]}),Jt=()=>e.jsxs("div",{className:"video-consultation-room",children:[e.jsxs("div",{className:"video-container",children:[e.jsxs("div",{className:"main-video",children:[e.jsx("video",{ref:E,autoPlay:!0,playsInline:!0,className:"remote-video"}),!V&&e.jsxs("div",{className:"no-video-placeholder",children:[e.jsx("div",{className:"placeholder-avatar",children:e.jsx(User,{size:64})}),e.jsx("p",{children:"Waiting for expert to join..."})]})]}),e.jsxs("div",{className:"local-video-container",children:[e.jsx("video",{ref:z,autoPlay:!0,playsInline:!0,muted:!0,className:"local-video"}),!u&&e.jsx("div",{className:"video-off-overlay",children:e.jsx(mn,{size:24})})]})]}),e.jsxs("div",{className:"consultation-controls",children:[e.jsxs("div",{className:"control-group",children:[e.jsx("button",{className:`control-btn ${m?"":"disabled"}`,onClick:Xe,children:m?e.jsx(ra,{}):e.jsx(na,{})}),e.jsx("button",{className:`control-btn ${u?"":"disabled"}`,onClick:Ye,children:u?e.jsx(le,{}):e.jsx(mn,{})}),e.jsx("button",{className:"control-btn",onClick:()=>P(!w),children:e.jsx(Ve,{})}),e.jsx("button",{className:"control-btn",onClick:R,children:b?e.jsx(si,{}):e.jsx(Vu,{})})]}),e.jsx("div",{className:"control-group",children:e.jsxs("div",{className:"connection-status",children:[e.jsx("div",{className:`status-indicator ${T}`}),e.jsx("span",{children:T})]})}),e.jsx("div",{className:"control-group",children:e.jsx("button",{className:"control-btn end-call",onClick:Dr,children:e.jsx(Bu,{})})})]}),w&&e.jsxs("div",{className:"consultation-chat",children:[e.jsxs("div",{className:"chat-header",children:[e.jsx("h3",{children:"Chat"}),e.jsx("button",{onClick:()=>P(!1),children:e.jsx(si,{size:16})})]}),e.jsx("div",{className:"chat-messages",children:N.map(D=>e.jsxs("div",{className:"chat-message",children:[e.jsx("div",{className:"message-sender",children:D.sender}),e.jsx("div",{className:"message-text",children:D.message}),e.jsx("div",{className:"message-time",children:D.timestamp.toLocaleTimeString()})]},D.id))}),e.jsxs("div",{className:"chat-input",children:[e.jsx("input",{type:"text",value:v,onChange:D=>p(D.target.value),placeholder:"Type a message...",onKeyPress:D=>D.key==="Enter"&&Rs()}),e.jsx("button",{onClick:Rs,children:e.jsx(Send,{size:16})})]})]})]});return e.jsx("div",{className:"video-consultation",children:e.jsxs(ps,{mode:"wait",children:[t==="dashboard"&&e.jsx(L.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},children:re()},"dashboard"),t==="experts"&&e.jsx(L.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},children:Gt()},"experts"),t==="consultation"&&e.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:Jt()},"consultation")]})})},fy=()=>{};var zo={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd=function(t){const s=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?s[r++]=a:a<2048?(s[r++]=a>>6|192,s[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),s[r++]=a>>18|240,s[r++]=a>>12&63|128,s[r++]=a>>6&63|128,s[r++]=a&63|128):(s[r++]=a>>12|224,s[r++]=a>>6&63|128,s[r++]=a&63|128)}return s},xy=function(t){const s=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)s[n++]=String.fromCharCode(a);else if(a>191&&a<224){const i=t[r++];s[n++]=String.fromCharCode((a&31)<<6|i&63)}else if(a>239&&a<365){const i=t[r++],o=t[r++],c=t[r++],d=((a&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;s[n++]=String.fromCharCode(55296+(d>>10)),s[n++]=String.fromCharCode(56320+(d&1023))}else{const i=t[r++],o=t[r++];s[n++]=String.fromCharCode((a&15)<<12|(i&63)<<6|o&63)}}return s.join("")},kd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,s){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=s?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const i=t[a],o=a+1<t.length,c=o?t[a+1]:0,d=a+2<t.length,l=d?t[a+2]:0,u=i>>2,h=(i&3)<<4|c>>4;let m=(c&15)<<2|l>>6,g=l&63;d||(g=64,o||(m=64)),n.push(r[u],r[h],r[m],r[g])}return n.join("")},encodeString(t,s){return this.HAS_NATIVE_SUPPORT&&!s?btoa(t):this.encodeByteArray(Cd(t),s)},decodeString(t,s){return this.HAS_NATIVE_SUPPORT&&!s?atob(t):xy(this.decodeStringToByteArray(t,s))},decodeStringToByteArray(t,s){this.init_();const r=s?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const i=r[t.charAt(a++)],c=a<t.length?r[t.charAt(a)]:0;++a;const l=a<t.length?r[t.charAt(a)]:64;++a;const h=a<t.length?r[t.charAt(a)]:64;if(++a,i==null||c==null||l==null||h==null)throw new gy;const m=i<<2|c>>4;if(n.push(m),l!==64){const g=c<<4&240|l>>2;if(n.push(g),h!==64){const f=l<<6&192|h;n.push(f)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class gy extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yy=function(t){const s=Cd(t);return kd.encodeByteArray(s,!0)},Td=function(t){return yy(t).replace(/\./g,"")},by=function(t){try{return kd.decodeString(t,!0)}catch(s){console.error("base64Decode failed: ",s)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jy(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy=()=>jy().__FIREBASE_DEFAULTS__,Ny=()=>{if(typeof process>"u"||typeof zo>"u")return;const t=zo.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},wy=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const s=t&&by(t[1]);return s&&JSON.parse(s)},Sy=()=>{try{return fy()||vy()||Ny()||wy()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ad=()=>Sy()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((s,r)=>{this.resolve=s,this.reject=r})}wrapCallback(s){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof s=="function"&&(this.promise.catch(()=>{}),s.length===1?s(r):s(r,n))}}}function Ed(){try{return typeof indexedDB=="object"}catch{return!1}}function Dd(){return new Promise((t,s)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{s(a.error?.message||"")}}catch(r){s(r)}})}function ky(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty="FirebaseError";class Kt extends Error{constructor(s,r,n){super(r),this.code=s,this.customData=n,this.name=Ty,Object.setPrototypeOf(this,Kt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cr.prototype.create)}}class Cr{constructor(s,r,n){this.service=s,this.serviceName=r,this.errors=n}create(s,...r){const n=r[0]||{},a=`${this.service}/${s}`,i=this.errors[s],o=i?Ay(i,n):"Error",c=`${this.serviceName}: ${o} (${a}).`;return new Kt(a,c,n)}}function Ay(t,s){return t.replace(Ey,(r,n)=>{const a=s[n];return a!=null?String(a):`<${n}?>`})}const Ey=/\{\$([^}]+)}/g;function Hn(t,s){if(t===s)return!0;const r=Object.keys(t),n=Object.keys(s);for(const a of r){if(!n.includes(a))return!1;const i=t[a],o=s[a];if(Vo(i)&&Vo(o)){if(!Hn(i,o))return!1}else if(i!==o)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function Vo(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(t){return t&&t._delegate?t._delegate:t}class nt{constructor(s,r,n){this.name=s,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(s){return this.instantiationMode=s,this}setMultipleInstances(s){return this.multipleInstances=s,this}setServiceProps(s){return this.serviceProps=s,this}setInstanceCreatedCallback(s){return this.onInstanceCreated=s,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lt="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(s,r){this.name=s,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(s){const r=this.normalizeInstanceIdentifier(s);if(!this.instancesDeferred.has(r)){const n=new Cy;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(s){const r=this.normalizeInstanceIdentifier(s?.identifier),n=s?.optional??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(s){if(s.name!==this.name)throw Error(`Mismatching Component ${s.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=s,!!this.shouldAutoInitialize()){if(Iy(s))try{this.getOrInitializeService({instanceIdentifier:lt})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:a});n.resolve(i)}catch{}}}}clearInstance(s=lt){this.instancesDeferred.delete(s),this.instancesOptions.delete(s),this.instances.delete(s)}async delete(){const s=Array.from(this.instances.values());await Promise.all([...s.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...s.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(s=lt){return this.instances.has(s)}getOptions(s=lt){return this.instancesOptions.get(s)||{}}initialize(s={}){const{options:r={}}=s,n=this.normalizeInstanceIdentifier(s.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);n===c&&o.resolve(a)}return a}onInit(s,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(s),this.onInitCallbacks.set(n,a);const i=this.instances.get(n);return i&&s(i,n),()=>{a.delete(s)}}invokeOnInitCallbacks(s,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(s,r)}catch{}}getOrInitializeService({instanceIdentifier:s,options:r={}}){let n=this.instances.get(s);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Py(s),options:r}),this.instances.set(s,n),this.instancesOptions.set(s,r),this.invokeOnInitCallbacks(n,s),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,s,n)}catch{}return n||null}normalizeInstanceIdentifier(s=lt){return this.component?this.component.multipleInstances?s:lt:s}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Py(t){return t===lt?void 0:t}function Iy(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(s){this.name=s,this.providers=new Map}addComponent(s){const r=this.getProvider(s.name);if(r.isComponentSet())throw new Error(`Component ${s.name} has already been registered with ${this.name}`);r.setComponent(s)}addOrOverwriteComponent(s){this.getProvider(s.name).isComponentSet()&&this.providers.delete(s.name),this.addComponent(s)}getProvider(s){if(this.providers.has(s))return this.providers.get(s);const r=new Dy(s,this);return this.providers.set(s,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var K;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(K||(K={}));const My={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},Oy=K.INFO,Fy={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},Ly=(t,s,...r)=>{if(s<t.logLevel)return;const n=new Date().toISOString(),a=Fy[s];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${s})`)};class _y{constructor(s){this.name=s,this._logLevel=Oy,this._logHandler=Ly,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(s){if(!(s in K))throw new TypeError(`Invalid value "${s}" assigned to \`logLevel\``);this._logLevel=s}setLogLevel(s){this._logLevel=typeof s=="string"?My[s]:s}get logHandler(){return this._logHandler}set logHandler(s){if(typeof s!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=s}get userLogHandler(){return this._userLogHandler}set userLogHandler(s){this._userLogHandler=s}debug(...s){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...s),this._logHandler(this,K.DEBUG,...s)}log(...s){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...s),this._logHandler(this,K.VERBOSE,...s)}info(...s){this._userLogHandler&&this._userLogHandler(this,K.INFO,...s),this._logHandler(this,K.INFO,...s)}warn(...s){this._userLogHandler&&this._userLogHandler(this,K.WARN,...s),this._logHandler(this,K.WARN,...s)}error(...s){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...s),this._logHandler(this,K.ERROR,...s)}}const zy=(t,s)=>s.some(r=>t instanceof r);let Bo,$o;function Vy(){return Bo||(Bo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function By(){return $o||($o=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Pd=new WeakMap,qn=new WeakMap,Id=new WeakMap,Yr=new WeakMap,Ua=new WeakMap;function $y(t){const s=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{r(Be(t.result)),a()},o=()=>{n(t.error),a()};t.addEventListener("success",i),t.addEventListener("error",o)});return s.then(r=>{r instanceof IDBCursor&&Pd.set(r,t)}).catch(()=>{}),Ua.set(s,t),s}function Uy(t){if(qn.has(t))return;const s=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{r(),a()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});qn.set(t,s)}let Kn={get(t,s,r){if(t instanceof IDBTransaction){if(s==="done")return qn.get(t);if(s==="objectStoreNames")return t.objectStoreNames||Id.get(t);if(s==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Be(t[s])},set(t,s,r){return t[s]=r,!0},has(t,s){return t instanceof IDBTransaction&&(s==="done"||s==="store")?!0:s in t}};function Wy(t){Kn=t(Kn)}function Hy(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(s,...r){const n=t.call(Xr(this),s,...r);return Id.set(n,s.sort?s.sort():[s]),Be(n)}:By().includes(t)?function(...s){return t.apply(Xr(this),s),Be(Pd.get(this))}:function(...s){return Be(t.apply(Xr(this),s))}}function qy(t){return typeof t=="function"?Hy(t):(t instanceof IDBTransaction&&Uy(t),zy(t,Vy())?new Proxy(t,Kn):t)}function Be(t){if(t instanceof IDBRequest)return $y(t);if(Yr.has(t))return Yr.get(t);const s=qy(t);return s!==t&&(Yr.set(t,s),Ua.set(s,t)),s}const Xr=t=>Ua.get(t);function Tr(t,s,{blocked:r,upgrade:n,blocking:a,terminated:i}={}){const o=indexedDB.open(t,s),c=Be(o);return n&&o.addEventListener("upgradeneeded",d=>{n(Be(o.result),d.oldVersion,d.newVersion,Be(o.transaction),d)}),r&&o.addEventListener("blocked",d=>r(d.oldVersion,d.newVersion,d)),c.then(d=>{i&&d.addEventListener("close",()=>i()),a&&d.addEventListener("versionchange",l=>a(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}function Zr(t,{blocked:s}={}){const r=indexedDB.deleteDatabase(t);return s&&r.addEventListener("blocked",n=>s(n.oldVersion,n)),Be(r).then(()=>{})}const Ky=["get","getKey","getAll","getAllKeys","count"],Gy=["put","add","delete","clear"],Qr=new Map;function Uo(t,s){if(!(t instanceof IDBDatabase&&!(s in t)&&typeof s=="string"))return;if(Qr.get(s))return Qr.get(s);const r=s.replace(/FromIndex$/,""),n=s!==r,a=Gy.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||Ky.includes(r)))return;const i=async function(o,...c){const d=this.transaction(o,a?"readwrite":"readonly");let l=d.store;return n&&(l=l.index(c.shift())),(await Promise.all([l[r](...c),a&&d.done]))[0]};return Qr.set(s,i),i}Wy(t=>({...t,get:(s,r,n)=>Uo(s,r)||t.get(s,r,n),has:(s,r)=>!!Uo(s,r)||t.has(s,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(s){this.container=s}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(Yy(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function Yy(t){return t.getComponent()?.type==="VERSION"}const Gn="@firebase/app",Wo="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ge=new _y("@firebase/app"),Xy="@firebase/app-compat",Zy="@firebase/analytics-compat",Qy="@firebase/analytics",eb="@firebase/app-check-compat",tb="@firebase/app-check",sb="@firebase/auth",rb="@firebase/auth-compat",nb="@firebase/database",ab="@firebase/data-connect",ib="@firebase/database-compat",ob="@firebase/functions",cb="@firebase/functions-compat",lb="@firebase/installations",db="@firebase/installations-compat",ub="@firebase/messaging",hb="@firebase/messaging-compat",mb="@firebase/performance",pb="@firebase/performance-compat",fb="@firebase/remote-config",xb="@firebase/remote-config-compat",gb="@firebase/storage",yb="@firebase/storage-compat",bb="@firebase/firestore",jb="@firebase/ai",vb="@firebase/firestore-compat",Nb="firebase";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jn="[DEFAULT]",wb={[Gn]:"fire-core",[Xy]:"fire-core-compat",[Qy]:"fire-analytics",[Zy]:"fire-analytics-compat",[tb]:"fire-app-check",[eb]:"fire-app-check-compat",[sb]:"fire-auth",[rb]:"fire-auth-compat",[nb]:"fire-rtdb",[ab]:"fire-data-connect",[ib]:"fire-rtdb-compat",[ob]:"fire-fn",[cb]:"fire-fn-compat",[lb]:"fire-iid",[db]:"fire-iid-compat",[ub]:"fire-fcm",[hb]:"fire-fcm-compat",[mb]:"fire-perf",[pb]:"fire-perf-compat",[fb]:"fire-rc",[xb]:"fire-rc-compat",[gb]:"fire-gcs",[yb]:"fire-gcs-compat",[bb]:"fire-fst",[vb]:"fire-fst-compat",[jb]:"fire-vertex","fire-js":"fire-js",[Nb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir=new Map,Sb=new Map,Yn=new Map;function Ho(t,s){try{t.container.addComponent(s)}catch(r){Ge.debug(`Component ${s.name} failed to register with FirebaseApp ${t.name}`,r)}}function vt(t){const s=t.name;if(Yn.has(s))return Ge.debug(`There were multiple attempts to register component ${s}.`),!1;Yn.set(s,t);for(const r of ir.values())Ho(r,t);for(const r of Sb.values())Ho(r,t);return!0}function Wa(t,s){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},et=new Cr("app","Firebase",Cb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(s,r,n){this._isDeleted=!1,this._options={...s},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new nt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(s){this.checkDestroyed(),this._automaticDataCollectionEnabled=s}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(s){this._isDeleted=s}checkDestroyed(){if(this.isDeleted)throw et.create("app-deleted",{appName:this._name})}}function Rd(t,s={}){let r=t;typeof s!="object"&&(s={name:s});const n={name:Jn,automaticDataCollectionEnabled:!0,...s},a=n.name;if(typeof a!="string"||!a)throw et.create("bad-app-name",{appName:String(a)});if(r||(r=Ad()),!r)throw et.create("no-options");const i=ir.get(a);if(i){if(Hn(r,i.options)&&Hn(n,i.config))return i;throw et.create("duplicate-app",{appName:a})}const o=new Ry(a);for(const d of Yn.values())o.addComponent(d);const c=new kb(r,n,o);return ir.set(a,c),c}function Tb(t=Jn){const s=ir.get(t);if(!s&&t===Jn&&Ad())return Rd();if(!s)throw et.create("no-app",{appName:t});return s}function tt(t,s,r){let n=wb[t]??t;r&&(n+=`-${r}`);const a=n.match(/\s|\//),i=s.match(/\s|\//);if(a||i){const o=[`Unable to register library "${n}" with version "${s}":`];a&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&i&&o.push("and"),i&&o.push(`version name "${s}" contains illegal characters (whitespace or "/")`),Ge.warn(o.join(" "));return}vt(new nt(`${n}-version`,()=>({library:n,version:s}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab="firebase-heartbeat-database",Eb=1,ys="firebase-heartbeat-store";let en=null;function Md(){return en||(en=Tr(Ab,Eb,{upgrade:(t,s)=>{switch(s){case 0:try{t.createObjectStore(ys)}catch(r){console.warn(r)}}}}).catch(t=>{throw et.create("idb-open",{originalErrorMessage:t.message})})),en}async function Db(t){try{const r=(await Md()).transaction(ys),n=await r.objectStore(ys).get(Od(t));return await r.done,n}catch(s){if(s instanceof Kt)Ge.warn(s.message);else{const r=et.create("idb-get",{originalErrorMessage:s?.message});Ge.warn(r.message)}}}async function qo(t,s){try{const n=(await Md()).transaction(ys,"readwrite");await n.objectStore(ys).put(s,Od(t)),await n.done}catch(r){if(r instanceof Kt)Ge.warn(r.message);else{const n=et.create("idb-set",{originalErrorMessage:r?.message});Ge.warn(n.message)}}}function Od(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb=1024,Ib=30;class Rb{constructor(s){this.container=s,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Ob(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=Ko();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(a=>a.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats.length>Ib){const a=Fb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Ge.warn(s)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=Ko(),{heartbeatsToSend:r,unsentEntries:n}=Mb(this._heartbeatsCache.heartbeats),a=Td(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=s,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(s){return Ge.warn(s),""}}}function Ko(){return new Date().toISOString().substring(0,10)}function Mb(t,s=Pb){const r=[];let n=t.slice();for(const a of t){const i=r.find(o=>o.agent===a.agent);if(i){if(i.dates.push(a.date),Go(r)>s){i.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),Go(r)>s){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Ob{constructor(s){this.app=s,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ed()?Dd().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Db(this.app);return r?.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(s){if(await this._canUseIndexedDBPromise){const n=await this.read();return qo(this.app,{lastSentHeartbeatDate:s.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:s.heartbeats})}else return}async add(s){if(await this._canUseIndexedDBPromise){const n=await this.read();return qo(this.app,{lastSentHeartbeatDate:s.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...s.heartbeats]})}else return}}function Go(t){return Td(JSON.stringify({version:2,heartbeats:t})).length}function Fb(t){if(t.length===0)return-1;let s=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,s=n);return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(t){vt(new nt("platform-logger",s=>new Jy(s),"PRIVATE")),vt(new nt("heartbeat",s=>new Rb(s),"PRIVATE")),tt(Gn,Wo,t),tt(Gn,Wo,"esm2020"),tt("fire-js","")}Lb("");var _b="firebase",zb="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tt(_b,zb,"app");const Fd="@firebase/installations",Ha="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld=1e4,_d=`w:${Ha}`,zd="FIS_v2",Vb="https://firebaseinstallations.googleapis.com/v1",Bb=3600*1e3,$b="installations",Ub="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Nt=new Cr($b,Ub,Wb);function Vd(t){return t instanceof Kt&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bd({projectId:t}){return`${Vb}/projects/${t}/installations`}function $d(t){return{token:t.token,requestStatus:2,expiresIn:qb(t.expiresIn),creationTime:Date.now()}}async function Ud(t,s){const n=(await s.json()).error;return Nt.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Wd({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Hb(t,{refreshToken:s}){const r=Wd(t);return r.append("Authorization",Kb(s)),r}async function Hd(t){const s=await t();return s.status>=500&&s.status<600?t():s}function qb(t){return Number(t.replace("s","000"))}function Kb(t){return`${zd} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gb({appConfig:t,heartbeatServiceProvider:s},{fid:r}){const n=Bd(t),a=Wd(t),i=s.getImmediate({optional:!0});if(i){const l=await i.getHeartbeatsHeader();l&&a.append("x-firebase-client",l)}const o={fid:r,authVersion:zd,appId:t.appId,sdkVersion:_d},c={method:"POST",headers:a,body:JSON.stringify(o)},d=await Hd(()=>fetch(n,c));if(d.ok){const l=await d.json();return{fid:l.fid||r,registrationStatus:2,refreshToken:l.refreshToken,authToken:$d(l.authToken)}}else throw await Ud("Create Installation",d)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(t){return new Promise(s=>{setTimeout(s,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb=/^[cdef][\w-]{21}$/,Xn="";function Xb(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const r=Zb(t);return Yb.test(r)?r:Xn}catch{return Xn}}function Zb(t){return Jb(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd=new Map;function Gd(t,s){const r=Ar(t);Jd(r,s),Qb(r,s)}function Jd(t,s){const r=Kd.get(t);if(r)for(const n of r)n(s)}function Qb(t,s){const r=ej();r&&r.postMessage({key:t,fid:s}),tj()}let mt=null;function ej(){return!mt&&"BroadcastChannel"in self&&(mt=new BroadcastChannel("[Firebase] FID Change"),mt.onmessage=t=>{Jd(t.data.key,t.data.fid)}),mt}function tj(){Kd.size===0&&mt&&(mt.close(),mt=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj="firebase-installations-database",rj=1,wt="firebase-installations-store";let tn=null;function qa(){return tn||(tn=Tr(sj,rj,{upgrade:(t,s)=>{switch(s){case 0:t.createObjectStore(wt)}}})),tn}async function or(t,s){const r=Ar(t),a=(await qa()).transaction(wt,"readwrite"),i=a.objectStore(wt),o=await i.get(r);return await i.put(s,r),await a.done,(!o||o.fid!==s.fid)&&Gd(t,s.fid),s}async function Yd(t){const s=Ar(t),n=(await qa()).transaction(wt,"readwrite");await n.objectStore(wt).delete(s),await n.done}async function Er(t,s){const r=Ar(t),a=(await qa()).transaction(wt,"readwrite"),i=a.objectStore(wt),o=await i.get(r),c=s(o);return c===void 0?await i.delete(r):await i.put(c,r),await a.done,c&&(!o||o.fid!==c.fid)&&Gd(t,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ka(t){let s;const r=await Er(t.appConfig,n=>{const a=nj(n),i=aj(t,a);return s=i.registrationPromise,i.installationEntry});return r.fid===Xn?{installationEntry:await s}:{installationEntry:r,registrationPromise:s}}function nj(t){const s=t||{fid:Xb(),registrationStatus:0};return Xd(s)}function aj(t,s){if(s.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(Nt.create("app-offline"));return{installationEntry:s,registrationPromise:a}}const r={fid:s.fid,registrationStatus:1,registrationTime:Date.now()},n=ij(t,r);return{installationEntry:r,registrationPromise:n}}else return s.registrationStatus===1?{installationEntry:s,registrationPromise:oj(t)}:{installationEntry:s}}async function ij(t,s){try{const r=await Gb(t,s);return or(t.appConfig,r)}catch(r){throw Vd(r)&&r.customData.serverCode===409?await Yd(t.appConfig):await or(t.appConfig,{fid:s.fid,registrationStatus:0}),r}}async function oj(t){let s=await Jo(t.appConfig);for(;s.registrationStatus===1;)await qd(100),s=await Jo(t.appConfig);if(s.registrationStatus===0){const{installationEntry:r,registrationPromise:n}=await Ka(t);return n||r}return s}function Jo(t){return Er(t,s=>{if(!s)throw Nt.create("installation-not-found");return Xd(s)})}function Xd(t){return cj(t)?{fid:t.fid,registrationStatus:0}:t}function cj(t){return t.registrationStatus===1&&t.registrationTime+Ld<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lj({appConfig:t,heartbeatServiceProvider:s},r){const n=dj(t,r),a=Hb(t,r),i=s.getImmediate({optional:!0});if(i){const l=await i.getHeartbeatsHeader();l&&a.append("x-firebase-client",l)}const o={installation:{sdkVersion:_d,appId:t.appId}},c={method:"POST",headers:a,body:JSON.stringify(o)},d=await Hd(()=>fetch(n,c));if(d.ok){const l=await d.json();return $d(l)}else throw await Ud("Generate Auth Token",d)}function dj(t,{fid:s}){return`${Bd(t)}/${s}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(t,s=!1){let r;const n=await Er(t.appConfig,i=>{if(!Zd(i))throw Nt.create("not-registered");const o=i.authToken;if(!s&&mj(o))return i;if(o.requestStatus===1)return r=uj(t,s),i;{if(!navigator.onLine)throw Nt.create("app-offline");const c=fj(i);return r=hj(t,c),c}});return r?await r:n.authToken}async function uj(t,s){let r=await Yo(t.appConfig);for(;r.authToken.requestStatus===1;)await qd(100),r=await Yo(t.appConfig);const n=r.authToken;return n.requestStatus===0?Ga(t,s):n}function Yo(t){return Er(t,s=>{if(!Zd(s))throw Nt.create("not-registered");const r=s.authToken;return xj(r)?{...s,authToken:{requestStatus:0}}:s})}async function hj(t,s){try{const r=await lj(t,s),n={...s,authToken:r};return await or(t.appConfig,n),r}catch(r){if(Vd(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await Yd(t.appConfig);else{const n={...s,authToken:{requestStatus:0}};await or(t.appConfig,n)}throw r}}function Zd(t){return t!==void 0&&t.registrationStatus===2}function mj(t){return t.requestStatus===2&&!pj(t)}function pj(t){const s=Date.now();return s<t.creationTime||t.creationTime+t.expiresIn<s+Bb}function fj(t){const s={requestStatus:1,requestTime:Date.now()};return{...t,authToken:s}}function xj(t){return t.requestStatus===1&&t.requestTime+Ld<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gj(t){const s=t,{installationEntry:r,registrationPromise:n}=await Ka(s);return n?n.catch(console.error):Ga(s).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yj(t,s=!1){const r=t;return await bj(r),(await Ga(r,s)).token}async function bj(t){const{registrationPromise:s}=await Ka(t);s&&await s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jj(t){if(!t||!t.options)throw sn("App Configuration");if(!t.name)throw sn("App Name");const s=["projectId","apiKey","appId"];for(const r of s)if(!t.options[r])throw sn(r);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function sn(t){return Nt.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd="installations",vj="installations-internal",Nj=t=>{const s=t.getProvider("app").getImmediate(),r=jj(s),n=Wa(s,"heartbeat");return{app:s,appConfig:r,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},wj=t=>{const s=t.getProvider("app").getImmediate(),r=Wa(s,Qd).getImmediate();return{getId:()=>gj(r),getToken:a=>yj(r,a)}};function Sj(){vt(new nt(Qd,Nj,"PUBLIC")),vt(new nt(vj,wj,"PRIVATE"))}Sj();tt(Fd,Ha);tt(Fd,Ha,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj="/firebase-messaging-sw.js",kj="/firebase-cloud-messaging-push-scope",eu="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Tj="https://fcmregistrations.googleapis.com/v1",tu="google.c.a.c_id",Aj="google.c.a.c_l",Ej="google.c.a.ts",Dj="google.c.a.e",Xo=1e4;var Zo;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Zo||(Zo={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var bs;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(bs||(bs={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(t){const s=new Uint8Array(t);return btoa(String.fromCharCode(...s)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Pj(t){const s="=".repeat((4-t.length%4)%4),r=(t+s).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(r),a=new Uint8Array(n.length);for(let i=0;i<n.length;++i)a[i]=n.charCodeAt(i);return a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="fcm_token_details_db",Ij=5,Qo="fcm_token_object_Store";async function Rj(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(i=>i.name).includes(rn))return null;let s=null;return(await Tr(rn,Ij,{upgrade:async(n,a,i,o)=>{if(a<2||!n.objectStoreNames.contains(Qo))return;const c=o.objectStore(Qo),d=await c.index("fcmSenderId").get(t);if(await c.clear(),!!d){if(a===2){const l=d;if(!l.auth||!l.p256dh||!l.endpoint)return;s={token:l.fcmToken,createTime:l.createTime??Date.now(),subscriptionOptions:{auth:l.auth,p256dh:l.p256dh,endpoint:l.endpoint,swScope:l.swScope,vapidKey:typeof l.vapidKey=="string"?l.vapidKey:ze(l.vapidKey)}}}else if(a===3){const l=d;s={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:ze(l.auth),p256dh:ze(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:ze(l.vapidKey)}}}else if(a===4){const l=d;s={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:ze(l.auth),p256dh:ze(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:ze(l.vapidKey)}}}}}})).close(),await Zr(rn),await Zr("fcm_vapid_details_db"),await Zr("undefined"),Mj(s)?s:null}function Mj(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:s}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof s.auth=="string"&&s.auth.length>0&&typeof s.p256dh=="string"&&s.p256dh.length>0&&typeof s.endpoint=="string"&&s.endpoint.length>0&&typeof s.swScope=="string"&&s.swScope.length>0&&typeof s.vapidKey=="string"&&s.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oj="firebase-messaging-database",Fj=1,St="firebase-messaging-store";let nn=null;function Ja(){return nn||(nn=Tr(Oj,Fj,{upgrade:(t,s)=>{switch(s){case 0:t.createObjectStore(St)}}})),nn}async function su(t){const s=Xa(t),n=await(await Ja()).transaction(St).objectStore(St).get(s);if(n)return n;{const a=await Rj(t.appConfig.senderId);if(a)return await Ya(t,a),a}}async function Ya(t,s){const r=Xa(t),a=(await Ja()).transaction(St,"readwrite");return await a.objectStore(St).put(s,r),await a.done,s}async function Lj(t){const s=Xa(t),n=(await Ja()).transaction(St,"readwrite");await n.objectStore(St).delete(s),await n.done}function Xa({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},de=new Cr("messaging","Messaging",_j);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zj(t,s){const r=await Qa(t),n=nu(s),a={method:"POST",headers:r,body:JSON.stringify(n)};let i;try{i=await(await fetch(Za(t.appConfig),a)).json()}catch(o){throw de.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(i.error){const o=i.error.message;throw de.create("token-subscribe-failed",{errorInfo:o})}if(!i.token)throw de.create("token-subscribe-no-token");return i.token}async function Vj(t,s){const r=await Qa(t),n=nu(s.subscriptionOptions),a={method:"PATCH",headers:r,body:JSON.stringify(n)};let i;try{i=await(await fetch(`${Za(t.appConfig)}/${s.token}`,a)).json()}catch(o){throw de.create("token-update-failed",{errorInfo:o?.toString()})}if(i.error){const o=i.error.message;throw de.create("token-update-failed",{errorInfo:o})}if(!i.token)throw de.create("token-update-no-token");return i.token}async function ru(t,s){const n={method:"DELETE",headers:await Qa(t)};try{const i=await(await fetch(`${Za(t.appConfig)}/${s}`,n)).json();if(i.error){const o=i.error.message;throw de.create("token-unsubscribe-failed",{errorInfo:o})}}catch(a){throw de.create("token-unsubscribe-failed",{errorInfo:a?.toString()})}}function Za({projectId:t}){return`${Tj}/projects/${t}/registrations`}async function Qa({appConfig:t,installations:s}){const r=await s.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})}function nu({p256dh:t,auth:s,endpoint:r,vapidKey:n}){const a={web:{endpoint:r,auth:s,p256dh:t}};return n!==eu&&(a.web.applicationPubKey=n),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bj=10080*60*1e3;async function $j(t){const s=await Hj(t.swRegistration,t.vapidKey),r={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:s.endpoint,auth:ze(s.getKey("auth")),p256dh:ze(s.getKey("p256dh"))},n=await su(t.firebaseDependencies);if(n){if(qj(n.subscriptionOptions,r))return Date.now()>=n.createTime+Bj?Wj(t,{token:n.token,createTime:Date.now(),subscriptionOptions:r}):n.token;try{await ru(t.firebaseDependencies,n.token)}catch(a){console.warn(a)}return ec(t.firebaseDependencies,r)}else return ec(t.firebaseDependencies,r)}async function Uj(t){const s=await su(t.firebaseDependencies);s&&(await ru(t.firebaseDependencies,s.token),await Lj(t.firebaseDependencies));const r=await t.swRegistration.pushManager.getSubscription();return r?r.unsubscribe():!0}async function Wj(t,s){try{const r=await Vj(t.firebaseDependencies,s),n={...s,token:r,createTime:Date.now()};return await Ya(t.firebaseDependencies,n),r}catch(r){throw r}}async function ec(t,s){const n={token:await zj(t,s),createTime:Date.now(),subscriptionOptions:s};return await Ya(t,n),n.token}async function Hj(t,s){const r=await t.pushManager.getSubscription();return r||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Pj(s)})}function qj(t,s){const r=s.vapidKey===t.vapidKey,n=s.endpoint===t.endpoint,a=s.auth===t.auth,i=s.p256dh===t.p256dh;return r&&n&&a&&i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(t){const s={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return Kj(s,t),Gj(s,t),Jj(s,t),s}function Kj(t,s){if(!s.notification)return;t.notification={};const r=s.notification.title;r&&(t.notification.title=r);const n=s.notification.body;n&&(t.notification.body=n);const a=s.notification.image;a&&(t.notification.image=a);const i=s.notification.icon;i&&(t.notification.icon=i)}function Gj(t,s){s.data&&(t.data=s.data)}function Jj(t,s){if(!s.fcmOptions&&!s.notification?.click_action)return;t.fcmOptions={};const r=s.fcmOptions?.link??s.notification?.click_action;r&&(t.fcmOptions.link=r);const n=s.fcmOptions?.analytics_label;n&&(t.fcmOptions.analyticsLabel=n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yj(t){return typeof t=="object"&&!!t&&tu in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xj(t){if(!t||!t.options)throw an("App Configuration Object");if(!t.name)throw an("App Name");const s=["projectId","apiKey","appId","messagingSenderId"],{options:r}=t;for(const n of s)if(!r[n])throw an(n);return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}function an(t){return de.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(s,r,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const a=Xj(s);this.firebaseDependencies={app:s,appConfig:a,installations:r,analyticsProvider:n}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function au(t){try{t.swRegistration=await navigator.serviceWorker.register(Cj,{scope:kj}),t.swRegistration.update().catch(()=>{}),await Qj(t.swRegistration)}catch(s){throw de.create("failed-service-worker-registration",{browserErrorMessage:s?.message})}}async function Qj(t){return new Promise((s,r)=>{const n=setTimeout(()=>r(new Error(`Service worker not registered after ${Xo} ms`)),Xo),a=t.installing||t.waiting;t.active?(clearTimeout(n),s()):a?a.onstatechange=i=>{i.target?.state==="activated"&&(a.onstatechange=null,clearTimeout(n),s())}:(clearTimeout(n),r(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ev(t,s){if(!s&&!t.swRegistration&&await au(t),!(!s&&t.swRegistration)){if(!(s instanceof ServiceWorkerRegistration))throw de.create("invalid-sw-registration");t.swRegistration=s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tv(t,s){s?t.vapidKey=s:t.vapidKey||(t.vapidKey=eu)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iu(t,s){if(!navigator)throw de.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw de.create("permission-blocked");return await tv(t,s?.vapidKey),await ev(t,s?.serviceWorkerRegistration),$j(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sv(t,s,r){const n=rv(s);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(n,{message_id:r[tu],message_name:r[Aj],message_time:r[Ej],message_device_time:Math.floor(Date.now()/1e3)})}function rv(t){switch(t){case bs.NOTIFICATION_CLICKED:return"notification_open";case bs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nv(t,s){const r=s.data;if(!r.isFirebaseMessaging)return;t.onMessageHandler&&r.messageType===bs.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(tc(r)):t.onMessageHandler.next(tc(r)));const n=r.data;Yj(n)&&n[Dj]==="1"&&await sv(t,r.messageType,n)}const sc="@firebase/messaging",rc="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av=t=>{const s=new Zj(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",r=>nv(s,r)),s},iv=t=>{const s=t.getProvider("messaging").getImmediate();return{getToken:n=>iu(s,n)}};function ov(){vt(new nt("messaging",av,"PUBLIC")),vt(new nt("messaging-internal",iv,"PRIVATE")),tt(sc,rc),tt(sc,rc,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cv(){try{await Dd()}catch{return!1}return typeof window<"u"&&Ed()&&ky()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lv(t){if(!navigator)throw de.create("only-available-in-window");return t.swRegistration||await au(t),Uj(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(t,s){if(!navigator)throw de.create("only-available-in-window");return t.onMessageHandler=s,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(t=Tb()){return cv().then(s=>{if(!s)throw de.create("unsupported-browser")},s=>{throw de.create("indexed-db-unsupported")}),Wa(kr(t),"messaging").getImmediate()}async function hv(t,s){return t=kr(t),iu(t,s)}function mv(t){return t=kr(t),lv(t)}function pv(t,s){return t=kr(t),dv(t,s)}ov();const on={apiKey:"your_firebase_api_key_here",authDomain:"your_project_id.firebaseapp.com",projectId:"your_firebase_project_id",storageBucket:"your_project_id.appspot.com",messagingSenderId:"your_messaging_sender_id",appId:"your_firebase_app_id",measurementId:"your_measurement_id"};class fv{constructor(){this.app=null,this.messaging=null,this.currentToken=null,this.isSupported=!1,this.isInitialized=!1,this.notificationListeners=new Set,this.permissionStatus="default",this.initialize()}async initialize(){try{if(console.log("Firebase notification service initializing..."),!on.apiKey||on.apiKey.startsWith("your_")){console.warn("Firebase configuration missing or using placeholder values. Push notifications will be disabled."),this.isSupported=!1;return}if(!("serviceWorker"in navigator)||!("PushManager"in window)){console.warn("Push messaging is not supported in this browser"),this.isSupported=!1;return}this.app=Rd(on),this.messaging=uv(this.app),this.isSupported=!0,this.setupMessageListener(),this.permissionStatus=await this.getPermissionStatus(),this.isInitialized=!0,console.log("Firebase notification service initialized successfully")}catch(s){console.error("Error initializing Firebase notification service:",s),this.isSupported=!1}}async getPermissionStatus(){return typeof Notification<"u"?Notification.permission:"default"}async requestPermission(){if(!this.isSupported)throw new Error("Push notifications are not supported");try{console.log("Requesting notification permission...");const s=await Notification.requestPermission();if(this.permissionStatus=s,s!=="granted")throw new Error("Notification permission denied");const n=await hv(this.messaging,{vapidKey:"your_vapid_key_for_push_notifications"});if(n){this.currentToken=n;const a=localStorage.getItem("user"),i=a?JSON.parse(a):null;return i&&i.id&&await this.registerTokenWithServer(i.id,n),console.log("FCM token generated and registered:",n),n}else throw new Error("No registration token available")}catch(s){throw console.error("Error requesting notification permission:",s),s}}async registerTokenWithServer(s,r){try{const n={platform:"web",userAgent:navigator.userAgent,timestamp:new Date().toISOString()};await $.registerFCMToken(s,r,n),console.log("FCM token registered with server")}catch(n){throw console.error("Error registering token with server:",n),n}}async unregisterToken(){if(!(!this.currentToken||!this.isSupported))try{console.log("Unregistering FCM token..."),await mv(this.messaging);const s=localStorage.getItem("user"),r=s?JSON.parse(s):null;r&&r.id&&await $.unregisterFCMToken(r.id,this.currentToken),this.currentToken=null,console.log("FCM token unregistered successfully")}catch(s){throw console.error("Error unregistering FCM token:",s),s}}setupMessageListener(){this.messaging&&(console.log("Setting up Firebase message listener..."),pv(this.messaging,s=>{console.log("Message received in foreground:",s),this.handleForegroundMessage(s),this.notifyListeners("message",s)}))}handleForegroundMessage(s){const{notification:r,data:n}=s;r&&this.showBrowserNotification(r.title,{body:r.body,icon:r.icon||"/icons/notification-icon.png",badge:r.badge||"/icons/badge-icon.png",image:r.image,data:n,tag:n?.notificationId||"default",requireInteraction:n?.priority==="high"})}showBrowserNotification(s,r={}){if(this.permissionStatus==="granted")try{const n=new Notification(s,{...r,onclick:a=>{a.preventDefault(),this.handleNotificationClick(a.target.data),a.target.close()}});return r.requireInteraction||setTimeout(()=>{n.close()},5e3),n}catch(n){console.error("Error showing browser notification:",n)}}handleNotificationClick(s){try{window.focus(),s?.url?window.location.href=s.url:s?.action&&this.handleNotificationAction(s.action,s),s?.notificationId&&this.markNotificationAsRead(s.notificationId),this.notifyListeners("click",s)}catch(r){console.error("Error handling notification click:",r)}}handleNotificationAction(s,r){switch(s){case"view_weather":window.location.href="/weather";break;case"view_advisory":window.location.href="/advisory";break;case"view_market":window.location.href="/market";break;case"view_pest":window.location.href="/pest-detection";break;case"view_irrigation":window.location.href="/irrigation";break;default:window.location.href="/dashboard"}}async markNotificationAsRead(s){try{await $.markNotificationRead(s)}catch(r){console.error("Error marking notification as read:",r)}}async getPermissionStatus(){return"Notification"in window?Notification.permission:"unsupported"}isNotificationEnabled(){return this.permissionStatus==="granted"&&this.currentToken!==null}getCurrentToken(){return this.currentToken}async sendTestNotification(){try{const s=authService.getUser();if(!s)throw new Error("User not authenticated");return await $.sendTestNotification(s.id,"push"),!0}catch(s){throw console.error("Error sending test notification:",s),s}}subscribe(s){return this.notificationListeners.add(s),()=>{this.notificationListeners.delete(s)}}notifyListeners(s,r){this.notificationListeners.forEach(n=>{try{n(s,r)}catch(a){console.error("Notification listener error:",a)}})}storeNotificationLocally(s){try{const r=JSON.parse(localStorage.getItem("localNotifications")||"[]");r.unshift({...s,id:s.id||Date.now().toString(),timestamp:new Date().toISOString(),read:!1});const n=r.slice(0,50);return localStorage.setItem("localNotifications",JSON.stringify(n)),n[0]}catch(r){return console.error("Error storing notification locally:",r),null}}getLocalNotifications(){try{return JSON.parse(localStorage.getItem("localNotifications")||"[]")}catch(s){return console.error("Error getting local notifications:",s),[]}}markLocalNotificationRead(s){try{const n=this.getLocalNotifications().map(a=>a.id===s?{...a,read:!0}:a);return localStorage.setItem("localNotifications",JSON.stringify(n)),n}catch(r){return console.error("Error marking local notification as read:",r),this.getLocalNotifications()}}clearLocalNotifications(){localStorage.removeItem("localNotifications")}getUnreadCount(){return this.getLocalNotifications().filter(r=>!r.read).length}async getPreferences(){try{const s=authService.getUser();if(!s)throw new Error("User not authenticated");return(await $.getNotificationPreferences(s.id)).preferences}catch(s){return console.error("Error getting notification preferences:",s),{email:!0,sms:!1,push:!0,categories:{weather:!0,advisory:!0,market:!0,pest:!0,irrigation:!0}}}}async updatePreferences(s){try{const r=authService.getUser();if(!r)throw new Error("User not authenticated");return(await $.updateNotificationPreferences(r.id,s)).preferences}catch(r){throw console.error("Error updating notification preferences:",r),r}}async isServiceWorkerRegistered(){if(!("serviceWorker"in navigator))return!1;try{return!!await navigator.serviceWorker.getRegistration()}catch(s){return console.error("Error checking service worker:",s),!1}}async registerServiceWorker(){if(!("serviceWorker"in navigator))throw new Error("Service workers not supported");try{const s=await navigator.serviceWorker.register("/firebase-messaging-sw.js");return console.log("Service worker registered:",s),s}catch(s){throw console.error("Service worker registration failed:",s),s}}getServiceInfo(){return{isSupported:this.isSupported,isInitialized:this.isInitialized,permissionStatus:this.permissionStatus,hasToken:!!this.currentToken,tokenInfo:this.currentToken?{length:this.currentToken.length,prefix:this.currentToken.substring(0,10)+"..."}:null}}}const nc=new fv,xv=()=>{const[t,s]=x.useState({weather:null,crops:[],marketPrices:[],notifications:[],irrigation:null,consultations:[],pestAlerts:[],aiInsights:null}),[r,n]=x.useState(!0),[a,i]=x.useState(null),[o,c]=x.useState(null),[d,l]=x.useState("today"),[u,h]=x.useState(["weather","crops","market","notifications","irrigation","ai-insights"]),[m,g]=x.useState(!1),f=js(),{user:y}=Ct(),b=x.useRef(null);x.useEffect(()=>(C(),S(),()=>{b.current&&clearInterval(b.current)}),[y]);const C=async()=>{n(!0);try{await T(),c(new Date),i(null)}catch(O){i("Failed to load dashboard data"),console.error("Dashboard initialization error:",O)}finally{n(!1)}},T=async()=>{const O=y?.location||{latitude:20.2961,longitude:85.8245};try{const[z,E,F,H,Q,Y]=await Promise.allSettled([$.getCurrentWeather(O.latitude,O.longitude),$.getPersonalizedAdvisory({cropType:y?.currentCrop||"wheat",location:O}),$.getCurrentMarketPrices({location:O.state}),nc.getLocalNotifications(),$.getUserConsultations(y?.id),$.getSmartRecommendations(y?.id)]);s({weather:z.status==="fulfilled"?z.value.data:v(),crops:p(),marketPrices:F.status==="fulfilled"?F.value.data:w(),notifications:H.status==="fulfilled"?H.value.slice(0,5):[],irrigation:P(),consultations:Q.status==="fulfilled"?Q.value:[],pestAlerts:A(),aiInsights:Y.status==="fulfilled"?Y.value.data:M()})}catch(z){console.error("Error loading dashboard data:",z),s({weather:v(),crops:p(),marketPrices:w(),notifications:[],irrigation:P(),consultations:[],pestAlerts:A(),aiInsights:M()})}},S=()=>{b.current=setInterval(()=>{T(),c(new Date)},300*1e3);const O=nc.subscribe((z,E)=>{z==="message"&&T()});return()=>{O()}},N=async()=>{g(!0),await T(),c(new Date),g(!1)},j=O=>{f(O)},v=()=>({temperature:28,humidity:78,windSpeed:12,pressure:1013,weather:"Partly Cloudy",feelsLike:32,uvIndex:6}),p=()=>[{id:1,name:"Wheat",stage:"Flowering",health:85,area:2.5,expectedYield:"2.8 tons/ha",daysToHarvest:45,status:"healthy"},{id:2,name:"Rice",stage:"Vegetative",health:92,area:1.8,expectedYield:"3.2 tons/ha",daysToHarvest:78,status:"excellent"}],w=()=>[{crop:"Wheat",price:2100,change:5.2,trend:"up"},{crop:"Rice",price:1850,change:-2.1,trend:"down"},{crop:"Cotton",price:5200,change:8.7,trend:"up"}],P=()=>({status:"optimal",soilMoisture:68,nextScheduled:new Date(Date.now()+360*60*1e3),waterUsage:12.5,efficiency:94}),A=()=>[{id:1,type:"Aphids",severity:"medium",crop:"Wheat",detected:new Date(Date.now()-7200*1e3),action:"Apply neem oil spray"}],M=()=>({recommendations:["Consider early irrigation for wheat crop","Market prices for rice are declining - consider storage","Weather conditions favor pest activity - monitor closely"],confidence:.89,priority:"high"}),V=O=>new Date(O).toLocaleString(),q=O=>O>=90?"text-green-500":O>=75?"text-yellow-500":"text-red-500",I=O=>O==="up"?ve:ds;return r?e.jsx("div",{className:"enhanced-dashboard loading",children:e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading your farm dashboard..."})]})}):e.jsxs("div",{className:"enhanced-dashboard",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-info",children:[e.jsxs("h1",{children:["Good ",new Date().getHours()<12?"Morning":new Date().getHours()<17?"Afternoon":"Evening",", ",y?.name||"Farmer","!"]}),e.jsx("p",{className:"subtitle",children:"Here's what's happening on your farm today"}),o&&e.jsxs("p",{className:"last-updated",children:["Last updated: ",V(o)]})]}),e.jsx("div",{className:"header-actions",children:e.jsxs("button",{className:`refresh-btn ${m?"refreshing":""}`,onClick:N,children:[e.jsx(ft,{className:"refresh-icon"}),"Refresh"]})})]}),e.jsxs("div",{className:"quick-stats",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon weather",children:e.jsx(ls,{})}),e.jsxs("div",{className:"stat-info",children:[e.jsxs("span",{className:"stat-value",children:[t.weather?.temperature,"°C"]}),e.jsx("span",{className:"stat-label",children:"Temperature"})]}),e.jsx("button",{className:"stat-action",onClick:()=>j("/weather"),children:e.jsx(Ms,{size:16})})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon crop",children:e.jsx(Zs,{})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("span",{className:"stat-value",children:t.crops.length}),e.jsx("span",{className:"stat-label",children:"Active Crops"})]}),e.jsx("button",{className:"stat-action",onClick:()=>j("/advisory"),children:e.jsx(Ms,{size:16})})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon irrigation",children:e.jsx(te,{})}),e.jsxs("div",{className:"stat-info",children:[e.jsxs("span",{className:"stat-value",children:[t.irrigation?.soilMoisture,"%"]}),e.jsx("span",{className:"stat-label",children:"Soil Moisture"})]}),e.jsx("button",{className:"stat-action",onClick:()=>j("/irrigation"),children:e.jsx(Ms,{size:16})})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon market",children:e.jsx(ve,{})}),e.jsxs("div",{className:"stat-info",children:[e.jsxs("span",{className:"stat-value",children:["₹",t.marketPrices[0]?.price]}),e.jsx("span",{className:"stat-label",children:"Wheat Price"})]}),e.jsx("button",{className:"stat-action",onClick:()=>j("/market"),children:e.jsx(Ms,{size:16})})]})]}),e.jsxs("div",{className:"dashboard-grid",children:[e.jsxs(L.div,{className:"dashboard-widget weather-widget",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[e.jsxs("div",{className:"widget-header",children:[e.jsxs("div",{className:"widget-title",children:[e.jsx(Ce,{className:"widget-icon"}),e.jsx("h3",{children:"Weather Overview"})]}),e.jsx("button",{className:"widget-action",onClick:()=>j("/weather"),children:"View Details"})]}),e.jsxs("div",{className:"weather-content",children:[e.jsxs("div",{className:"weather-main",children:[e.jsxs("div",{className:"temperature",children:[t.weather?.temperature,"°C"]}),e.jsxs("div",{className:"weather-info",children:[e.jsx("p",{children:t.weather?.weather}),e.jsxs("p",{children:["Feels like ",t.weather?.feelsLike,"°C"]})]})]}),e.jsxs("div",{className:"weather-metrics",children:[e.jsxs("div",{className:"metric",children:[e.jsx(te,{size:16}),e.jsxs("span",{children:[t.weather?.humidity,"%"]})]}),e.jsxs("div",{className:"metric",children:[e.jsx(Ft,{size:16}),e.jsxs("span",{children:[t.weather?.windSpeed," km/h"]})]})]})]})]}),e.jsxs(L.div,{className:"dashboard-widget crop-widget",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[e.jsxs("div",{className:"widget-header",children:[e.jsxs("div",{className:"widget-title",children:[e.jsx(Zs,{className:"widget-icon"}),e.jsx("h3",{children:"Crop Status"})]}),e.jsx("button",{className:"widget-action",onClick:()=>j("/advisory"),children:"Manage Crops"})]}),e.jsx("div",{className:"crop-content",children:t.crops.map((O,z)=>e.jsxs("div",{className:"crop-item",children:[e.jsxs("div",{className:"crop-info",children:[e.jsx("h4",{children:O.name}),e.jsx("p",{className:"crop-stage",children:O.stage}),e.jsxs("div",{className:"crop-metrics",children:[e.jsxs("span",{className:`health ${q(O.health)}`,children:[O.health,"% Health"]}),e.jsxs("span",{className:"area",children:[O.area," ha"]})]})]}),e.jsxs("div",{className:"crop-status",children:[e.jsx("div",{className:`status-indicator ${O.status}`}),e.jsxs("span",{className:"harvest-days",children:[O.daysToHarvest," days"]})]})]},O.id))})]}),e.jsxs(L.div,{className:"dashboard-widget market-widget",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[e.jsxs("div",{className:"widget-header",children:[e.jsxs("div",{className:"widget-title",children:[e.jsx(Ns,{className:"widget-icon"}),e.jsx("h3",{children:"Market Prices"})]}),e.jsx("button",{className:"widget-action",onClick:()=>j("/market"),children:"View Market"})]}),e.jsx("div",{className:"market-content",children:t.marketPrices.map((O,z)=>{const E=I(O.trend);return e.jsxs("div",{className:"market-item",children:[e.jsxs("div",{className:"market-info",children:[e.jsx("h4",{children:O.crop}),e.jsxs("p",{className:"price",children:["₹",O.price,"/quintal"]})]}),e.jsxs("div",{className:`trend ${O.trend}`,children:[e.jsx(E,{size:16}),e.jsxs("span",{children:[Math.abs(O.change),"%"]})]})]},z)})})]}),e.jsxs(L.div,{className:"dashboard-widget irrigation-widget",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[e.jsxs("div",{className:"widget-header",children:[e.jsxs("div",{className:"widget-title",children:[e.jsx(te,{className:"widget-icon"}),e.jsx("h3",{children:"Irrigation Status"})]}),e.jsx("button",{className:"widget-action",onClick:()=>j("/irrigation"),children:"Manage"})]}),e.jsxs("div",{className:"irrigation-content",children:[e.jsxs("div",{className:"irrigation-status",children:[e.jsx("div",{className:`status-indicator ${t.irrigation?.status}`}),e.jsx("span",{className:"status-text",children:t.irrigation?.status})]}),e.jsxs("div",{className:"irrigation-metrics",children:[e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"label",children:"Soil Moisture"}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${t.irrigation?.soilMoisture}%`}})}),e.jsxs("span",{className:"value",children:[t.irrigation?.soilMoisture,"%"]})]}),e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"label",children:"Next Irrigation"}),e.jsx("span",{className:"value",children:V(t.irrigation?.nextScheduled)})]})]})]})]}),e.jsxs(L.div,{className:"dashboard-widget ai-widget",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[e.jsxs("div",{className:"widget-header",children:[e.jsxs("div",{className:"widget-title",children:[e.jsx(Zn,{className:"widget-icon"}),e.jsx("h3",{children:"AI Insights"})]}),e.jsx("button",{className:"widget-action",onClick:()=>j("/chat"),children:"Ask AI"})]}),e.jsxs("div",{className:"ai-content",children:[t.aiInsights?.recommendations.map((O,z)=>e.jsxs("div",{className:"insight-item",children:[e.jsx("div",{className:"insight-icon",children:e.jsx(vs,{size:16})}),e.jsx("p",{children:O})]},z)),e.jsx("div",{className:"confidence-indicator",children:e.jsxs("span",{children:["AI Confidence: ",Math.round(t.aiInsights?.confidence*100),"%"]})})]})]}),e.jsxs(L.div,{className:"dashboard-widget actions-widget",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:[e.jsx("div",{className:"widget-header",children:e.jsxs("div",{className:"widget-title",children:[e.jsx(ws,{className:"widget-icon"}),e.jsx("h3",{children:"Quick Actions"})]})}),e.jsxs("div",{className:"actions-content",children:[e.jsxs("button",{className:"action-btn",onClick:()=>j("/chat"),children:[e.jsx(Ve,{size:20}),e.jsx("span",{children:"Ask AI Assistant"})]}),e.jsxs("button",{className:"action-btn",onClick:()=>j("/consultation"),children:[e.jsx(le,{size:20}),e.jsx("span",{children:"Book Expert Call"})]}),e.jsxs("button",{className:"action-btn",onClick:()=>j("/pest-detection"),children:[e.jsx(Ue,{size:20}),e.jsx("span",{children:"Detect Pest"})]}),e.jsxs("button",{className:"action-btn",onClick:()=>j("/weather"),children:[e.jsx(Lt,{size:20}),e.jsx("span",{children:"Weather Forecast"})]})]})]})]})]})};class gv{constructor(){this.TOKEN_KEY="farmora_token",this.USER_KEY="farmora_user",this.REFRESH_TOKEN_KEY="farmora_refresh_token",this.isInitialized=!1,this.authListeners=new Set,this.API_BASE_URL="http://localhost:5000/api"}initialize(){this.isInitialized||(this.checkAuthState(),this.setupTokenRefresh(),this.isInitialized=!0)}async login(s){try{const r=await fetch("http://localhost:5000/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),n=await r.json();if(!r.ok)throw new Error(n.message||"Login failed");return this.setAuthData(n.token,n.refreshToken,n.user),this.notifyAuthListeners("login",n.user),{success:!0,user:n.user,message:"Login successful"}}catch(r){return console.error("Login error:",r),{success:!1,message:r.message||"Login failed. Please try again."}}}async register(s){try{const r=await fetch("http://localhost:5000/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),n=await r.json();if(!r.ok)throw new Error(n.message||"Registration failed");return n.token&&(this.setAuthData(n.token,n.refreshToken,n.user),this.notifyAuthListeners("register",n.user)),{success:!0,user:n.user,message:n.message||"Registration successful"}}catch(r){return console.error("Registration error:",r),{success:!1,message:r.message||"Registration failed. Please try again."}}}async logout(){try{const s=this.getToken();s&&await fetch("http://localhost:5000/api/auth/logout",{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})}catch(s){console.warn("Logout server notification failed:",s)}finally{this.clearAuthData(),this.notifyAuthListeners("logout"),window.location.href="/login"}}async refreshToken(){try{const s=this.getRefreshToken();if(!s)throw new Error("No refresh token available");const r=await fetch("http://localhost:5000/api/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:s})}),n=await r.json();if(!r.ok)throw new Error(n.message||"Token refresh failed");return this.setToken(n.token),n.refreshToken&&this.setRefreshToken(n.refreshToken),n.token}catch(s){throw console.error("Token refresh error:",s),this.logout(),s}}async forgotPassword(s){try{const r=await fetch("http://localhost:5000/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s})}),n=await r.json();return{success:r.ok,message:n.message||(r.ok?"Password reset email sent":"Failed to send reset email")}}catch(r){return console.error("Forgot password error:",r),{success:!1,message:"Failed to send reset email. Please try again."}}}async resetPassword(s,r){try{const n=await fetch("http://localhost:5000/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:s,password:r})}),a=await n.json();return{success:n.ok,message:a.message||(n.ok?"Password reset successful":"Password reset failed")}}catch(n){return console.error("Reset password error:",n),{success:!1,message:"Password reset failed. Please try again."}}}async changePassword(s,r){try{const n=this.getToken();if(!n)throw new Error("Not authenticated");const a=await fetch("http://localhost:5000/api/auth/change-password",{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({currentPassword:s,newPassword:r})}),i=await a.json();return{success:a.ok,message:i.message||(a.ok?"Password changed successfully":"Password change failed")}}catch(n){return console.error("Change password error:",n),{success:!1,message:"Password change failed. Please try again."}}}async updateProfile(s){try{const r=this.getToken();if(!r)throw new Error("Not authenticated");const n=await fetch("http://localhost:5000/api/auth/profile",{method:"PUT",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify(s)}),a=await n.json();if(!n.ok)throw new Error(a.message||"Profile update failed");return this.setUser(a.user),this.notifyAuthListeners("profileUpdate",a.user),{success:!0,user:a.user,message:"Profile updated successfully"}}catch(r){return console.error("Profile update error:",r),{success:!1,message:r.message||"Profile update failed"}}}async uploadAvatar(s){try{const r=this.getToken();if(!r)throw new Error("Not authenticated");const n=new FormData;n.append("avatar",s);const a=await fetch("http://localhost:5000/api/auth/avatar",{method:"POST",headers:{Authorization:`Bearer ${r}`},body:n}),i=await a.json();if(!a.ok)throw new Error(i.message||"Avatar upload failed");const c={...this.getUser(),avatar:i.avatarUrl};return this.setUser(c),this.notifyAuthListeners("profileUpdate",c),{success:!0,avatarUrl:i.avatarUrl,message:"Avatar uploaded successfully"}}catch(r){return console.error("Avatar upload error:",r),{success:!1,message:r.message||"Avatar upload failed"}}}getToken(){return localStorage.getItem(this.TOKEN_KEY)}setToken(s){s?localStorage.setItem(this.TOKEN_KEY,s):localStorage.removeItem(this.TOKEN_KEY)}getRefreshToken(){return localStorage.getItem(this.REFRESH_TOKEN_KEY)}setRefreshToken(s){s?localStorage.setItem(this.REFRESH_TOKEN_KEY,s):localStorage.removeItem(this.REFRESH_TOKEN_KEY)}getUser(){const s=localStorage.getItem(this.USER_KEY);return s?JSON.parse(s):null}setUser(s){s?localStorage.setItem(this.USER_KEY,JSON.stringify(s)):localStorage.removeItem(this.USER_KEY)}isAuthenticated(){const s=this.getToken(),r=this.getUser();if(!s||!r)return!1;try{const n=JSON.parse(atob(s.split(".")[1])),a=Date.now()/1e3;return!(n.exp&&n.exp<a)}catch{return!1}}hasRole(s){const r=this.getUser();return r&&r.role===s}hasAnyRole(s){const r=this.getUser();return r&&s.includes(r.role)}hasPermission(s){const r=this.getUser();return r&&r.permissions&&r.permissions.includes(s)}setAuthData(s,r,n){this.setToken(s),r&&this.setRefreshToken(r),this.setUser(n)}clearAuthData(){this.setToken(null),this.setRefreshToken(null),this.setUser(null)}checkAuthState(){const s=this.getToken(),r=this.getUser();s&&r&&!this.isTokenExpired(s)?this.notifyAuthListeners("init",r):s&&this.isTokenExpired(s)&&this.refreshToken().catch(()=>{this.logout()})}isTokenExpired(s){try{const r=JSON.parse(atob(s.split(".")[1])),n=Date.now()/1e3;return r.exp&&r.exp<n}catch{return!0}}setupTokenRefresh(){const s=this.getToken();if(s&&!this.isTokenExpired(s)){const n=JSON.parse(atob(s.split(".")[1])).exp*1e3,a=Date.now(),i=n-300*1e3;i>a&&setTimeout(()=>{this.refreshToken().catch(console.error)},i-a)}}addAuthListener(s){return this.authListeners.add(s),()=>{this.authListeners.delete(s)}}notifyAuthListeners(s,r){this.authListeners.forEach(n=>{try{n(s,r)}catch(a){console.error("Auth listener error:",a)}})}getAuthHeader(){const s=this.getToken();return s?`Bearer ${s}`:null}async validateSession(){try{const s=this.getToken();return s?(await fetch("http://localhost:5000/api/auth/validate",{method:"GET",headers:{Authorization:`Bearer ${s}`}})).ok:!1}catch(s){return console.error("Session validation error:",s),!1}}async loginWithGoogle(){throw new Error("Google login not implemented yet")}async loginWithFacebook(){throw new Error("Facebook login not implemented yet")}async enableTwoFactor(){throw new Error("Two-factor authentication not implemented yet")}async verifyTwoFactor(s){throw new Error("Two-factor authentication not implemented yet")}}const cr=new gv;cr.initialize();const yv=()=>{const[t,s]=x.useState({email:"",password:""}),[r,n]=x.useState(!1),[a,i]=x.useState(!1),[o,c]=x.useState(""),[d,l]=x.useState(""),[u,h]=x.useState(!1),m=js(),g=ac(),{login:f,isAuthenticated:y}=Ct();x.useEffect(()=>{if(y){const N=g.state?.from?.pathname||"/dashboard";m(N,{replace:!0})}},[y,m,g]);const b=N=>{const{name:j,value:v}=N.target;s(p=>({...p,[j]:v})),o&&c("")},C=()=>t.email?/\S+@\S+\.\S+/.test(t.email)?t.password?t.password.length<6?(c("Password must be at least 6 characters long"),!1):!0:(c("Password is required"),!1):(c("Please enter a valid email address"),!1):(c("Email is required"),!1),T=async N=>{if(N.preventDefault(),c(""),l(""),!!C()){i(!0);try{const j=await cr.login({email:t.email,password:t.password,rememberMe:u});if(j.success){l(j.message||"Login successful!"),f&&await f(j.user,j.token);const v=g.state?.from?.pathname||"/dashboard";setTimeout(()=>{m(v,{replace:!0})},1e3)}else c(j.message||"Login failed. Please try again.")}catch(j){console.error("Login error:",j),c("An unexpected error occurred. Please try again.")}finally{i(!1)}}},S=async()=>{if(!t.email){c("Please enter your email address first");return}i(!0);try{const N=await cr.forgotPassword(t.email);N.success?(l("Password reset email sent! Please check your inbox."),c("")):c(N.message||"Failed to send password reset email")}catch{c("Failed to send password reset email. Please try again.")}finally{i(!1)}};return e.jsxs("div",{className:"auth-container",children:[e.jsxs("div",{className:"auth-background",children:[e.jsx("div",{className:"auth-background-image"}),e.jsx("div",{className:"auth-background-overlay"})]}),e.jsxs("div",{className:"auth-content",children:[e.jsxs(L.div,{className:"auth-branding",initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.6},children:[e.jsxs("div",{className:"brand-logo",children:[e.jsx(Me,{className:"brand-icon"}),e.jsx(dr,{className:"brand-sparkle"})]}),e.jsx("h1",{className:"brand-title",children:"Welcome to Farmora"}),e.jsx("p",{className:"brand-subtitle",children:"Your AI-powered farming companion for smarter agriculture"}),e.jsxs("div",{className:"brand-features",children:[e.jsxs("div",{className:"feature-item",children:[e.jsx(G,{className:"feature-icon"}),e.jsx("span",{children:"Real-time Weather Insights"})]}),e.jsxs("div",{className:"feature-item",children:[e.jsx(G,{className:"feature-icon"}),e.jsx("span",{children:"AI-Powered Crop Advisory"})]}),e.jsxs("div",{className:"feature-item",children:[e.jsx(G,{className:"feature-icon"}),e.jsx("span",{children:"Expert Video Consultations"})]}),e.jsxs("div",{className:"feature-item",children:[e.jsx(G,{className:"feature-icon"}),e.jsx("span",{children:"Live Market Data"})]})]})]}),e.jsx(L.div,{className:"auth-form-container",initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},children:e.jsxs("div",{className:"auth-form-wrapper",children:[e.jsxs("div",{className:"auth-form-header",children:[e.jsx("h2",{children:"Sign In to Farmora"}),e.jsx("p",{children:"Continue your farming journey with us"})]}),d&&e.jsxs(L.div,{className:"alert alert-success",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[e.jsx(G,{className:"alert-icon"}),d]}),o&&e.jsxs(L.div,{className:"alert alert-error",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[e.jsx($e,{className:"alert-icon"}),o]}),e.jsxs("form",{onSubmit:T,className:"auth-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),e.jsxs("div",{className:"form-input-wrapper",children:[e.jsx(ea,{className:"form-input-icon"}),e.jsx("input",{type:"email",id:"email",name:"email",className:"form-input",placeholder:"Enter your email",value:t.email,onChange:b,required:!0,autoComplete:"email"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),e.jsxs("div",{className:"form-input-wrapper",children:[e.jsx(pn,{className:"form-input-icon"}),e.jsx("input",{type:r?"text":"password",id:"password",name:"password",className:"form-input",placeholder:"Enter your password",value:t.password,onChange:b,required:!0,autoComplete:"current-password"}),e.jsx("button",{type:"button",className:"form-input-toggle",onClick:()=>n(!r),children:r?e.jsx(fn,{}):e.jsx(We,{})})]})]}),e.jsxs("div",{className:"form-options",children:[e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:u,onChange:N=>h(N.target.checked)}),e.jsx("span",{className:"checkmark"}),"Remember me"]}),e.jsx("button",{type:"button",className:"forgot-password-btn",onClick:S,disabled:a,children:"Forgot Password?"})]}),e.jsx("button",{type:"submit",className:"auth-submit-btn",disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx(mr,{className:"btn-icon spinning"}),"Signing In..."]}):e.jsxs(e.Fragment,{children:[e.jsx(un,{className:"btn-icon"}),"Sign In"]})})]}),e.jsx("div",{className:"auth-footer",children:e.jsxs("p",{children:["Don't have an account?"," ",e.jsx(U,{to:"/register",className:"auth-link",children:"Sign up for free"})]})}),e.jsx("div",{className:"auth-back",children:e.jsxs(U,{to:"/",className:"back-btn",children:[e.jsx(Us,{className:"back-icon"}),"Back to Home"]})})]})})]})]})},bv=()=>{const[t,s]=x.useState(1),[r,n]=x.useState({name:"",email:"",password:"",confirmPassword:"",phone:"",location:"",farmSize:"",farmSizeUnit:"acres",farmType:"",experience:"",crops:[],irrigationType:"",challenges:[]}),[a,i]=x.useState(!1),[o,c]=x.useState(!1),[d,l]=x.useState(!1),[u,h]=x.useState(""),[m,g]=x.useState(""),f=js(),{login:y,isAuthenticated:b}=Ct();x.useEffect(()=>{b&&f("/dashboard",{replace:!0})},[b,f]);const C=["Crop Farming","Livestock Farming","Mixed Farming","Organic Farming","Hydroponic Farming","Greenhouse Farming"],T=["Beginner (0-2 years)","Intermediate (3-5 years)","Experienced (6-10 years)","Expert (10+ years)"],S=["Rice","Wheat","Corn","Barley","Oats","Tomatoes","Potatoes","Onions","Carrots","Beans","Cotton","Sugarcane","Soybeans","Sunflower","Fruits","Vegetables","Herbs","Others"],N=["Drip Irrigation","Sprinkler Irrigation","Flood Irrigation","Manual Watering","Rainwater Dependent","Mixed Methods"],j=["Weather Uncertainty","Pest Management","Soil Health","Water Scarcity","Market Access","Labor Shortage","Equipment Maintenance","Crop Disease"],v=I=>{const{name:O,value:z,type:E,checked:F}=I.target;E==="checkbox"?O==="crops"?n(H=>({...H,crops:F?[...H.crops,z]:H.crops.filter(Q=>Q!==z)})):O==="challenges"&&n(H=>({...H,challenges:F?[...H.challenges,z]:H.challenges.filter(Q=>Q!==z)})):n(H=>({...H,[O]:z})),u&&h("")},p=I=>{switch(I){case 1:return r.name.trim()?r.email?/\S+@\S+\.\S+/.test(r.email)?r.password?r.password.length<8?(h("Password must be at least 8 characters long"),!1):r.password!==r.confirmPassword?(h("Passwords do not match"),!1):r.phone?!0:(h("Phone number is required"),!1):(h("Password is required"),!1):(h("Please enter a valid email address"),!1):(h("Email is required"),!1):(h("Full name is required"),!1);case 2:return r.location.trim()?r.farmSize?r.farmType?!0:(h("Please select your farm type"),!1):(h("Farm size is required"),!1):(h("Location is required"),!1);case 3:return r.experience?r.crops.length===0?(h("Please select at least one crop type"),!1):r.irrigationType?!0:(h("Please select your irrigation method"),!1):(h("Please select your farming experience level"),!1);default:return!0}},w=()=>{p(t)&&(s(I=>I+1),h(""))},P=()=>{s(I=>I-1),h("")},A=async I=>{if(I.preventDefault(),h(""),g(""),!!p(3)){l(!0);try{const O={name:r.name,email:r.email,password:r.password,phone:r.phone,location:r.location,farmSize:`${r.farmSize} ${r.farmSizeUnit}`,farmType:r.farmType,experience:r.experience,crops:r.crops,irrigationType:r.irrigationType,challenges:r.challenges},z=await cr.register(O);z.success?(g(z.message||"Registration successful!"),z.user&&y&&await y(z.user,z.token),setTimeout(()=>{f("/dashboard",{replace:!0})},2e3)):h(z.message||"Registration failed. Please try again.")}catch(O){console.error("Registration error:",O),h("An unexpected error occurred. Please try again.")}finally{l(!1)}}},M=()=>e.jsxs(L.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsxs("div",{className:"form-step-header",children:[e.jsx("h3",{children:"Personal Information"}),e.jsx("p",{children:"Let's start with your basic details"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name",className:"form-label",children:"Full Name"}),e.jsxs("div",{className:"form-input-wrapper",children:[e.jsx(Te,{className:"form-input-icon"}),e.jsx("input",{type:"text",id:"name",name:"name",className:"form-input",placeholder:"Enter your full name",value:r.name,onChange:v,required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),e.jsxs("div",{className:"form-input-wrapper",children:[e.jsx(ea,{className:"form-input-icon"}),e.jsx("input",{type:"email",id:"email",name:"email",className:"form-input",placeholder:"Enter your email",value:r.email,onChange:v,required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"phone",className:"form-label",children:"Phone Number"}),e.jsxs("div",{className:"form-input-wrapper",children:[e.jsx(oc,{className:"form-input-icon"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",className:"form-input",placeholder:"Enter your phone number",value:r.phone,onChange:v,required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),e.jsxs("div",{className:"form-input-wrapper",children:[e.jsx(pn,{className:"form-input-icon"}),e.jsx("input",{type:a?"text":"password",id:"password",name:"password",className:"form-input",placeholder:"Create a strong password",value:r.password,onChange:v,required:!0}),e.jsx("button",{type:"button",className:"form-input-toggle",onClick:()=>i(!a),children:a?e.jsx(fn,{}):e.jsx(We,{})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"confirmPassword",className:"form-label",children:"Confirm Password"}),e.jsxs("div",{className:"form-input-wrapper",children:[e.jsx(pn,{className:"form-input-icon"}),e.jsx("input",{type:o?"text":"password",id:"confirmPassword",name:"confirmPassword",className:"form-input",placeholder:"Confirm your password",value:r.confirmPassword,onChange:v,required:!0}),e.jsx("button",{type:"button",className:"form-input-toggle",onClick:()=>c(!o),children:o?e.jsx(fn,{}):e.jsx(We,{})})]})]})]},"step1"),V=()=>e.jsxs(L.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsxs("div",{className:"form-step-header",children:[e.jsx("h3",{children:"Farm Information"}),e.jsx("p",{children:"Tell us about your farming operation"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"location",className:"form-label",children:"Farm Location"}),e.jsxs("div",{className:"form-input-wrapper",children:[e.jsx(Je,{className:"form-input-icon"}),e.jsx("input",{type:"text",id:"location",name:"location",className:"form-input",placeholder:"City, State/Region, Country",value:r.location,onChange:v,required:!0})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"farmSize",className:"form-label",children:"Farm Size"}),e.jsxs("div",{className:"form-input-wrapper",children:[e.jsx(Me,{className:"form-input-icon"}),e.jsx("input",{type:"number",id:"farmSize",name:"farmSize",className:"form-input",placeholder:"Enter size",value:r.farmSize,onChange:v,required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"farmSizeUnit",className:"form-label",children:"Unit"}),e.jsxs("select",{id:"farmSizeUnit",name:"farmSizeUnit",className:"form-select",value:r.farmSizeUnit,onChange:v,children:[e.jsx("option",{value:"acres",children:"Acres"}),e.jsx("option",{value:"hectares",children:"Hectares"}),e.jsx("option",{value:"square_feet",children:"Square Feet"}),e.jsx("option",{value:"square_meters",children:"Square Meters"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"farmType",className:"form-label",children:"Farm Type"}),e.jsxs("select",{id:"farmType",name:"farmType",className:"form-select",value:r.farmType,onChange:v,required:!0,children:[e.jsx("option",{value:"",children:"Select farm type"}),C.map(I=>e.jsx("option",{value:I,children:I},I))]})]})]},"step2"),q=()=>e.jsxs(L.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsxs("div",{className:"form-step-header",children:[e.jsx("h3",{children:"Farming Experience"}),e.jsx("p",{children:"Help us personalize your Farmora experience"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"experience",className:"form-label",children:"Experience Level"}),e.jsxs("select",{id:"experience",name:"experience",className:"form-select",value:r.experience,onChange:v,required:!0,children:[e.jsx("option",{value:"",children:"Select experience level"}),T.map(I=>e.jsx("option",{value:I,children:I},I))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Crops You Grow (Select all that apply)"}),e.jsx("div",{className:"checkbox-grid",children:S.map(I=>e.jsxs("label",{className:"checkbox-label inline",children:[e.jsx("input",{type:"checkbox",name:"crops",value:I,checked:r.crops.includes(I),onChange:v}),e.jsx("span",{className:"checkmark"}),I]},I))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"irrigationType",className:"form-label",children:"Primary Irrigation Method"}),e.jsxs("select",{id:"irrigationType",name:"irrigationType",className:"form-select",value:r.irrigationType,onChange:v,required:!0,children:[e.jsx("option",{value:"",children:"Select irrigation type"}),N.map(I=>e.jsx("option",{value:I,children:I},I))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Main Farming Challenges (Optional)"}),e.jsx("div",{className:"checkbox-grid",children:j.map(I=>e.jsxs("label",{className:"checkbox-label inline",children:[e.jsx("input",{type:"checkbox",name:"challenges",value:I,checked:r.challenges.includes(I),onChange:v}),e.jsx("span",{className:"checkmark"}),I]},I))})]})]},"step3");return e.jsxs("div",{className:"auth-container",children:[e.jsxs("div",{className:"auth-background",children:[e.jsx("div",{className:"auth-background-image"}),e.jsx("div",{className:"auth-background-overlay"})]}),e.jsxs("div",{className:"auth-content",children:[e.jsxs(L.div,{className:"auth-branding",initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.6},children:[e.jsxs("div",{className:"brand-logo",children:[e.jsx(Me,{className:"brand-icon"}),e.jsx(dr,{className:"brand-sparkle"})]}),e.jsx("h1",{className:"brand-title",children:"Join Farmora"}),e.jsx("p",{className:"brand-subtitle",children:"Start your smart farming journey with AI-powered insights"}),e.jsx("div",{className:"registration-progress",children:e.jsx("div",{className:"progress-steps",children:[1,2,3].map(I=>e.jsxs("div",{className:`progress-step ${I<=t?"active":""} ${I<t?"completed":""}`,children:[e.jsx("div",{className:"step-number",children:I}),e.jsxs("div",{className:"step-label",children:[I===1&&"Personal",I===2&&"Farm Info",I===3&&"Experience"]})]},I))})})]}),e.jsx(L.div,{className:"auth-form-container",initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},children:e.jsxs("div",{className:"auth-form-wrapper",children:[e.jsxs("div",{className:"auth-form-header",children:[e.jsx("h2",{children:"Create Your Account"}),e.jsxs("p",{children:["Step ",t," of 3"]})]}),m&&e.jsxs(L.div,{className:"alert alert-success",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[e.jsx(G,{className:"alert-icon"}),m]}),u&&e.jsxs(L.div,{className:"alert alert-error",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[e.jsx($e,{className:"alert-icon"}),u]}),e.jsxs("form",{onSubmit:A,className:"auth-form",children:[t===1&&M(),t===2&&V(),t===3&&q(),e.jsxs("div",{className:"form-navigation",children:[t>1&&e.jsxs("button",{type:"button",className:"auth-back-btn",onClick:P,children:[e.jsx(Us,{className:"btn-icon"}),"Back"]}),t<3?e.jsxs("button",{type:"button",className:"auth-next-btn",onClick:w,children:["Next",e.jsx(Us,{className:"btn-icon next-icon"})]}):e.jsx("button",{type:"submit",className:"auth-submit-btn",disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx(mr,{className:"btn-icon spinning"}),"Creating Account..."]}):e.jsxs(e.Fragment,{children:[e.jsx(dn,{className:"btn-icon"}),"Create Account"]})})]})]}),e.jsx("div",{className:"auth-footer",children:e.jsxs("p",{children:["Already have an account?"," ",e.jsx(U,{to:"/login",className:"auth-link",children:"Sign in here"})]})}),e.jsx("div",{className:"auth-back",children:e.jsxs(U,{to:"/",className:"back-btn",children:[e.jsx(Us,{className:"back-icon"}),"Back to Home"]})})]})})]})]})},jv=()=>{x.useEffect(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then(s=>{console.log("SW registered: ",s)}).catch(s=>{console.log("SW registration failed: ",s)})},[]);const t=({children:s})=>s;return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(Lh,{}),e.jsx("main",{className:"min-h-screen",children:e.jsxs(uu,{children:[e.jsx(oe,{path:"/",element:e.jsx(vo,{})}),e.jsx(oe,{path:"/welcome",element:e.jsx(vo,{})}),e.jsx(oe,{path:"/login",element:e.jsx(yv,{})}),e.jsx(oe,{path:"/register",element:e.jsx(bv,{})}),e.jsx(oe,{path:"/dashboard",element:e.jsx(t,{children:e.jsx(xv,{})})}),e.jsx(oe,{path:"/dashboard-basic",element:e.jsx(t,{children:e.jsx(Z0,{})})}),e.jsx(oe,{path:"/weather",element:e.jsx(t,{children:e.jsx(dy,{})})}),e.jsx(oe,{path:"/weather-basic",element:e.jsx(t,{children:e.jsx(ey,{})})}),e.jsx(oe,{path:"/advisory",element:e.jsx(t,{children:e.jsx(ty,{})})}),e.jsx(oe,{path:"/market",element:e.jsx(t,{children:e.jsx(sy,{})})}),e.jsx(oe,{path:"/pest-detection",element:e.jsx(t,{children:e.jsx(ry,{})})}),e.jsx(oe,{path:"/irrigation",element:e.jsx(t,{children:e.jsx(ny,{})})}),e.jsx(oe,{path:"/consultation",element:e.jsx(t,{children:e.jsx(py,{})})}),e.jsx(oe,{path:"/consultation-basic",element:e.jsx(t,{children:e.jsx(iy,{})})}),e.jsx(oe,{path:"/chat",element:e.jsx(t,{children:e.jsx(my,{})})}),e.jsx(oe,{path:"/notifications",element:e.jsx(t,{children:e.jsx(oy,{})})}),e.jsx(oe,{path:"*",element:e.jsx(hu,{to:"/"})})]})}),e.jsx(_h,{}),e.jsx(Mh,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,theme:{primary:"#4aed88"}}}})]})};function vv(){return e.jsx(Oh,{children:e.jsx(du,{children:e.jsx(jv,{})})})}class Nv extends ic.Component{constructor(s){super(s),this.state={hasError:!1}}static getDerivedStateFromError(s){return{hasError:!0}}componentDidCatch(s,r){console.error("Error caught by boundary:",s,r)}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Oops! Something went wrong"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We're sorry for the inconvenience. Please refresh the page or try again later."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Refresh Page"})]})}):this.props.children}}qu.createRoot(document.getElementById("root")).render(e.jsx(ic.StrictMode,{children:e.jsx(Nv,{children:e.jsx(vv,{})})}));
//# sourceMappingURL=index-D6GXhNuG.js.map
